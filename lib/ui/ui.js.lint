
//     Underscore.js 1.4.1
//     http://underscorejs.org
//     (c) 2009-2012 Jeremy Ashkenas, DocumentCloud Inc.
//     Underscore may be freely distributed under the MIT license.

(function() {

  // Baseline setup
  // --------------

  // Establish the root object, `window` in the browser, or `global` on the server.
  var root = this;

  // Save the previous value of the `_` variable.
  var previousUnderscore = root._;

  // Establish the object that gets returned to break out of a loop iteration.
  var breaker = {};

  // Save bytes in the minified (but not gzipped) version:
  var ArrayProto = Array.prototype, ObjProto = Object.prototype, FuncProto = Function.prototype;

  // Create quick reference variables for speed access to core prototypes.
  var push             = ArrayProto.push,
      slice            = ArrayProto.slice,
      concat           = ArrayProto.concat,
      unshift          = ArrayProto.unshift,
      toString         = ObjProto.toString,
      hasOwnProperty   = ObjProto.hasOwnProperty;

  // All **ECMAScript 5** native function implementations that we hope to use
  // are declared here.
  var
    nativeForEach      = ArrayProto.forEach,
    nativeMap          = ArrayProto.map,
    nativeReduce       = ArrayProto.reduce,
    nativeReduceRight  = ArrayProto.reduceRight,
    nativeFilter       = ArrayProto.filter,
    nativeEvery        = ArrayProto.every,
    nativeSome         = ArrayProto.some,
    nativeIndexOf      = ArrayProto.indexOf,
    nativeLastIndexOf  = ArrayProto.lastIndexOf,
    nativeIsArray      = Array.isArray,
    nativeKeys         = Object.keys,
    nativeBind         = FuncProto.bind;

  // Create a safe reference to the Underscore object for use below.
  var _ = function(obj) {
    if (obj instanceof _) return obj;
    if (!(this instanceof _)) return new _(obj);
    this._wrapped = obj;
  };

  // Export the Underscore object for **Node.js** and **"CommonJS"**, with
  // backwards-compatibility for the old `require()` API. If we're not in
  // CommonJS, add `_` to the global object via a string identifier for
  // the Closure Compiler "advanced" mode. Registration as an AMD module
  // via define() happens at the end of this file.
  if (typeof exports !== 'undefined') {
    if (typeof module !== 'undefined' && module.exports) {
      exports = module.exports = _;
    }
    exports._ = _;
  } else {
    root['_'] = _;
  }

  // Current version.
  _.VERSION = '1.4.1';

  // Collection Functions
  // --------------------

  // The cornerstone, an `each` implementation, aka `forEach`.
  // Handles objects with the built-in `forEach`, arrays, and raw objects.
  // Delegates to **ECMAScript 5**'s native `forEach` if available.
  var each = _.each = _.forEach = function(obj, iterator, context) {
    if (nativeForEach && obj.forEach === nativeForEach) {
      obj.forEach(iterator, context);
    } else if (obj.length === +obj.length) {
      for (var i = 0, l = obj.length; i < l; i++) {
        if (iterator.call(context, obj[i], i, obj) === breaker) return;
      }
    } else {
      for (var key in obj) {
        if (_.has(obj, key)) {
          if (iterator.call(context, obj[key], key, obj) === breaker) return;
        }
      }
    }
  };

  // Return the results of applying the iterator to each element.
  // Delegates to **ECMAScript 5**'s native `map` if available.
  _.map = _.collect = function(obj, iterator, context) {
    var results = [];
    if (nativeMap && obj.map === nativeMap) return obj.map(iterator, context);
    each(obj, function(value, index, list) {
      results[results.length] = iterator.call(context, value, index, list);
    });
    return results;
  };

  // **Reduce** builds up a single result from a list of values, aka `inject`,
  // or `foldl`. Delegates to **ECMAScript 5**'s native `reduce` if available.
  _.reduce = _.foldl = _.inject = function(obj, iterator, memo, context) {
    var initial = arguments.length > 2;
    if (nativeReduce && obj.reduce === nativeReduce) {
      if (context) iterator = _.bind(iterator, context);
      return initial ? obj.reduce(iterator, memo) : obj.reduce(iterator);
    }
    each(obj, function(value, index, list) {
      if (!initial) {
        memo = value;
        initial = true;
      } else {
        memo = iterator.call(context, memo, value, index, list);
      }
    });
    if (!initial) throw new TypeError('Reduce of empty array with no initial value');
    return memo;
  };

  // The right-associative version of reduce, also known as `foldr`.
  // Delegates to **ECMAScript 5**'s native `reduceRight` if available.
  _.reduceRight = _.foldr = function(obj, iterator, memo, context) {
    var initial = arguments.length > 2;
    if (nativeReduceRight && obj.reduceRight === nativeReduceRight) {
      if (context) iterator = _.bind(iterator, context);
      return arguments.length > 2 ? obj.reduceRight(iterator, memo) : obj.reduceRight(iterator);
    }
    var length = obj.length;
    if (length !== +length) {
      var keys = _.keys(obj);
      length = keys.length;
    }
    each(obj, function(value, index, list) {
      index = keys ? keys[--length] : --length;
      if (!initial) {
        memo = obj[index];
        initial = true;
      } else {
        memo = iterator.call(context, memo, obj[index], index, list);
      }
    });
    if (!initial) throw new TypeError('Reduce of empty array with no initial value');
    return memo;
  };

  // Return the first value which passes a truth test. Aliased as `detect`.
  _.find = _.detect = function(obj, iterator, context) {
    var result;
    any(obj, function(value, index, list) {
      if (iterator.call(context, value, index, list)) {
        result = value;
        return true;
      }
    });
    return result;
  };

  // Return all the elements that pass a truth test.
  // Delegates to **ECMAScript 5**'s native `filter` if available.
  // Aliased as `select`.
  _.filter = _.select = function(obj, iterator, context) {
    var results = [];
    if (nativeFilter && obj.filter === nativeFilter) return obj.filter(iterator, context);
    each(obj, function(value, index, list) {
      if (iterator.call(context, value, index, list)) results[results.length] = value;
    });
    return results;
  };

  // Return all the elements for which a truth test fails.
  _.reject = function(obj, iterator, context) {
    var results = [];
    each(obj, function(value, index, list) {
      if (!iterator.call(context, value, index, list)) results[results.length] = value;
    });
    return results;
  };

  // Determine whether all of the elements match a truth test.
  // Delegates to **ECMAScript 5**'s native `every` if available.
  // Aliased as `all`.
  _.every = _.all = function(obj, iterator, context) {
    iterator || (iterator = _.identity);
    var result = true;
    if (nativeEvery && obj.every === nativeEvery) return obj.every(iterator, context);
    each(obj, function(value, index, list) {
      if (!(result = result && iterator.call(context, value, index, list))) return breaker;
    });
    return !!result;
  };

  // Determine if at least one element in the object matches a truth test.
  // Delegates to **ECMAScript 5**'s native `some` if available.
  // Aliased as `any`.
  var any = _.some = _.any = function(obj, iterator, context) {
    iterator || (iterator = _.identity);
    var result = false;
    if (nativeSome && obj.some === nativeSome) return obj.some(iterator, context);
    each(obj, function(value, index, list) {
      if (result || (result = iterator.call(context, value, index, list))) return breaker;
    });
    return !!result;
  };

  // Determine if the array or object contains a given value (using `===`).
  // Aliased as `include`.
  _.contains = _.include = function(obj, target) {
    var found = false;
    if (nativeIndexOf && obj.indexOf === nativeIndexOf) return obj.indexOf(target) != -1;
    found = any(obj, function(value) {
      return value === target;
    });
    return found;
  };

  // Invoke a method (with arguments) on every item in a collection.
  _.invoke = function(obj, method) {
    var args = slice.call(arguments, 2);
    return _.map(obj, function(value) {
      return (_.isFunction(method) ? method : value[method]).apply(value, args);
    });
  };

  // Convenience version of a common use case of `map`: fetching a property.
  _.pluck = function(obj, key) {
    return _.map(obj, function(value){ return value[key]; });
  };

  // Convenience version of a common use case of `filter`: selecting only objects
  // with specific `key:value` pairs.
  _.where = function(obj, attrs) {
    if (_.isEmpty(attrs)) return [];
    return _.filter(obj, function(value) {
      for (var key in attrs) {
        if (attrs[key] !== value[key]) return false;
      }
      return true;
    });
  };

  // Return the maximum element or (element-based computation).
  // Can't optimize arrays of integers longer than 65,535 elements.
  // See: https://bugs.webkit.org/show_bug.cgi?id=80797
  _.max = function(obj, iterator, context) {
    if (!iterator && _.isArray(obj) && obj[0] === +obj[0] && obj.length < 65535) {
      return Math.max.apply(Math, obj);
    }
    if (!iterator && _.isEmpty(obj)) return -Infinity;
    var result = {computed : -Infinity};
    each(obj, function(value, index, list) {
      var computed = iterator ? iterator.call(context, value, index, list) : value;
      computed >= result.computed && (result = {value : value, computed : computed});
    });
    return result.value;
  };

  // Return the minimum element (or element-based computation).
  _.min = function(obj, iterator, context) {
    if (!iterator && _.isArray(obj) && obj[0] === +obj[0] && obj.length < 65535) {
      return Math.min.apply(Math, obj);
    }
    if (!iterator && _.isEmpty(obj)) return Infinity;
    var result = {computed : Infinity};
    each(obj, function(value, index, list) {
      var computed = iterator ? iterator.call(context, value, index, list) : value;
      computed < result.computed && (result = {value : value, computed : computed});
    });
    return result.value;
  };

  // Shuffle an array.
  _.shuffle = function(obj) {
    var rand;
    var index = 0;
    var shuffled = [];
    each(obj, function(value) {
      rand = _.random(index++);
      shuffled[index - 1] = shuffled[rand];
      shuffled[rand] = value;
    });
    return shuffled;
  };

  // An internal function to generate lookup iterators.
  var lookupIterator = function(value) {
    return _.isFunction(value) ? value : function(obj){ return obj[value]; };
  };

  // Sort the object's values by a criterion produced by an iterator.
  _.sortBy = function(obj, value, context) {
    var iterator = lookupIterator(value);
    return _.pluck(_.map(obj, function(value, index, list) {
      return {
        value : value,
        index : index,
        criteria : iterator.call(context, value, index, list)
      };
    }).sort(function(left, right) {
      var a = left.criteria;
      var b = right.criteria;
      if (a !== b) {
        if (a > b || a === void 0) return 1;
        if (a < b || b === void 0) return -1;
      }
      return left.index < right.index ? -1 : 1;
    }), 'value');
  };

  // An internal function used for aggregate "group by" operations.
  var group = function(obj, value, context, behavior) {
    var result = {};
    var iterator = lookupIterator(value);
    each(obj, function(value, index) {
      var key = iterator.call(context, value, index, obj);
      behavior(result, key, value);
    });
    return result;
  };

  // Groups the object's values by a criterion. Pass either a string attribute
  // to group by, or a function that returns the criterion.
  _.groupBy = function(obj, value, context) {
    return group(obj, value, context, function(result, key, value) {
      (_.has(result, key) ? result[key] : (result[key] = [])).push(value);
    });
  };

  // Counts instances of an object that group by a certain criterion. Pass
  // either a string attribute to count by, or a function that returns the
  // criterion.
  _.countBy = function(obj, value, context) {
    return group(obj, value, context, function(result, key, value) {
      if (!_.has(result, key)) result[key] = 0;
      result[key]++;
    });
  };

  // Use a comparator function to figure out the smallest index at which
  // an object should be inserted so as to maintain order. Uses binary search.
  _.sortedIndex = function(array, obj, iterator, context) {
    iterator = iterator == null ? _.identity : lookupIterator(iterator);
    var value = iterator.call(context, obj);
    var low = 0, high = array.length;
    while (low < high) {
      var mid = (low + high) >>> 1;
      iterator.call(context, array[mid]) < value ? low = mid + 1 : high = mid;
    }
    return low;
  };

  // Safely convert anything iterable into a real, live array.
  _.toArray = function(obj) {
    if (!obj) return [];
    if (obj.length === +obj.length) return slice.call(obj);
    return _.values(obj);
  };

  // Return the number of elements in an object.
  _.size = function(obj) {
    return (obj.length === +obj.length) ? obj.length : _.keys(obj).length;
  };

  // Array Functions
  // ---------------

  // Get the first element of an array. Passing **n** will return the first N
  // values in the array. Aliased as `head` and `take`. The **guard** check
  // allows it to work with `_.map`.
  _.first = _.head = _.take = function(array, n, guard) {
    return (n != null) && !guard ? slice.call(array, 0, n) : array[0];
  };

  // Returns everything but the last entry of the array. Especially useful on
  // the arguments object. Passing **n** will return all the values in
  // the array, excluding the last N. The **guard** check allows it to work with
  // `_.map`.
  _.initial = function(array, n, guard) {
    return slice.call(array, 0, array.length - ((n == null) || guard ? 1 : n));
  };

  // Get the last element of an array. Passing **n** will return the last N
  // values in the array. The **guard** check allows it to work with `_.map`.
  _.last = function(array, n, guard) {
    if ((n != null) && !guard) {
      return slice.call(array, Math.max(array.length - n, 0));
    } else {
      return array[array.length - 1];
    }
  };

  // Returns everything but the first entry of the array. Aliased as `tail` and `drop`.
  // Especially useful on the arguments object. Passing an **n** will return
  // the rest N values in the array. The **guard**
  // check allows it to work with `_.map`.
  _.rest = _.tail = _.drop = function(array, n, guard) {
    return slice.call(array, (n == null) || guard ? 1 : n);
  };

  // Trim out all falsy values from an array.
  _.compact = function(array) {
    return _.filter(array, function(value){ return !!value; });
  };

  // Internal implementation of a recursive `flatten` function.
  var flatten = function(input, shallow, output) {
    each(input, function(value) {
      if (_.isArray(value)) {
        shallow ? push.apply(output, value) : flatten(value, shallow, output);
      } else {
        output.push(value);
      }
    });
    return output;
  };

  // Return a completely flattened version of an array.
  _.flatten = function(array, shallow) {
    return flatten(array, shallow, []);
  };

  // Return a version of the array that does not contain the specified value(s).
  _.without = function(array) {
    return _.difference(array, slice.call(arguments, 1));
  };

  // Produce a duplicate-free version of the array. If the array has already
  // been sorted, you have the option of using a faster algorithm.
  // Aliased as `unique`.
  _.uniq = _.unique = function(array, isSorted, iterator, context) {
    var initial = iterator ? _.map(array, iterator, context) : array;
    var results = [];
    var seen = [];
    each(initial, function(value, index) {
      if (isSorted ? (!index || seen[seen.length - 1] !== value) : !_.contains(seen, value)) {
        seen.push(value);
        results.push(array[index]);
      }
    });
    return results;
  };

  // Produce an array that contains the union: each distinct element from all of
  // the passed-in arrays.
  _.union = function() {
    return _.uniq(concat.apply(ArrayProto, arguments));
  };

  // Produce an array that contains every item shared between all the
  // passed-in arrays.
  _.intersection = function(array) {
    var rest = slice.call(arguments, 1);
    return _.filter(_.uniq(array), function(item) {
      return _.every(rest, function(other) {
        return _.indexOf(other, item) >= 0;
      });
    });
  };

  // Take the difference between one array and a number of other arrays.
  // Only the elements present in just the first array will remain.
  _.difference = function(array) {
    var rest = concat.apply(ArrayProto, slice.call(arguments, 1));
    return _.filter(array, function(value){ return !_.contains(rest, value); });
  };

  // Zip together multiple lists into a single array -- elements that share
  // an index go together.
  _.zip = function() {
    var args = slice.call(arguments);
    var length = _.max(_.pluck(args, 'length'));
    var results = new Array(length);
    for (var i = 0; i < length; i++) {
      results[i] = _.pluck(args, "" + i);
    }
    return results;
  };

  // Converts lists into objects. Pass either a single array of `[key, value]`
  // pairs, or two parallel arrays of the same length -- one of keys, and one of
  // the corresponding values.
  _.object = function(list, values) {
    var result = {};
    for (var i = 0, l = list.length; i < l; i++) {
      if (values) {
        result[list[i]] = values[i];
      } else {
        result[list[i][0]] = list[i][1];
      }
    }
    return result;
  };

  // If the browser doesn't supply us with indexOf (I'm looking at you, **MSIE**),
  // we need this function. Return the position of the first occurrence of an
  // item in an array, or -1 if the item is not included in the array.
  // Delegates to **ECMAScript 5**'s native `indexOf` if available.
  // If the array is large and already in sort order, pass `true`
  // for **isSorted** to use binary search.
  _.indexOf = function(array, item, isSorted) {
    var i = 0, l = array.length;
    if (isSorted) {
      if (typeof isSorted == 'number') {
        i = (isSorted < 0 ? Math.max(0, l + isSorted) : isSorted);
      } else {
        i = _.sortedIndex(array, item);
        return array[i] === item ? i : -1;
      }
    }
    if (nativeIndexOf && array.indexOf === nativeIndexOf) return array.indexOf(item, isSorted);
    for (; i < l; i++) if (array[i] === item) return i;
    return -1;
  };

  // Delegates to **ECMAScript 5**'s native `lastIndexOf` if available.
  _.lastIndexOf = function(array, item, from) {
    var hasIndex = from != null;
    if (nativeLastIndexOf && array.lastIndexOf === nativeLastIndexOf) {
      return hasIndex ? array.lastIndexOf(item, from) : array.lastIndexOf(item);
    }
    var i = (hasIndex ? from : array.length);
    while (i--) if (array[i] === item) return i;
    return -1;
  };

  // Generate an integer Array containing an arithmetic progression. A port of
  // the native Python `range()` function. See
  // [the Python documentation](http://docs.python.org/library/functions.html#range).
  _.range = function(start, stop, step) {
    if (arguments.length <= 1) {
      stop = start || 0;
      start = 0;
    }
    step = arguments[2] || 1;

    var len = Math.max(Math.ceil((stop - start) / step), 0);
    var idx = 0;
    var range = new Array(len);

    while(idx < len) {
      range[idx++] = start;
      start += step;
    }

    return range;
  };

  // Function (ahem) Functions
  // ------------------

  // Reusable constructor function for prototype setting.
  var ctor = function(){};

  // Create a function bound to a given object (assigning `this`, and arguments,
  // optionally). Binding with arguments is also known as `curry`.
  // Delegates to **ECMAScript 5**'s native `Function.bind` if available.
  // We check for `func.bind` first, to fail fast when `func` is undefined.
  _.bind = function bind(func, context) {
    var bound, args;
    if (func.bind === nativeBind && nativeBind) return nativeBind.apply(func, slice.call(arguments, 1));
    if (!_.isFunction(func)) throw new TypeError;
    args = slice.call(arguments, 2);
    return bound = function() {
      if (!(this instanceof bound)) return func.apply(context, args.concat(slice.call(arguments)));
      ctor.prototype = func.prototype;
      var self = new ctor;
      var result = func.apply(self, args.concat(slice.call(arguments)));
      if (Object(result) === result) return result;
      return self;
    };
  };

  // Bind all of an object's methods to that object. Useful for ensuring that
  // all callbacks defined on an object belong to it.
  _.bindAll = function(obj) {
    var funcs = slice.call(arguments, 1);
    if (funcs.length == 0) funcs = _.functions(obj);
    each(funcs, function(f) { obj[f] = _.bind(obj[f], obj); });
    return obj;
  };

  // Memoize an expensive function by storing its results.
  _.memoize = function(func, hasher) {
    var memo = {};
    hasher || (hasher = _.identity);
    return function() {
      var key = hasher.apply(this, arguments);
      return _.has(memo, key) ? memo[key] : (memo[key] = func.apply(this, arguments));
    };
  };

  // Delays a function for the given number of milliseconds, and then calls
  // it with the arguments supplied.
  _.delay = function(func, wait) {
    var args = slice.call(arguments, 2);
    return setTimeout(function(){ return func.apply(null, args); }, wait);
  };

  // Defers a function, scheduling it to run after the current call stack has
  // cleared.
  _.defer = function(func) {
    return _.delay.apply(_, [func, 1].concat(slice.call(arguments, 1)));
  };

  // Returns a function, that, when invoked, will only be triggered at most once
  // during a given window of time.
  _.throttle = function(func, wait) {
    var context, args, timeout, throttling, more, result;
    var whenDone = _.debounce(function(){ more = throttling = false; }, wait);
    return function() {
      context = this; args = arguments;
      var later = function() {
        timeout = null;
        if (more) {
          result = func.apply(context, args);
        }
        whenDone();
      };
      if (!timeout) timeout = setTimeout(later, wait);
      if (throttling) {
        more = true;
      } else {
        throttling = true;
        result = func.apply(context, args);
      }
      whenDone();
      return result;
    };
  };

  // Returns a function, that, as long as it continues to be invoked, will not
  // be triggered. The function will be called after it stops being called for
  // N milliseconds. If `immediate` is passed, trigger the function on the
  // leading edge, instead of the trailing.
  _.debounce = function(func, wait, immediate) {
    var timeout, result;
    return function() {
      var context = this, args = arguments;
      var later = function() {
        timeout = null;
        if (!immediate) result = func.apply(context, args);
      };
      var callNow = immediate && !timeout;
      clearTimeout(timeout);
      timeout = setTimeout(later, wait);
      if (callNow) result = func.apply(context, args);
      return result;
    };
  };

  // Returns a function that will be executed at most one time, no matter how
  // often you call it. Useful for lazy initialization.
  _.once = function(func) {
    var ran = false, memo;
    return function() {
      if (ran) return memo;
      ran = true;
      memo = func.apply(this, arguments);
      func = null;
      return memo;
    };
  };

  // Returns the first function passed as an argument to the second,
  // allowing you to adjust arguments, run code before and after, and
  // conditionally execute the original function.
  _.wrap = function(func, wrapper) {
    return function() {
      var args = [func];
      push.apply(args, arguments);
      return wrapper.apply(this, args);
    };
  };

  // Returns a function that is the composition of a list of functions, each
  // consuming the return value of the function that follows.
  _.compose = function() {
    var funcs = arguments;
    return function() {
      var args = arguments;
      for (var i = funcs.length - 1; i >= 0; i--) {
        args = [funcs[i].apply(this, args)];
      }
      return args[0];
    };
  };

  // Returns a function that will only be executed after being called N times.
  _.after = function(times, func) {
    if (times <= 0) return func();
    return function() {
      if (--times < 1) {
        return func.apply(this, arguments);
      }
    };
  };

  // Object Functions
  // ----------------

  // Retrieve the names of an object's properties.
  // Delegates to **ECMAScript 5**'s native `Object.keys`
  _.keys = nativeKeys || function(obj) {
    if (obj !== Object(obj)) throw new TypeError('Invalid object');
    var keys = [];
    for (var key in obj) if (_.has(obj, key)) keys[keys.length] = key;
    return keys;
  };

  // Retrieve the values of an object's properties.
  _.values = function(obj) {
    var values = [];
    for (var key in obj) if (_.has(obj, key)) values.push(obj[key]);
    return values;
  };

  // Convert an object into a list of `[key, value]` pairs.
  _.pairs = function(obj) {
    var pairs = [];
    for (var key in obj) if (_.has(obj, key)) pairs.push([key, obj[key]]);
    return pairs;
  };

  // Invert the keys and values of an object. The values must be serializable.
  _.invert = function(obj) {
    var result = {};
    for (var key in obj) if (_.has(obj, key)) result[obj[key]] = key;
    return result;
  };

  // Return a sorted list of the function names available on the object.
  // Aliased as `methods`
  _.functions = _.methods = function(obj) {
    var names = [];
    for (var key in obj) {
      if (_.isFunction(obj[key])) names.push(key);
    }
    return names.sort();
  };

  // Extend a given object with all the properties in passed-in object(s).
  _.extend = function(obj) {
    each(slice.call(arguments, 1), function(source) {
      for (var prop in source) {
        obj[prop] = source[prop];
      }
    });
    return obj;
  };

  // Return a copy of the object only containing the whitelisted properties.
  _.pick = function(obj) {
    var copy = {};
    var keys = concat.apply(ArrayProto, slice.call(arguments, 1));
    each(keys, function(key) {
      if (key in obj) copy[key] = obj[key];
    });
    return copy;
  };

   // Return a copy of the object without the blacklisted properties.
  _.omit = function(obj) {
    var copy = {};
    var keys = concat.apply(ArrayProto, slice.call(arguments, 1));
    for (var key in obj) {
      if (!_.contains(keys, key)) copy[key] = obj[key];
    }
    return copy;
  };

  // Fill in a given object with default properties.
  _.defaults = function(obj) {
    each(slice.call(arguments, 1), function(source) {
      for (var prop in source) {
        if (obj[prop] == null) obj[prop] = source[prop];
      }
    });
    return obj;
  };

  // Create a (shallow-cloned) duplicate of an object.
  _.clone = function(obj) {
    if (!_.isObject(obj)) return obj;
    return _.isArray(obj) ? obj.slice() : _.extend({}, obj);
  };

  // Invokes interceptor with the obj, and then returns obj.
  // The primary purpose of this method is to "tap into" a method chain, in
  // order to perform operations on intermediate results within the chain.
  _.tap = function(obj, interceptor) {
    interceptor(obj);
    return obj;
  };

  // Internal recursive comparison function for `isEqual`.
  var eq = function(a, b, aStack, bStack) {
    // Identical objects are equal. `0 === -0`, but they aren't identical.
    // See the Harmony `egal` proposal: http://wiki.ecmascript.org/doku.php?id=harmony:egal.
    if (a === b) return a !== 0 || 1 / a == 1 / b;
    // A strict comparison is necessary because `null == undefined`.
    if (a == null || b == null) return a === b;
    // Unwrap any wrapped objects.
    if (a instanceof _) a = a._wrapped;
    if (b instanceof _) b = b._wrapped;
    // Compare `[[Class]]` names.
    var className = toString.call(a);
    if (className != toString.call(b)) return false;
    switch (className) {
      // Strings, numbers, dates, and booleans are compared by value.
      case '[object String]':
        // Primitives and their corresponding object wrappers are equivalent; thus, `"5"` is
        // equivalent to `new String("5")`.
        return a == String(b);
      case '[object Number]':
        // `NaN`s are equivalent, but non-reflexive. An `egal` comparison is performed for
        // other numeric values.
        return a != +a ? b != +b : (a == 0 ? 1 / a == 1 / b : a == +b);
      case '[object Date]':
      case '[object Boolean]':
        // Coerce dates and booleans to numeric primitive values. Dates are compared by their
        // millisecond representations. Note that invalid dates with millisecond representations
        // of `NaN` are not equivalent.
        return +a == +b;
      // RegExps are compared by their source patterns and flags.
      case '[object RegExp]':
        return a.source == b.source &&
               a.global == b.global &&
               a.multiline == b.multiline &&
               a.ignoreCase == b.ignoreCase;
    }
    if (typeof a != 'object' || typeof b != 'object') return false;
    // Assume equality for cyclic structures. The algorithm for detecting cyclic
    // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.
    var length = aStack.length;
    while (length--) {
      // Linear search. Performance is inversely proportional to the number of
      // unique nested structures.
      if (aStack[length] == a) return bStack[length] == b;
    }
    // Add the first object to the stack of traversed objects.
    aStack.push(a);
    bStack.push(b);
    var size = 0, result = true;
    // Recursively compare objects and arrays.
    if (className == '[object Array]') {
      // Compare array lengths to determine if a deep comparison is necessary.
      size = a.length;
      result = size == b.length;
      if (result) {
        // Deep compare the contents, ignoring non-numeric properties.
        while (size--) {
          if (!(result = eq(a[size], b[size], aStack, bStack))) break;
        }
      }
    } else {
      // Objects with different constructors are not equivalent, but `Object`s
      // from different frames are.
      var aCtor = a.constructor, bCtor = b.constructor;
      if (aCtor !== bCtor && !(_.isFunction(aCtor) && (aCtor instanceof aCtor) &&
                               _.isFunction(bCtor) && (bCtor instanceof bCtor))) {
        return false;
      }
      // Deep compare objects.
      for (var key in a) {
        if (_.has(a, key)) {
          // Count the expected number of properties.
          size++;
          // Deep compare each member.
          if (!(result = _.has(b, key) && eq(a[key], b[key], aStack, bStack))) break;
        }
      }
      // Ensure that both objects contain the same number of properties.
      if (result) {
        for (key in b) {
          if (_.has(b, key) && !(size--)) break;
        }
        result = !size;
      }
    }
    // Remove the first object from the stack of traversed objects.
    aStack.pop();
    bStack.pop();
    return result;
  };

  // Perform a deep comparison to check if two objects are equal.
  _.isEqual = function(a, b) {
    return eq(a, b, [], []);
  };

  // Is a given array, string, or object empty?
  // An "empty" object has no enumerable own-properties.
  _.isEmpty = function(obj) {
    if (obj == null) return true;
    if (_.isArray(obj) || _.isString(obj)) return obj.length === 0;
    for (var key in obj) if (_.has(obj, key)) return false;
    return true;
  };

  // Is a given value a DOM element?
  _.isElement = function(obj) {
    return !!(obj && obj.nodeType === 1);
  };

  // Is a given value an array?
  // Delegates to ECMA5's native Array.isArray
  _.isArray = nativeIsArray || function(obj) {
    return toString.call(obj) == '[object Array]';
  };

  // Is a given variable an object?
  _.isObject = function(obj) {
    return obj === Object(obj);
  };

  // Add some isType methods: isArguments, isFunction, isString, isNumber, isDate, isRegExp.
  each(['Arguments', 'Function', 'String', 'Number', 'Date', 'RegExp'], function(name) {
    _['is' + name] = function(obj) {
      return toString.call(obj) == '[object ' + name + ']';
    };
  });

  // Define a fallback version of the method in browsers (ahem, IE), where
  // there isn't any inspectable "Arguments" type.
  if (!_.isArguments(arguments)) {
    _.isArguments = function(obj) {
      return !!(obj && _.has(obj, 'callee'));
    };
  }

  // Optimize `isFunction` if appropriate.
  if (typeof (/./) !== 'function') {
    _.isFunction = function(obj) {
      return typeof obj === 'function';
    };
  }

  // Is a given object a finite number?
  _.isFinite = function(obj) {
    return _.isNumber(obj) && isFinite(obj);
  };

  // Is the given value `NaN`? (NaN is the only number which does not equal itself).
  _.isNaN = function(obj) {
    return _.isNumber(obj) && obj != +obj;
  };

  // Is a given value a boolean?
  _.isBoolean = function(obj) {
    return obj === true || obj === false || toString.call(obj) == '[object Boolean]';
  };

  // Is a given value equal to null?
  _.isNull = function(obj) {
    return obj === null;
  };

  // Is a given variable undefined?
  _.isUndefined = function(obj) {
    return obj === void 0;
  };

  // Shortcut function for checking if an object has a given property directly
  // on itself (in other words, not on a prototype).
  _.has = function(obj, key) {
    return hasOwnProperty.call(obj, key);
  };

  // Utility Functions
  // -----------------

  // Run Underscore.js in *noConflict* mode, returning the `_` variable to its
  // previous owner. Returns a reference to the Underscore object.
  _.noConflict = function() {
    root._ = previousUnderscore;
    return this;
  };

  // Keep the identity function around for default iterators.
  _.identity = function(value) {
    return value;
  };

  // Run a function **n** times.
  _.times = function(n, iterator, context) {
    for (var i = 0; i < n; i++) iterator.call(context, i);
  };

  // Return a random integer between min and max (inclusive).
  _.random = function(min, max) {
    if (max == null) {
      max = min;
      min = 0;
    }
    return min + (0 | Math.random() * (max - min + 1));
  };

  // List of HTML entities for escaping.
  var entityMap = {
    escape: {
      '&': '&amp;',
      '<': '&lt;',
      '>': '&gt;',
      '"': '&quot;',
      "'": '&#x27;',
      '/': '&#x2F;'
    }
  };
  entityMap.unescape = _.invert(entityMap.escape);

  // Regexes containing the keys and values listed immediately above.
  var entityRegexes = {
    escape:   new RegExp('[' + _.keys(entityMap.escape).join('') + ']', 'g'),
    unescape: new RegExp('(' + _.keys(entityMap.unescape).join('|') + ')', 'g')
  };

  // Functions for escaping and unescaping strings to/from HTML interpolation.
  _.each(['escape', 'unescape'], function(method) {
    _[method] = function(string) {
      if (string == null) return '';
      return ('' + string).replace(entityRegexes[method], function(match) {
        return entityMap[method][match];
      });
    };
  });

  // If the value of the named property is a function then invoke it;
  // otherwise, return it.
  _.result = function(object, property) {
    if (object == null) return null;
    var value = object[property];
    return _.isFunction(value) ? value.call(object) : value;
  };

  // Add your own custom functions to the Underscore object.
  _.mixin = function(obj) {
    each(_.functions(obj), function(name){
      var func = _[name] = obj[name];
      _.prototype[name] = function() {
        var args = [this._wrapped];
        push.apply(args, arguments);
        return result.call(this, func.apply(_, args));
      };
    });
  };

  // Generate a unique integer id (unique within the entire client session).
  // Useful for temporary DOM ids.
  var idCounter = 0;
  _.uniqueId = function(prefix) {
    var id = idCounter++;
    return prefix ? prefix + id : id;
  };

  // By default, Underscore uses ERB-style template delimiters, change the
  // following template settings to use alternative delimiters.
  _.templateSettings = {
    evaluate    : /<%([\s\S]+?)%>/g,
    interpolate : /<%=([\s\S]+?)%>/g,
    escape      : /<%-([\s\S]+?)%>/g
  };

  // When customizing `templateSettings`, if you don't want to define an
  // interpolation, evaluation or escaping regex, we need one that is
  // guaranteed not to match.
  var noMatch = /(.)^/;

  // Certain characters need to be escaped so that they can be put into a
  // string literal.
  var escapes = {
    "'":      "'",
    '\\':     '\\',
    '\r':     'r',
    '\n':     'n',
    '\t':     't',
    '\u2028': 'u2028',
    '\u2029': 'u2029'
  };

  var escaper = /\\|'|\r|\n|\t|\u2028|\u2029/g;

  // JavaScript micro-templating, similar to John Resig's implementation.
  // Underscore templating handles arbitrary delimiters, preserves whitespace,
  // and correctly escapes quotes within interpolated code.
  _.template = function(text, data, settings) {
    settings = _.defaults({}, settings, _.templateSettings);

    // Combine delimiters into one regular expression via alternation.
    var matcher = new RegExp([
      (settings.escape || noMatch).source,
      (settings.interpolate || noMatch).source,
      (settings.evaluate || noMatch).source
    ].join('|') + '|$', 'g');

    // Compile the template source, escaping string literals appropriately.
    var index = 0;
    var source = "__p+='";
    text.replace(matcher, function(match, escape, interpolate, evaluate, offset) {
      source += text.slice(index, offset)
        .replace(escaper, function(match) { return '\\' + escapes[match]; });
      source +=
        escape ? "'+\n((__t=(" + escape + "))==null?'':_.escape(__t))+\n'" :
        interpolate ? "'+\n((__t=(" + interpolate + "))==null?'':__t)+\n'" :
        evaluate ? "';\n" + evaluate + "\n__p+='" : '';
      index = offset + match.length;
    });
    source += "';\n";

    // If a variable is not specified, place data values in local scope.
    if (!settings.variable) source = 'with(obj||{}){\n' + source + '}\n';

    source = "var __t,__p='',__j=Array.prototype.join," +
      "print=function(){__p+=__j.call(arguments,'');};\n" +
      source + "return __p;\n";

    try {
      var render = new Function(settings.variable || 'obj', '_', source);
    } catch (e) {
      e.source = source;
      throw e;
    }

    if (data) return render(data, _);
    var template = function(data) {
      return render.call(this, data, _);
    };

    // Provide the compiled function source as a convenience for precompilation.
    template.source = 'function(' + (settings.variable || 'obj') + '){\n' + source + '}';

    return template;
  };

  // Add a "chain" function, which will delegate to the wrapper.
  _.chain = function(obj) {
    return _(obj).chain();
  };

  // OOP
  // ---------------
  // If Underscore is called as a function, it returns a wrapped object that
  // can be used OO-style. This wrapper holds altered versions of all the
  // underscore functions. Wrapped objects may be chained.

  // Helper function to continue chaining intermediate results.
  var result = function(obj) {
    return this._chain ? _(obj).chain() : obj;
  };

  // Add all of the Underscore functions to the wrapper object.
  _.mixin(_);

  // Add all mutator Array functions to the wrapper.
  each(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(name) {
    var method = ArrayProto[name];
    _.prototype[name] = function() {
      var obj = this._wrapped;
      method.apply(obj, arguments);
      if ((name == 'shift' || name == 'splice') && obj.length === 0) delete obj[0];
      return result.call(this, obj);
    };
  });

  // Add all accessor Array functions to the wrapper.
  each(['concat', 'join', 'slice'], function(name) {
    var method = ArrayProto[name];
    _.prototype[name] = function() {
      return result.call(this, method.apply(this._wrapped, arguments));
    };
  });

  _.extend(_.prototype, {

    // Start chaining a wrapped Underscore object.
    chain: function() {
      this._chain = true;
      return this;
    },

    // Extracts the result from a wrapped and chained object.
    value: function() {
      return this._wrapped;
    }

  });

  // AMD define happens at the end for compatibility with AMD loaders
  // that don't enforce next-turn semantics on modules.
  if (typeof define === 'function' && define.amd) {
    define('underscore',[], function() {
      return _;
    });
  }

}).call(this);

// Knockout JavaScript library v2.2.0
// (c) Steven Sanderson - http://knockoutjs.com/
// License: MIT (http://www.opensource.org/licenses/mit-license.php)

(function() {function j(w){throw w;}var m=!0,q=null,r=!1;function t(w){return function(){return w}};var x=window,y=document,ha=navigator,G=window.jQuery,I=void 0;
function L(w){function ia(b,c,d,e,f){var g=[];b=a.j(function(){var b=c(d,f)||[];0<g.length&&(a.a.Za(M(g),b),e&&a.r.K(e,q,[d,b,f]));g.splice(0,g.length);a.a.P(g,b)},q,{Y:b,La:function(){return!a.a.mb(g)}});return{M:g,j:b.pa()?b:I}}function M(b){for(;b.length&&!a.a.Z(b[0]);)b.splice(0,1);if(1<b.length){for(var c=b[0],d=b[b.length-1],e=[c];c!==d;){c=c.nextSibling;if(!c)return;e.push(c)}Array.prototype.splice.apply(b,[0,b.length].concat(e))}return b}function S(b,a,d,e,f){var g=Math.min,h=Math.max,k=[],
l,n=b.length,p,u=a.length,v=u-n||1,z=n+u+1,J,B,A;for(l=0;l<=n;l++){B=J;k.push(J=[]);A=g(u,l+v);for(p=h(0,l-1);p<=A;p++)J[p]=p?l?b[l-1]===a[p-1]?B[p-1]:g(B[p]||z,J[p-1]||z)+1:p+1:l+1}g=[];h=[];v=[];l=n;for(p=u;l||p;)u=k[l][p]-1,p&&u===k[l][p-1]?h.push(g[g.length]={status:d,value:a[--p],index:p}):l&&u===k[l-1][p]?v.push(g[g.length]={status:e,value:b[--l],index:l}):(g.push({status:"retained",value:a[--p]}),--l);if(h.length&&v.length){b=10*n;var s;for(a=d=0;(f||a<b)&&(s=h[d]);d++){for(e=0;k=v[e];e++)if(s.value===
k.value){s.moved=k.index;k.moved=s.index;v.splice(e,1);a=e=0;break}a+=e}}return g.reverse()}function T(b,c,d,e,f){f=f||{};var g=b&&N(b),g=g&&g.ownerDocument,h=f.templateEngine||O;a.za.xb(d,h,g);d=h.renderTemplate(d,e,f,g);("number"!=typeof d.length||0<d.length&&"number"!=typeof d[0].nodeType)&&j(Error("Template engine must return an array of DOM nodes"));g=r;switch(c){case "replaceChildren":a.e.N(b,d);g=m;break;case "replaceNode":a.a.Za(b,d);g=m;break;case "ignoreTargetNode":break;default:j(Error("Unknown renderMode: "+
c))}g&&(U(d,e),f.afterRender&&a.r.K(f.afterRender,q,[d,e.$data]));return d}function N(a){return a.nodeType?a:0<a.length?a[0]:q}function U(b,c){if(b.length){var d=b[0],e=b[b.length-1];V(d,e,function(b){a.Da(c,b)});V(d,e,function(b){a.s.jb(b,[c])})}}function V(b,c,d){var e;for(c=a.e.nextSibling(c);b&&(e=b)!==c;)b=a.e.nextSibling(e),(1===e.nodeType||8===e.nodeType)&&d(e)}function W(b,c,d){b=a.g.ba(b);for(var e=a.g.Q,f=0;f<b.length;f++){var g=b[f].key;if(e.hasOwnProperty(g)){var h=e[g];"function"===typeof h?
(g=h(b[f].value))&&j(Error(g)):h||j(Error("This template engine does not support the '"+g+"' binding within its templates"))}}b="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+a.g.ca(b)+" } })()})";return d.createJavaScriptEvaluatorBlock(b)+c}function X(b,c,d,e){function f(a){return function(){return k[a]}}function g(){return k}var h=0,k,l,n=a.a.f.get(b,Y);c||(n&&j(Error("You cannot apply bindings multiple times to the same element.")),a.a.f.set(b,Y,m));a.j(function(){var p=
d&&d instanceof a.z?d:new a.z(a.a.d(d)),u=p.$data;!n&&e&&a.fb(b,p);if(k=("function"==typeof c?c(p,b):c)||a.J.instance.getBindings(b,p)){if(0===h){h=1;for(var v in k){var z=a.c[v];z&&8===b.nodeType&&!a.e.I[v]&&j(Error("The binding '"+v+"' cannot be used with virtual elements"));if(z&&"function"==typeof z.init&&(z=(0,z.init)(b,f(v),g,u,p))&&z.controlsDescendantBindings)l!==I&&j(Error("Multiple bindings ("+l+" and "+v+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.")),
l=v}h=2}if(2===h)for(v in k)(z=a.c[v])&&"function"==typeof z.update&&(0,z.update)(b,f(v),g,u,p)}},q,{Y:b});return{Pb:l===I}}function Z(b,c,d){var e=m,f=1===c.nodeType;f&&a.e.Ua(c);if(f&&d||a.J.instance.nodeHasBindings(c))e=X(c,q,b,d).Pb;e&&$(b,c,!f)}function $(b,c,d){for(var e=a.e.firstChild(c);c=e;)e=a.e.nextSibling(c),Z(b,c,d)}function aa(a,c){var d=ba(a,c);return d?0<d.length?d[d.length-1].nextSibling:a.nextSibling:q}function ba(a,c){for(var d=a,e=1,f=[];d=d.nextSibling;){if(H(d)&&(e--,0===e))return f;
f.push(d);C(d)&&e++}c||j(Error("Cannot find closing comment tag to match: "+a.nodeValue));return q}function H(a){return 8==a.nodeType&&(K?a.text:a.nodeValue).match(ja)}function C(a){return 8==a.nodeType&&(K?a.text:a.nodeValue).match(ka)}function P(a,c){for(var d=q;a!=d;)d=a,a=a.replace(la,function(a,b){return c[b]});return a}function ma(){var b=[],c=[];this.save=function(d,e){var f=a.a.i(b,d);0<=f?c[f]=e:(b.push(d),c.push(e))};this.get=function(d){d=a.a.i(b,d);return 0<=d?c[d]:I}}function ca(a,c,
d){function e(e){var g=c(a[e]);switch(typeof g){case "boolean":case "number":case "string":case "function":f[e]=g;break;case "object":case "undefined":var h=d.get(g);f[e]=h!==I?h:ca(g,c,d)}}d=d||new ma;a=c(a);if(!("object"==typeof a&&a!==q&&a!==I&&!(a instanceof Date)))return a;var f=a instanceof Array?[]:{};d.save(a,f);var g=a;if(g instanceof Array){for(var h=0;h<g.length;h++)e(h);"function"==typeof g.toJSON&&e("toJSON")}else for(h in g)e(h);return f}function da(b,c){if(b)if(8==b.nodeType){var d=
a.s.Va(b.nodeValue);d!=q&&c.push({ub:b,Hb:d})}else if(1==b.nodeType)for(var d=0,e=b.childNodes,f=e.length;d<f;d++)da(e[d],c)}function Q(b,c,d,e){a.c[b]={init:function(b){a.a.f.set(b,ea,{});return{controlsDescendantBindings:m}},update:function(b,g,h,k,l){h=a.a.f.get(b,ea);g=a.a.d(g());k=!d!==!g;var n=!h.$a;if(n||c||k!==h.sb)n&&(h.$a=a.a.Ja(a.e.childNodes(b),m)),k?(n||a.e.N(b,a.a.Ja(h.$a)),a.Ea(e?e(l,g):l,b)):a.e.$(b),h.sb=k}};a.g.Q[b]=r;a.e.I[b]=m}function fa(b,c,d){d&&c!==a.k.q(b)&&a.k.U(b,c);c!==
a.k.q(b)&&a.r.K(a.a.Ba,q,[b,"change"])}var a="undefined"!==typeof w?w:{};a.b=function(b,c){for(var d=b.split("."),e=a,f=0;f<d.length-1;f++)e=e[d[f]];e[d[d.length-1]]=c};a.p=function(a,c,d){a[c]=d};a.version="2.2.0";a.b("version",a.version);a.a=new function(){function b(b,c){if("input"!==a.a.u(b)||!b.type||"click"!=c.toLowerCase())return r;var d=b.type;return"checkbox"==d||"radio"==d}var c=/^(\s|\u00A0)+|(\s|\u00A0)+$/g,d={},e={};d[/Firefox\/2/i.test(ha.userAgent)?"KeyboardEvent":"UIEvents"]=
["keyup","keydown","keypress"];d.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" ");for(var f in d){var g=d[f];if(g.length)for(var h=0,k=g.length;h<k;h++)e[g[h]]=f}var l={propertychange:m},n,d=3;f=y.createElement("div");for(g=f.getElementsByTagName("i");f.innerHTML="\x3c!--[if gt IE "+ ++d+"]><i></i><![endif]--\x3e",g[0];);n=4<d?d:I;return{Oa:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],o:function(a,b){for(var c=0,d=a.length;c<
d;c++)b(a[c])},i:function(a,b){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(a,b);for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},Ga:function(a,b,c){for(var d=0,e=a.length;d<e;d++)if(b.call(c,a[d]))return a[d];return q},ga:function(b,c){var d=a.a.i(b,c);0<=d&&b.splice(d,1)},Ha:function(b){b=b||[];for(var c=[],d=0,e=b.length;d<e;d++)0>a.a.i(c,b[d])&&c.push(b[d]);return c},X:function(a,b){a=a||[];for(var c=[],d=0,e=a.length;d<e;d++)c.push(b(a[d]));return c},
fa:function(a,b){a=a||[];for(var c=[],d=0,e=a.length;d<e;d++)b(a[d])&&c.push(a[d]);return c},P:function(a,b){if(b instanceof Array)a.push.apply(a,b);else for(var c=0,d=b.length;c<d;c++)a.push(b[c]);return a},lb:function(a,b,c){var d=a.indexOf?a.indexOf(b):utils.i(a,b);0>d?c&&a.push(b):c||a.splice(d,1)},extend:function(a,b){if(b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},ka:function(b){for(;b.firstChild;)a.removeNode(b.firstChild)},Jb:function(b){b=a.a.L(b);for(var c=y.createElement("div"),
d=0,e=b.length;d<e;d++)c.appendChild(a.A(b[d]));return c},Ja:function(b,c){for(var d=0,e=b.length,g=[];d<e;d++){var f=b[d].cloneNode(m);g.push(c?a.A(f):f)}return g},N:function(b,c){a.a.ka(b);if(c)for(var d=0,e=c.length;d<e;d++)b.appendChild(c[d])},Za:function(b,c){var d=b.nodeType?[b]:b;if(0<d.length){for(var e=d[0],g=e.parentNode,f=0,h=c.length;f<h;f++)g.insertBefore(c[f],e);f=0;for(h=d.length;f<h;f++)a.removeNode(d[f])}},cb:function(a,b){7>n?a.setAttribute("selected",b):a.selected=b},D:function(a){return(a||
"").replace(c,"")},Tb:function(b,c){for(var d=[],e=(b||"").split(c),f=0,g=e.length;f<g;f++){var h=a.a.D(e[f]);""!==h&&d.push(h)}return d},Qb:function(a,b){a=a||"";return b.length>a.length?r:a.substring(0,b.length)===b},vb:function(a,b){if(b.compareDocumentPosition)return 16==(b.compareDocumentPosition(a)&16);for(;a!=q;){if(a==b)return m;a=a.parentNode}return r},Z:function(b){return a.a.vb(b,b.ownerDocument)},mb:function(b){return!!a.a.Ga(b,a.a.Z)},u:function(a){return a&&a.tagName&&a.tagName.toLowerCase()},
n:function(a,c,d){var e=n&&l[c];if(!e&&"undefined"!=typeof G){if(b(a,c)){var f=d;d=function(a,b){var c=this.checked;b&&(this.checked=b.pb!==m);f.call(this,a);this.checked=c}}G(a).bind(c,d)}else!e&&"function"==typeof a.addEventListener?a.addEventListener(c,d,r):"undefined"!=typeof a.attachEvent?a.attachEvent("on"+c,function(b){d.call(a,b)}):j(Error("Browser doesn't support addEventListener or attachEvent"))},Ba:function(a,c){(!a||!a.nodeType)&&j(Error("element must be a DOM node when calling triggerEvent"));
if("undefined"!=typeof G){var d=[];b(a,c)&&d.push({pb:a.checked});G(a).trigger(c,d)}else"function"==typeof y.createEvent?"function"==typeof a.dispatchEvent?(d=y.createEvent(e[c]||"HTMLEvents"),d.initEvent(c,m,m,x,0,0,0,0,0,r,r,r,r,0,a),a.dispatchEvent(d)):j(Error("The supplied element doesn't support dispatchEvent")):"undefined"!=typeof a.fireEvent?(b(a,c)&&(a.checked=a.checked!==m),a.fireEvent("on"+c)):j(Error("Browser doesn't support triggering events"))},d:function(b){return a.R(b)?b():b},ua:function(b){return a.R(b)?
b.t():b},ea:function(b,c,d){if(c){var e=/\S+/g,f=b.className.match(e)||[];a.a.o(c.match(e),function(b){a.a.lb(f,b,d)});b.className=f.join(" ")}},eb:function(b,c){var d=a.a.d(c);if(d===q||d===I)d="";if(3===b.nodeType)b.data=d;else{var e=a.e.firstChild(b);!e||3!=e.nodeType||a.e.nextSibling(e)?a.e.N(b,[y.createTextNode(d)]):e.data=d;a.a.yb(b)}},bb:function(a,b){a.name=b;if(7>=n)try{a.mergeAttributes(y.createElement("<input name='"+a.name+"'/>"),r)}catch(c){}},yb:function(a){9<=n&&(a=1==a.nodeType?a:
a.parentNode,a.style&&(a.style.zoom=a.style.zoom))},wb:function(a){if(9<=n){var b=a.style.width;a.style.width=0;a.style.width=b}},Nb:function(b,c){b=a.a.d(b);c=a.a.d(c);for(var d=[],e=b;e<=c;e++)d.push(e);return d},L:function(a){for(var b=[],c=0,d=a.length;c<d;c++)b.push(a[c]);return b},Rb:6===n,Sb:7===n,aa:n,Pa:function(b,c){for(var d=a.a.L(b.getElementsByTagName("input")).concat(a.a.L(b.getElementsByTagName("textarea"))),e="string"==typeof c?function(a){return a.name===c}:function(a){return c.test(a.name)},
f=[],g=d.length-1;0<=g;g--)e(d[g])&&f.push(d[g]);return f},Kb:function(b){return"string"==typeof b&&(b=a.a.D(b))?x.JSON&&x.JSON.parse?x.JSON.parse(b):(new Function("return "+b))():q},xa:function(b,c,d){("undefined"==typeof JSON||"undefined"==typeof JSON.stringify)&&j(Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js"));return JSON.stringify(a.a.d(b),
c,d)},Lb:function(b,c,d){d=d||{};var e=d.params||{},f=d.includeFields||this.Oa,g=b;if("object"==typeof b&&"form"===a.a.u(b))for(var g=b.action,h=f.length-1;0<=h;h--)for(var k=a.a.Pa(b,f[h]),l=k.length-1;0<=l;l--)e[k[l].name]=k[l].value;c=a.a.d(c);var n=y.createElement("form");n.style.display="none";n.action=g;n.method="post";for(var w in c)b=y.createElement("input"),b.name=w,b.value=a.a.xa(a.a.d(c[w])),n.appendChild(b);for(w in e)b=y.createElement("input"),b.name=w,b.value=e[w],n.appendChild(b);y.body.appendChild(n);
d.submitter?d.submitter(n):n.submit();setTimeout(function(){n.parentNode.removeChild(n)},0)}}};a.b("utils",a.a);a.b("utils.arrayForEach",a.a.o);a.b("utils.arrayFirst",a.a.Ga);a.b("utils.arrayFilter",a.a.fa);a.b("utils.arrayGetDistinctValues",a.a.Ha);a.b("utils.arrayIndexOf",a.a.i);a.b("utils.arrayMap",a.a.X);a.b("utils.arrayPushAll",a.a.P);a.b("utils.arrayRemoveItem",a.a.ga);a.b("utils.extend",a.a.extend);a.b("utils.fieldsIncludedWithJsonPost",a.a.Oa);a.b("utils.getFormFields",a.a.Pa);a.b("utils.peekObservable",
a.a.ua);a.b("utils.postJson",a.a.Lb);a.b("utils.parseJson",a.a.Kb);a.b("utils.registerEventHandler",a.a.n);a.b("utils.stringifyJson",a.a.xa);a.b("utils.range",a.a.Nb);a.b("utils.toggleDomNodeCssClass",a.a.ea);a.b("utils.triggerEvent",a.a.Ba);a.b("utils.unwrapObservable",a.a.d);Function.prototype.bind||(Function.prototype.bind=function(a){var c=this,d=Array.prototype.slice.call(arguments);a=d.shift();return function(){return c.apply(a,d.concat(Array.prototype.slice.call(arguments)))}});a.a.f=new function(){var b=
0,c="__ko__"+(new Date).getTime(),d={};return{get:function(b,c){var d=a.a.f.la(b,r);return d===I?I:d[c]},set:function(b,c,d){d===I&&a.a.f.la(b,r)===I||(a.a.f.la(b,m)[c]=d)},la:function(a,f){var g=a[c];if(!g||!("null"!==g&&d[g])){if(!f)return I;g=a[c]="ko"+b++;d[g]={}}return d[g]},clear:function(a){var b=a[c];return b?(delete d[b],a[c]=q,m):r}}};a.b("utils.domData",a.a.f);a.b("utils.domData.clear",a.a.f.clear);a.a.F=new function(){function b(b,c){var e=a.a.f.get(b,d);e===I&&c&&(e=[],a.a.f.set(b,d,
e));return e}function c(d){var e=b(d,r);if(e)for(var e=e.slice(0),k=0;k<e.length;k++)e[k](d);a.a.f.clear(d);"function"==typeof G&&"function"==typeof G.cleanData&&G.cleanData([d]);if(f[d.nodeType])for(e=d.firstChild;d=e;)e=d.nextSibling,8===d.nodeType&&c(d)}var d="__ko_domNodeDisposal__"+(new Date).getTime(),e={1:m,8:m,9:m},f={1:m,9:m};return{Ca:function(a,c){"function"!=typeof c&&j(Error("Callback must be a function"));b(a,m).push(c)},Ya:function(c,e){var f=b(c,r);f&&(a.a.ga(f,e),0==f.length&&a.a.f.set(c,
d,I))},A:function(b){if(e[b.nodeType]&&(c(b),f[b.nodeType])){var d=[];a.a.P(d,b.getElementsByTagName("*"));for(var k=0,l=d.length;k<l;k++)c(d[k])}return b},removeNode:function(b){a.A(b);b.parentNode&&b.parentNode.removeChild(b)}}};a.A=a.a.F.A;a.removeNode=a.a.F.removeNode;a.b("cleanNode",a.A);a.b("removeNode",a.removeNode);a.b("utils.domNodeDisposal",a.a.F);a.b("utils.domNodeDisposal.addDisposeCallback",a.a.F.Ca);a.b("utils.domNodeDisposal.removeDisposeCallback",a.a.F.Ya);a.a.ta=function(b){var c;
if("undefined"!=typeof G)if(G.parseHTML)c=G.parseHTML(b)||[];else{if((c=G.clean([b]))&&c[0]){for(b=c[0];b.parentNode&&11!==b.parentNode.nodeType;)b=b.parentNode;b.parentNode&&b.parentNode.removeChild(b)}}else{var d=a.a.D(b).toLowerCase();c=y.createElement("div");d=d.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!d.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!d.indexOf("<td")||!d.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""];b="ignored<div>"+
d[1]+b+d[2]+"</div>";for("function"==typeof x.innerShiv?c.appendChild(x.innerShiv(b)):c.innerHTML=b;d[0]--;)c=c.lastChild;c=a.a.L(c.lastChild.childNodes)}return c};a.a.da=function(b,c){a.a.ka(b);c=a.a.d(c);if(c!==q&&c!==I)if("string"!=typeof c&&(c=c.toString()),"undefined"!=typeof G)G(b).html(c);else for(var d=a.a.ta(c),e=0;e<d.length;e++)b.appendChild(d[e])};a.b("utils.parseHtmlFragment",a.a.ta);a.b("utils.setHtml",a.a.da);var R={};a.s={ra:function(a){"function"!=typeof a&&j(Error("You can only pass a function to ko.memoization.memoize()"));
var c=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);R[c]=a;return"\x3c!--[ko_memo:"+c+"]--\x3e"},ib:function(a,c){var d=R[a];d===I&&j(Error("Couldn't find any memo with ID "+a+". Perhaps it's already been unmemoized."));try{return d.apply(q,c||[]),m}finally{delete R[a]}},jb:function(b,c){var d=[];da(b,d);for(var e=0,f=d.length;e<f;e++){var g=d[e].ub,h=[g];c&&a.a.P(h,c);a.s.ib(d[e].Hb,h);g.nodeValue="";g.parentNode&&g.parentNode.removeChild(g)}},
Va:function(a){return(a=a.match(/^\[ko_memo\:(.*?)\]$/))?a[1]:q}};a.b("memoization",a.s);a.b("memoization.memoize",a.s.ra);a.b("memoization.unmemoize",a.s.ib);a.b("memoization.parseMemoText",a.s.Va);a.b("memoization.unmemoizeDomNodeAndDescendants",a.s.jb);a.Na={throttle:function(b,c){b.throttleEvaluation=c;var d=q;return a.j({read:b,write:function(a){clearTimeout(d);d=setTimeout(function(){b(a)},c)}})},notify:function(b,c){b.equalityComparer="always"==c?t(r):a.m.fn.equalityComparer;return b}};a.b("extenders",
a.Na);a.gb=function(b,c,d){this.target=b;this.ha=c;this.tb=d;a.p(this,"dispose",this.B)};a.gb.prototype.B=function(){this.Eb=m;this.tb()};a.T=function(){this.w={};a.a.extend(this,a.T.fn);a.p(this,"subscribe",this.ya);a.p(this,"extend",this.extend);a.p(this,"getSubscriptionsCount",this.Ab)};a.T.fn={ya:function(b,c,d){d=d||"change";var e=new a.gb(this,c?b.bind(c):b,function(){a.a.ga(this.w[d],e)}.bind(this));this.w[d]||(this.w[d]=[]);this.w[d].push(e);return e},notifySubscribers:function(b,c){c=c||
"change";this.w[c]&&a.r.K(function(){a.a.o(this.w[c].slice(0),function(a){a&&a.Eb!==m&&a.ha(b)})},this)},Ab:function(){var a=0,c;for(c in this.w)this.w.hasOwnProperty(c)&&(a+=this.w[c].length);return a},extend:function(b){var c=this;if(b)for(var d in b){var e=a.Na[d];"function"==typeof e&&(c=e(c,b[d]))}return c}};a.Ra=function(a){return"function"==typeof a.ya&&"function"==typeof a.notifySubscribers};a.b("subscribable",a.T);a.b("isSubscribable",a.Ra);var D=[];a.r={ob:function(a){D.push({ha:a,Ma:[]})},
end:function(){D.pop()},Xa:function(b){a.Ra(b)||j(Error("Only subscribable things can act as dependencies"));if(0<D.length){var c=D[D.length-1];c&&!(0<=a.a.i(c.Ma,b))&&(c.Ma.push(b),c.ha(b))}},K:function(a,c,d){try{return D.push(q),a.apply(c,d||[])}finally{D.pop()}}};var na={undefined:m,"boolean":m,number:m,string:m};a.m=function(b){function c(){if(0<arguments.length){if(!c.equalityComparer||!c.equalityComparer(d,arguments[0]))c.H(),d=arguments[0],c.G();return this}a.r.Xa(c);return d}var d=b;a.T.call(c);
c.t=function(){return d};c.G=function(){c.notifySubscribers(d)};c.H=function(){c.notifySubscribers(d,"beforeChange")};a.a.extend(c,a.m.fn);a.p(c,"peek",c.t);a.p(c,"valueHasMutated",c.G);a.p(c,"valueWillMutate",c.H);return c};a.m.fn={equalityComparer:function(a,c){return a===q||typeof a in na?a===c:r}};var F=a.m.Mb="__ko_proto__";a.m.fn[F]=a.m;a.ma=function(b,c){return b===q||b===I||b[F]===I?r:b[F]===c?m:a.ma(b[F],c)};a.R=function(b){return a.ma(b,a.m)};a.Sa=function(b){return"function"==typeof b&&
b[F]===a.m||"function"==typeof b&&b[F]===a.j&&b.Bb?m:r};a.b("observable",a.m);a.b("isObservable",a.R);a.b("isWriteableObservable",a.Sa);a.S=function(b){0==arguments.length&&(b=[]);b!==q&&(b!==I&&!("length"in b))&&j(Error("The argument passed when initializing an observable array must be an array, or null, or undefined."));var c=a.m(b);a.a.extend(c,a.S.fn);return c};a.S.fn={remove:function(a){for(var c=this.t(),d=[],e="function"==typeof a?a:function(c){return c===a},f=0;f<c.length;f++){var g=c[f];
e(g)&&(0===d.length&&this.H(),d.push(g),c.splice(f,1),f--)}d.length&&this.G();return d},removeAll:function(b){if(b===I){var c=this.t(),d=c.slice(0);this.H();c.splice(0,c.length);this.G();return d}return!b?[]:this.remove(function(c){return 0<=a.a.i(b,c)})},destroy:function(a){var c=this.t(),d="function"==typeof a?a:function(c){return c===a};this.H();for(var e=c.length-1;0<=e;e--)d(c[e])&&(c[e]._destroy=m);this.G()},destroyAll:function(b){return b===I?this.destroy(t(m)):!b?[]:this.destroy(function(c){return 0<=
a.a.i(b,c)})},indexOf:function(b){var c=this();return a.a.i(c,b)},replace:function(a,c){var d=this.indexOf(a);0<=d&&(this.H(),this.t()[d]=c,this.G())}};a.a.o("pop push reverse shift sort splice unshift".split(" "),function(b){a.S.fn[b]=function(){var a=this.t();this.H();a=a[b].apply(a,arguments);this.G();return a}});a.a.o(["slice"],function(b){a.S.fn[b]=function(){var a=this();return a[b].apply(a,arguments)}});a.b("observableArray",a.S);a.j=function(b,c,d){function e(){a.a.o(A,function(a){a.B()});
A=[]}function f(){var a=h.throttleEvaluation;a&&0<=a?(clearTimeout(s),s=setTimeout(g,a)):g()}function g(){if(!p)if(n&&w())B();else{p=m;try{var b=a.a.X(A,function(a){return a.target});a.r.ob(function(c){var d;0<=(d=a.a.i(b,c))?b[d]=I:A.push(c.ya(f))});for(var d=u.call(c),e=b.length-1;0<=e;e--)b[e]&&A.splice(e,1)[0].B();n=m;h.notifySubscribers(l,"beforeChange");l=d}finally{a.r.end()}h.notifySubscribers(l);p=r;A.length||B()}}function h(){if(0<arguments.length)return"function"===typeof v?v.apply(c,arguments):
j(Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.")),this;n||g();a.r.Xa(h);return l}function k(){return!n||0<A.length}var l,n=r,p=r,u=b;u&&"object"==typeof u?(d=u,u=d.read):(d=d||{},u||(u=d.read));"function"!=typeof u&&j(Error("Pass a function that returns the value of the ko.computed"));var v=d.write,z=d.disposeWhenNodeIsRemoved||d.Y||q,w=d.disposeWhen||d.La||t(r),B=e,A=[],s=q;c||(c=d.owner);h.t=function(){n||
g();return l};h.zb=function(){return A.length};h.Bb="function"===typeof d.write;h.B=function(){B()};h.pa=k;a.T.call(h);a.a.extend(h,a.j.fn);a.p(h,"peek",h.t);a.p(h,"dispose",h.B);a.p(h,"isActive",h.pa);a.p(h,"getDependenciesCount",h.zb);d.deferEvaluation!==m&&g();if(z&&k()){B=function(){a.a.F.Ya(z,arguments.callee);e()};a.a.F.Ca(z,B);var E=w,w=function(){return!a.a.Z(z)||E()}}return h};a.Db=function(b){return a.ma(b,a.j)};w=a.m.Mb;a.j[w]=a.m;a.j.fn={};a.j.fn[w]=a.j;a.b("dependentObservable",a.j);
a.b("computed",a.j);a.b("isComputed",a.Db);a.hb=function(b){0==arguments.length&&j(Error("When calling ko.toJS, pass the object you want to convert."));return ca(b,function(b){for(var d=0;a.R(b)&&10>d;d++)b=b();return b})};a.toJSON=function(b,c,d){b=a.hb(b);return a.a.xa(b,c,d)};a.b("toJS",a.hb);a.b("toJSON",a.toJSON);a.k={q:function(b){switch(a.a.u(b)){case "option":return b.__ko__hasDomDataOptionValue__===m?a.a.f.get(b,a.c.options.sa):7>=a.a.aa?b.getAttributeNode("value").specified?b.value:b.text:
b.value;case "select":return 0<=b.selectedIndex?a.k.q(b.options[b.selectedIndex]):I;default:return b.value}},U:function(b,c){switch(a.a.u(b)){case "option":switch(typeof c){case "string":a.a.f.set(b,a.c.options.sa,I);"__ko__hasDomDataOptionValue__"in b&&delete b.__ko__hasDomDataOptionValue__;b.value=c;break;default:a.a.f.set(b,a.c.options.sa,c),b.__ko__hasDomDataOptionValue__=m,b.value="number"===typeof c?c:""}break;case "select":for(var d=b.options.length-1;0<=d;d--)if(a.k.q(b.options[d])==c){b.selectedIndex=
d;break}break;default:if(c===q||c===I)c="";b.value=c}}};a.b("selectExtensions",a.k);a.b("selectExtensions.readValue",a.k.q);a.b("selectExtensions.writeValue",a.k.U);var la=/\@ko_token_(\d+)\@/g,oa=["true","false"],pa=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i;a.g={Q:[],ba:function(b){var c=a.a.D(b);if(3>c.length)return[];"{"===c.charAt(0)&&(c=c.substring(1,c.length-1));b=[];for(var d=q,e,f=0;f<c.length;f++){var g=c.charAt(f);if(d===q)switch(g){case '"':case "'":case "/":d=f,e=g}else if(g==
e&&"\\"!==c.charAt(f-1)){g=c.substring(d,f+1);b.push(g);var h="@ko_token_"+(b.length-1)+"@",c=c.substring(0,d)+h+c.substring(f+1),f=f-(g.length-h.length),d=q}}e=d=q;for(var k=0,l=q,f=0;f<c.length;f++){g=c.charAt(f);if(d===q)switch(g){case "{":d=f;l=g;e="}";break;case "(":d=f;l=g;e=")";break;case "[":d=f,l=g,e="]"}g===l?k++:g===e&&(k--,0===k&&(g=c.substring(d,f+1),b.push(g),h="@ko_token_"+(b.length-1)+"@",c=c.substring(0,d)+h+c.substring(f+1),f-=g.length-h.length,d=q))}e=[];c=c.split(",");d=0;for(f=
c.length;d<f;d++)k=c[d],l=k.indexOf(":"),0<l&&l<k.length-1?(g=k.substring(l+1),e.push({key:P(k.substring(0,l),b),value:P(g,b)})):e.push({unknown:P(k,b)});return e},ca:function(b){var c="string"===typeof b?a.g.ba(b):b,d=[];b=[];for(var e,f=0;e=c[f];f++)if(0<d.length&&d.push(","),e.key){var g;a:{g=e.key;var h=a.a.D(g);switch(h.length&&h.charAt(0)){case "'":case '"':break a;default:g="'"+h+"'"}}e=e.value;d.push(g);d.push(":");d.push(e);e=a.a.D(e);0<=a.a.i(oa,a.a.D(e).toLowerCase())?e=r:(h=e.match(pa),
e=h===q?r:h[1]?"Object("+h[1]+")"+h[2]:e);e&&(0<b.length&&b.push(", "),b.push(g+" : function(__ko_value) { "+e+" = __ko_value; }"))}else e.unknown&&d.push(e.unknown);c=d.join("");0<b.length&&(c=c+", '_ko_property_writers' : { "+b.join("")+" } ");return c},Gb:function(b,c){for(var d=0;d<b.length;d++)if(a.a.D(b[d].key)==c)return m;return r},V:function(b,c,d,e,f){if(!b||!a.R(b)){if((b=c()._ko_property_writers)&&b[d])b[d](e)}else a.Sa(b)&&(!f||b.t()!==e)&&b(e)}};a.b("expressionRewriting",a.g);a.b("expressionRewriting.bindingRewriteValidators",
a.g.Q);a.b("expressionRewriting.parseObjectLiteral",a.g.ba);a.b("expressionRewriting.preProcessBindings",a.g.ca);a.b("expressionRewriting.writeValueToProperty",a.g.V);a.b("jsonExpressionRewriting",a.g);a.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",a.g.ca);var K="\x3c!--test--\x3e"===y.createComment("test").text,ka=K?/^\x3c!--\s*ko(?:\s+(.+\s*\:[\s\S]*))?\s*--\x3e$/:/^\s*ko(?:\s+(.+\s*\:[\s\S]*))?\s*$/,ja=K?/^\x3c!--\s*\/ko\s*--\x3e$/:/^\s*\/ko\s*$/,qa={ul:m,ol:m};a.e={I:{},childNodes:function(a){return C(a)?
ba(a):a.childNodes},$:function(b){if(C(b)){b=a.e.childNodes(b);for(var c=0,d=b.length;c<d;c++)a.removeNode(b[c])}else a.a.ka(b)},N:function(b,c){if(C(b)){a.e.$(b);for(var d=b.nextSibling,e=0,f=c.length;e<f;e++)d.parentNode.insertBefore(c[e],d)}else a.a.N(b,c)},Wa:function(a,c){C(a)?a.parentNode.insertBefore(c,a.nextSibling):a.firstChild?a.insertBefore(c,a.firstChild):a.appendChild(c)},Qa:function(b,c,d){d?C(b)?b.parentNode.insertBefore(c,d.nextSibling):d.nextSibling?b.insertBefore(c,d.nextSibling):
b.appendChild(c):a.e.Wa(b,c)},firstChild:function(a){return!C(a)?a.firstChild:!a.nextSibling||H(a.nextSibling)?q:a.nextSibling},nextSibling:function(a){C(a)&&(a=aa(a));return a.nextSibling&&H(a.nextSibling)?q:a.nextSibling},kb:function(a){return(a=C(a))?a[1]:q},Ua:function(b){if(qa[a.a.u(b)]){var c=b.firstChild;if(c){do if(1===c.nodeType){var d;d=c.firstChild;var e=q;if(d){do if(e)e.push(d);else if(C(d)){var f=aa(d,m);f?d=f:e=[d]}else H(d)&&(e=[d]);while(d=d.nextSibling)}if(d=e){e=c.nextSibling;for(f=
0;f<d.length;f++)e?b.insertBefore(d[f],e):b.appendChild(d[f])}}while(c=c.nextSibling)}}}};a.b("virtualElements",a.e);a.b("virtualElements.allowedBindings",a.e.I);a.b("virtualElements.emptyNode",a.e.$);a.b("virtualElements.insertAfter",a.e.Qa);a.b("virtualElements.prepend",a.e.Wa);a.b("virtualElements.setDomNodeChildren",a.e.N);a.J=function(){this.Ia={}};a.a.extend(a.J.prototype,{nodeHasBindings:function(b){switch(b.nodeType){case 1:return b.getAttribute("data-bind")!=q;case 8:return a.e.kb(b)!=q;
default:return r}},getBindings:function(a,c){var d=this.getBindingsString(a,c);return d?this.parseBindingsString(d,c,a):q},getBindingsString:function(b){switch(b.nodeType){case 1:return b.getAttribute("data-bind");case 8:return a.e.kb(b);default:return q}},parseBindingsString:function(b,c,d){try{var e;if(!(e=this.Ia[b])){var f=this.Ia,g,h="with($context){with($data||{}){return{"+a.g.ca(b)+"}}}";g=new Function("$context","$element",h);e=f[b]=g}return e(c,d)}catch(k){j(Error("Unable to parse bindings.\nMessage: "+
k+";\nBindings value: "+b))}}});a.J.instance=new a.J;a.b("bindingProvider",a.J);a.c={};a.z=function(b,c,d){c?(a.a.extend(this,c),this.$parentContext=c,this.$parent=c.$data,this.$parents=(c.$parents||[]).slice(0),this.$parents.unshift(this.$parent)):(this.$parents=[],this.$root=b,this.ko=a);this.$data=b;d&&(this[d]=b)};a.z.prototype.createChildContext=function(b,c){return new a.z(b,this,c)};a.z.prototype.extend=function(b){var c=a.a.extend(new a.z,this);return a.a.extend(c,b)};var Y="__ko_boundElement";
a.fb=function(b,c){if(2==arguments.length)a.a.f.set(b,"__ko_bindingContext__",c);else return a.a.f.get(b,"__ko_bindingContext__")};a.Fa=function(b,c,d){1===b.nodeType&&a.e.Ua(b);return X(b,c,d,m)};a.Ea=function(a,c){(1===c.nodeType||8===c.nodeType)&&$(a,c,m)};a.Da=function(a,c){c&&(1!==c.nodeType&&8!==c.nodeType)&&j(Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node"));c=c||x.document.body;Z(a,c,m)};a.ja=function(b){switch(b.nodeType){case 1:case 8:var c=
a.fb(b);if(c)return c;if(b.parentNode)return a.ja(b.parentNode)}return I};a.rb=function(b){return(b=a.ja(b))?b.$data:I};a.b("bindingHandlers",a.c);a.b("applyBindings",a.Da);a.b("applyBindingsToDescendants",a.Ea);a.b("applyBindingsToNode",a.Fa);a.b("contextFor",a.ja);a.b("dataFor",a.rb);var ga={"class":"className","for":"htmlFor"};a.c.attr={update:function(b,c){var d=a.a.d(c())||{},e;for(e in d)if("string"==typeof e){var f=a.a.d(d[e]),g=f===r||f===q||f===I;g&&b.removeAttribute(e);8>=a.a.aa&&e in ga?
(e=ga[e],g?b.removeAttribute(e):b[e]=f):g||b.setAttribute(e,f.toString());"name"===e&&a.a.bb(b,g?"":f.toString())}}};a.c.checked={init:function(b,c,d){a.a.n(b,"click",function(){var e;if("checkbox"==b.type)e=b.checked;else if("radio"==b.type&&b.checked)e=b.value;else return;var f=c(),g=a.a.d(f);"checkbox"==b.type&&g instanceof Array?(e=a.a.i(g,b.value),b.checked&&0>e?f.push(b.value):!b.checked&&0<=e&&f.splice(e,1)):a.g.V(f,d,"checked",e,m)});"radio"==b.type&&!b.name&&a.c.uniqueName.init(b,t(m))},
update:function(b,c){var d=a.a.d(c());"checkbox"==b.type?b.checked=d instanceof Array?0<=a.a.i(d,b.value):d:"radio"==b.type&&(b.checked=b.value==d)}};a.c.css={update:function(b,c){var d=a.a.d(c());if("object"==typeof d)for(var e in d){var f=a.a.d(d[e]);a.a.ea(b,e,f)}else d=String(d||""),a.a.ea(b,b.__ko__cssValue,r),b.__ko__cssValue=d,a.a.ea(b,d,m)}};a.c.enable={update:function(b,c){var d=a.a.d(c());d&&b.disabled?b.removeAttribute("disabled"):!d&&!b.disabled&&(b.disabled=m)}};a.c.disable={update:function(b,
c){a.c.enable.update(b,function(){return!a.a.d(c())})}};a.c.event={init:function(b,c,d,e){var f=c()||{},g;for(g in f)(function(){var f=g;"string"==typeof f&&a.a.n(b,f,function(b){var g,n=c()[f];if(n){var p=d();try{var u=a.a.L(arguments);u.unshift(e);g=n.apply(e,u)}finally{g!==m&&(b.preventDefault?b.preventDefault():b.returnValue=r)}p[f+"Bubble"]===r&&(b.cancelBubble=m,b.stopPropagation&&b.stopPropagation())}})})()}};a.c.foreach={Ta:function(b){return function(){var c=b(),d=a.a.ua(c);if(!d||"number"==
typeof d.length)return{foreach:c,templateEngine:a.C.oa};a.a.d(c);return{foreach:d.data,as:d.as,includeDestroyed:d.includeDestroyed,afterAdd:d.afterAdd,beforeRemove:d.beforeRemove,afterRender:d.afterRender,beforeMove:d.beforeMove,afterMove:d.afterMove,templateEngine:a.C.oa}}},init:function(b,c){return a.c.template.init(b,a.c.foreach.Ta(c))},update:function(b,c,d,e,f){return a.c.template.update(b,a.c.foreach.Ta(c),d,e,f)}};a.g.Q.foreach=r;a.e.I.foreach=m;a.c.hasfocus={init:function(b,c,d){function e(e){b.__ko_hasfocusUpdating=
m;var f=b.ownerDocument;"activeElement"in f&&(e=f.activeElement===b);f=c();a.g.V(f,d,"hasfocus",e,m);b.__ko_hasfocusLastValue=e;b.__ko_hasfocusUpdating=r}var f=e.bind(q,m),g=e.bind(q,r);a.a.n(b,"focus",f);a.a.n(b,"focusin",f);a.a.n(b,"blur",g);a.a.n(b,"focusout",g)},update:function(b,c){var d=!!a.a.d(c());!b.__ko_hasfocusUpdating&&b.__ko_hasfocusLastValue!==d&&(d?b.focus():b.blur(),a.r.K(a.a.Ba,q,[b,d?"focusin":"focusout"]))}};a.c.hasFocus=a.c.hasfocus;a.c.html={init:function(){return{controlsDescendantBindings:m}},
update:function(b,c){a.a.da(b,c())}};var ea="__ko_withIfBindingData";Q("if");Q("ifnot",r,m);Q("with",m,r,function(a,c){return a.createChildContext(c)});a.c.options={update:function(b,c,d){"select"!==a.a.u(b)&&j(Error("options binding applies only to SELECT elements"));for(var e=0==b.length,f=a.a.X(a.a.fa(b.childNodes,function(b){return b.tagName&&"option"===a.a.u(b)&&b.selected}),function(b){return a.k.q(b)||b.innerText||b.textContent}),g=b.scrollTop,h=a.a.d(c());0<b.length;)a.A(b.options[0]),b.remove(0);
if(h){d=d();var k=d.optionsIncludeDestroyed;"number"!=typeof h.length&&(h=[h]);if(d.optionsCaption){var l=y.createElement("option");a.a.da(l,d.optionsCaption);a.k.U(l,I);b.appendChild(l)}c=0;for(var n=h.length;c<n;c++){var p=h[c];if(!p||!p._destroy||k){var l=y.createElement("option"),u=function(a,b,c){var d=typeof b;return"function"==d?b(a):"string"==d?a[b]:c},v=u(p,d.optionsValue,p);a.k.U(l,a.a.d(v));p=u(p,d.optionsText,v);a.a.eb(l,p);b.appendChild(l)}}h=b.getElementsByTagName("option");c=k=0;for(n=
h.length;c<n;c++)0<=a.a.i(f,a.k.q(h[c]))&&(a.a.cb(h[c],m),k++);b.scrollTop=g;e&&"value"in d&&fa(b,a.a.ua(d.value),m);a.a.wb(b)}}};a.c.options.sa="__ko.optionValueDomData__";a.c.selectedOptions={init:function(b,c,d){a.a.n(b,"change",function(){var e=c(),f=[];a.a.o(b.getElementsByTagName("option"),function(b){b.selected&&f.push(a.k.q(b))});a.g.V(e,d,"selectedOptions",f)})},update:function(b,c){"select"!=a.a.u(b)&&j(Error("values binding applies only to SELECT elements"));var d=a.a.d(c());d&&"number"==
typeof d.length&&a.a.o(b.getElementsByTagName("option"),function(b){var c=0<=a.a.i(d,a.k.q(b));a.a.cb(b,c)})}};a.c.style={update:function(b,c){var d=a.a.d(c()||{}),e;for(e in d)if("string"==typeof e){var f=a.a.d(d[e]);b.style[e]=f||""}}};a.c.submit={init:function(b,c,d,e){"function"!=typeof c()&&j(Error("The value for a submit binding must be a function"));a.a.n(b,"submit",function(a){var d,h=c();try{d=h.call(e,b)}finally{d!==m&&(a.preventDefault?a.preventDefault():a.returnValue=r)}})}};a.c.text=
{update:function(b,c){a.a.eb(b,c())}};a.e.I.text=m;a.c.uniqueName={init:function(b,c){if(c()){var d="ko_unique_"+ ++a.c.uniqueName.qb;a.a.bb(b,d)}}};a.c.uniqueName.qb=0;a.c.value={init:function(b,c,d){function e(){h=r;var e=c(),f=a.k.q(b);a.g.V(e,d,"value",f)}var f=["change"],g=d().valueUpdate,h=r;g&&("string"==typeof g&&(g=[g]),a.a.P(f,g),f=a.a.Ha(f));if(a.a.aa&&("input"==b.tagName.toLowerCase()&&"text"==b.type&&"off"!=b.autocomplete&&(!b.form||"off"!=b.form.autocomplete))&&-1==a.a.i(f,"propertychange"))a.a.n(b,
"propertychange",function(){h=m}),a.a.n(b,"blur",function(){h&&e()});a.a.o(f,function(c){var d=e;a.a.Qb(c,"after")&&(d=function(){setTimeout(e,0)},c=c.substring(5));a.a.n(b,c,d)})},update:function(b,c){var d="select"===a.a.u(b),e=a.a.d(c()),f=a.k.q(b),g=e!=f;0===e&&(0!==f&&"0"!==f)&&(g=m);g&&(f=function(){a.k.U(b,e)},f(),d&&setTimeout(f,0));d&&0<b.length&&fa(b,e,r)}};a.c.visible={update:function(b,c){var d=a.a.d(c()),e="none"!=b.style.display;d&&!e?b.style.display="":!d&&e&&(b.style.display="none")}};
a.c.click={init:function(b,c,d,e){return a.c.event.init.call(this,b,function(){var a={};a.click=c();return a},d,e)}};a.v=function(){};a.v.prototype.renderTemplateSource=function(){j(Error("Override renderTemplateSource"))};a.v.prototype.createJavaScriptEvaluatorBlock=function(){j(Error("Override createJavaScriptEvaluatorBlock"))};a.v.prototype.makeTemplateSource=function(b,c){if("string"==typeof b){c=c||y;var d=c.getElementById(b);d||j(Error("Cannot find template with ID "+b));return new a.l.h(d)}if(1==
b.nodeType||8==b.nodeType)return new a.l.O(b);j(Error("Unknown template type: "+b))};a.v.prototype.renderTemplate=function(a,c,d,e){a=this.makeTemplateSource(a,e);return this.renderTemplateSource(a,c,d)};a.v.prototype.isTemplateRewritten=function(a,c){return this.allowTemplateRewriting===r?m:this.makeTemplateSource(a,c).data("isRewritten")};a.v.prototype.rewriteTemplate=function(a,c,d){a=this.makeTemplateSource(a,d);c=c(a.text());a.text(c);a.data("isRewritten",m)};a.b("templateEngine",a.v);var ra=
/(<[a-z]+\d*(\s+(?!data-bind=)[a-z0-9\-]+(=(\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind=(["'])([\s\S]*?)\5/gi,sa=/\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g;a.za={xb:function(b,c,d){c.isTemplateRewritten(b,d)||c.rewriteTemplate(b,function(b){return a.za.Ib(b,c)},d)},Ib:function(a,c){return a.replace(ra,function(a,b,f,g,h,k,l){return W(l,b,c)}).replace(sa,function(a,b){return W(b,"\x3c!-- ko --\x3e",c)})},nb:function(b){return a.s.ra(function(c,d){c.nextSibling&&a.Fa(c.nextSibling,b,d)})}};a.b("__tr_ambtns",
a.za.nb);a.l={};a.l.h=function(a){this.h=a};a.l.h.prototype.text=function(){var b=a.a.u(this.h),b="script"===b?"text":"textarea"===b?"value":"innerHTML";if(0==arguments.length)return this.h[b];var c=arguments[0];"innerHTML"===b?a.a.da(this.h,c):this.h[b]=c};a.l.h.prototype.data=function(b){if(1===arguments.length)return a.a.f.get(this.h,"templateSourceData_"+b);a.a.f.set(this.h,"templateSourceData_"+b,arguments[1])};a.l.O=function(a){this.h=a};a.l.O.prototype=new a.l.h;a.l.O.prototype.text=function(){if(0==
arguments.length){var b=a.a.f.get(this.h,"__ko_anon_template__")||{};b.Aa===I&&b.ia&&(b.Aa=b.ia.innerHTML);return b.Aa}a.a.f.set(this.h,"__ko_anon_template__",{Aa:arguments[0]})};a.l.h.prototype.nodes=function(){if(0==arguments.length)return(a.a.f.get(this.h,"__ko_anon_template__")||{}).ia;a.a.f.set(this.h,"__ko_anon_template__",{ia:arguments[0]})};a.b("templateSources",a.l);a.b("templateSources.domElement",a.l.h);a.b("templateSources.anonymousTemplate",a.l.O);var O;a.wa=function(b){b!=I&&!(b instanceof
a.v)&&j(Error("templateEngine must inherit from ko.templateEngine"));O=b};a.va=function(b,c,d,e,f){d=d||{};(d.templateEngine||O)==I&&j(Error("Set a template engine before calling renderTemplate"));f=f||"replaceChildren";if(e){var g=N(e);return a.j(function(){var h=c&&c instanceof a.z?c:new a.z(a.a.d(c)),k="function"==typeof b?b(h.$data,h):b,h=T(e,f,k,h,d);"replaceNode"==f&&(e=h,g=N(e))},q,{La:function(){return!g||!a.a.Z(g)},Y:g&&"replaceNode"==f?g.parentNode:g})}return a.s.ra(function(e){a.va(b,c,
d,e,"replaceNode")})};a.Ob=function(b,c,d,e,f){function g(a,b){U(b,k);d.afterRender&&d.afterRender(b,a)}function h(c,e){k=f.createChildContext(a.a.d(c),d.as);k.$index=e;var g="function"==typeof b?b(c,k):b;return T(q,"ignoreTargetNode",g,k,d)}var k;return a.j(function(){var b=a.a.d(c)||[];"undefined"==typeof b.length&&(b=[b]);b=a.a.fa(b,function(b){return d.includeDestroyed||b===I||b===q||!a.a.d(b._destroy)});a.r.K(a.a.ab,q,[e,b,h,d,g])},q,{Y:e})};a.c.template={init:function(b,c){var d=a.a.d(c());
if("string"!=typeof d&&!d.name&&(1==b.nodeType||8==b.nodeType))d=1==b.nodeType?b.childNodes:a.e.childNodes(b),d=a.a.Jb(d),(new a.l.O(b)).nodes(d);return{controlsDescendantBindings:m}},update:function(b,c,d,e,f){c=a.a.d(c());d={};e=m;var g,h=q;"string"!=typeof c&&(d=c,c=d.name,"if"in d&&(e=a.a.d(d["if"])),e&&"ifnot"in d&&(e=!a.a.d(d.ifnot)),g=a.a.d(d.data));"foreach"in d?h=a.Ob(c||b,e&&d.foreach||[],d,b,f):e?(f="data"in d?f.createChildContext(g,d.as):f,h=a.va(c||b,f,d,b)):a.e.$(b);f=h;(g=a.a.f.get(b,
"__ko__templateComputedDomDataKey__"))&&"function"==typeof g.B&&g.B();a.a.f.set(b,"__ko__templateComputedDomDataKey__",f&&f.pa()?f:I)}};a.g.Q.template=function(b){b=a.g.ba(b);return 1==b.length&&b[0].unknown||a.g.Gb(b,"name")?q:"This template engine does not support anonymous templates nested within its templates"};a.e.I.template=m;a.b("setTemplateEngine",a.wa);a.b("renderTemplate",a.va);a.a.Ka=function(a,c,d){a=a||[];c=c||[];return a.length<=c.length?S(a,c,"added","deleted",d):S(c,a,"deleted","added",
d)};a.b("utils.compareArrays",a.a.Ka);a.a.ab=function(b,c,d,e,f){function g(a,b){s=l[b];w!==b&&(A[a]=s);s.na(w++);M(s.M);u.push(s);B.push(s)}function h(b,c){if(b)for(var d=0,e=c.length;d<e;d++)c[d]&&a.a.o(c[d].M,function(a){b(a,d,c[d].W)})}c=c||[];e=e||{};var k=a.a.f.get(b,"setDomNodeChildrenFromArrayMapping_lastMappingResult")===I,l=a.a.f.get(b,"setDomNodeChildrenFromArrayMapping_lastMappingResult")||[],n=a.a.X(l,function(a){return a.W}),p=a.a.Ka(n,c),u=[],v=0,w=0,C=[],B=[];c=[];for(var A=[],n=[],
s,E=0,D,F;D=p[E];E++)switch(F=D.moved,D.status){case "deleted":F===I&&(s=l[v],s.j&&s.j.B(),C.push.apply(C,M(s.M)),e.beforeRemove&&(c[E]=s,B.push(s)));v++;break;case "retained":g(E,v++);break;case "added":F!==I?g(E,F):(s={W:D.value,na:a.m(w++)},u.push(s),B.push(s),k||(n[E]=s))}h(e.beforeMove,A);a.a.o(C,e.beforeRemove?a.A:a.removeNode);for(var E=0,k=a.e.firstChild(b),H;s=B[E];E++){s.M||a.a.extend(s,ia(b,d,s.W,f,s.na));for(v=0;p=s.M[v];k=p.nextSibling,H=p,v++)p!==k&&a.e.Qa(b,p,H);!s.Cb&&f&&(f(s.W,s.M,
s.na),s.Cb=m)}h(e.beforeRemove,c);h(e.afterMove,A);h(e.afterAdd,n);a.a.f.set(b,"setDomNodeChildrenFromArrayMapping_lastMappingResult",u)};a.b("utils.setDomNodeChildrenFromArrayMapping",a.a.ab);a.C=function(){this.allowTemplateRewriting=r};a.C.prototype=new a.v;a.C.prototype.renderTemplateSource=function(b){var c=!(9>a.a.aa)&&b.nodes?b.nodes():q;if(c)return a.a.L(c.cloneNode(m).childNodes);b=b.text();return a.a.ta(b)};a.C.oa=new a.C;a.wa(a.C.oa);a.b("nativeTemplateEngine",a.C);a.qa=function(){var a=
this.Fb=function(){if("undefined"==typeof G||!G.tmpl)return 0;try{if(0<=G.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(a){}return 1}();this.renderTemplateSource=function(c,d,e){e=e||{};2>a&&j(Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later."));var f=c.data("precompiled");f||(f=c.text()||"",f=G.template(q,"{{ko_with $item.koBindingContext}}"+f+"{{/ko_with}}"),c.data("precompiled",f));c=[d.$data];d=G.extend({koBindingContext:d},e.templateOptions);
d=G.tmpl(f,c,d);d.appendTo(y.createElement("div"));G.fragments={};return d};this.createJavaScriptEvaluatorBlock=function(a){return"{{ko_code ((function() { return "+a+" })()) }}"};this.addTemplate=function(a,b){y.write("<script type='text/html' id='"+a+"'>"+b+"\x3c/script>")};0<a&&(G.tmpl.tag.ko_code={open:"__.push($1 || '');"},G.tmpl.tag.ko_with={open:"with($1) {",close:"} "})};a.qa.prototype=new a.v;w=new a.qa;0<w.Fb&&a.wa(w);a.b("jqueryTmplTemplateEngine",a.qa)}
"function"===typeof require&&"object"===typeof exports&&"object"===typeof module?L(module.exports||exports):"function"===typeof define&&define.amd?define('knockout',["exports"],L):L(x.ko={});m;
})();

/**
 * @fileoverview gl-matrix - High performance matrix and vector operations for WebGL
 * @author Brandon Jones
 * @author Colin MacKenzie IV
 * @version 1.3.7
 */

/*
 * Copyright (c) 2012 Brandon Jones, Colin MacKenzie IV
 *
 * This software is provided 'as-is', without any express or implied
 * warranty. In no event will the authors be held liable for any damages
 * arising from the use of this software.
 *
 * Permission is granted to anyone to use this software for any purpose,
 * including commercial applications, and to alter it and redistribute it
 * freely, subject to the following restrictions:
 *
 *    1. The origin of this software must not be misrepresented; you must not
 *    claim that you wrote the original software. If you use this software
 *    in a product, an acknowledgment in the product documentation would be
 *    appreciated but is not required.
 *
 *    2. Altered source versions must be plainly marked as such, and must not
 *    be misrepresented as being the original software.
 *
 *    3. This notice may not be removed or altered from any source
 *    distribution.
 */

// Updated to use a modification of the "returnExportsGlobal" pattern from https://github.com/umdjs/umd

(function (root, factory) {
    if (typeof exports === 'object') {
        // Node. Does not work with strict CommonJS, but
        // only CommonJS-like enviroments that support module.exports,
        // like Node.
        module.exports = factory(global);
    } else if (typeof define === 'function' && define.amd) {
        // AMD. Register as an anonymous module.
        define('glmatrix',[], function () {
            return factory(root);
        });
    } else {
        // Browser globals
        factory(root);
    }
}(this, function (root) {
    

    // Tweak to your liking
    var FLOAT_EPSILON = 0.000001;

    var glMath = {};
    (function() {
        if (typeof(Float32Array) != 'undefined') {
            var y = new Float32Array(1);
            var i = new Int32Array(y.buffer);

            /**
             * Fast way to calculate the inverse square root,
             * see http://jsperf.com/inverse-square-root/5
             *
             * If typed arrays are not available, a slower
             * implementation will be used.
             *
             * @param {Number} number the number
             * @returns {Number} Inverse square root
             */
            glMath.invsqrt = function(number) {
              var x2 = number * 0.5;
              y[0] = number;
              var threehalfs = 1.5;

              i[0] = 0x5f3759df - (i[0] >> 1);

              var number2 = y[0];

              return number2 * (threehalfs - (x2 * number2 * number2));
            };
        } else {
            glMath.invsqrt = function(number) { return 1.0 / Math.sqrt(number); };
        }
    })();

    /**
     * @class System-specific optimal array type
     * @name MatrixArray
     */
    var MatrixArray = null;
    
    // explicitly sets and returns the type of array to use within glMatrix
    function setMatrixArrayType(type) {
        MatrixArray = type;
        return MatrixArray;
    }

    // auto-detects and returns the best type of array to use within glMatrix, falling
    // back to Array if typed arrays are unsupported
    function determineMatrixArrayType() {
        MatrixArray = (typeof Float32Array !== 'undefined') ? Float32Array : Array;
        return MatrixArray;
    }
    
    determineMatrixArrayType();

    /**
     * @class 3 Dimensional Vector
     * @name vec3
     */
    var vec3 = {};
     
    /**
     * Creates a new instance of a vec3 using the default array type
     * Any javascript array-like objects containing at least 3 numeric elements can serve as a vec3
     *
     * @param {vec3} [vec] vec3 containing values to initialize with
     *
     * @returns {vec3} New vec3
     */
    vec3.create = function (vec) {
        var dest = new MatrixArray(3);

        if (vec) {
            dest[0] = vec[0];
            dest[1] = vec[1];
            dest[2] = vec[2];
        } else {
            dest[0] = dest[1] = dest[2] = 0;
        }

        return dest;
    };

    /**
     * Creates a new instance of a vec3, initializing it with the given arguments
     *
     * @param {number} x X value
     * @param {number} y Y value
     * @param {number} z Z value

     * @returns {vec3} New vec3
     */
    vec3.createFrom = function (x, y, z) {
        var dest = new MatrixArray(3);

        dest[0] = x;
        dest[1] = y;
        dest[2] = z;

        return dest;
    };

    /**
     * Copies the values of one vec3 to another
     *
     * @param {vec3} vec vec3 containing values to copy
     * @param {vec3} dest vec3 receiving copied values
     *
     * @returns {vec3} dest
     */
    vec3.set = function (vec, dest) {
        dest[0] = vec[0];
        dest[1] = vec[1];
        dest[2] = vec[2];

        return dest;
    };

    /**
     * Compares two vectors for equality within a certain margin of error
     *
     * @param {vec3} a First vector
     * @param {vec3} b Second vector
     *
     * @returns {Boolean} True if a is equivalent to b
     */
    vec3.equal = function (a, b) {
        return a === b || (
            Math.abs(a[0] - b[0]) < FLOAT_EPSILON &&
            Math.abs(a[1] - b[1]) < FLOAT_EPSILON &&
            Math.abs(a[2] - b[2]) < FLOAT_EPSILON
        );
    };

    /**
     * Performs a vector addition
     *
     * @param {vec3} vec First operand
     * @param {vec3} vec2 Second operand
     * @param {vec3} [dest] vec3 receiving operation result. If not specified result is written to vec
     *
     * @returns {vec3} dest if specified, vec otherwise
     */
    vec3.add = function (vec, vec2, dest) {
        if (!dest || vec === dest) {
            vec[0] += vec2[0];
            vec[1] += vec2[1];
            vec[2] += vec2[2];
            return vec;
        }

        dest[0] = vec[0] + vec2[0];
        dest[1] = vec[1] + vec2[1];
        dest[2] = vec[2] + vec2[2];
        return dest;
    };

    /**
     * Performs a vector subtraction
     *
     * @param {vec3} vec First operand
     * @param {vec3} vec2 Second operand
     * @param {vec3} [dest] vec3 receiving operation result. If not specified result is written to vec
     *
     * @returns {vec3} dest if specified, vec otherwise
     */
    vec3.subtract = function (vec, vec2, dest) {
        if (!dest || vec === dest) {
            vec[0] -= vec2[0];
            vec[1] -= vec2[1];
            vec[2] -= vec2[2];
            return vec;
        }

        dest[0] = vec[0] - vec2[0];
        dest[1] = vec[1] - vec2[1];
        dest[2] = vec[2] - vec2[2];
        return dest;
    };

    /**
     * Performs a vector multiplication
     *
     * @param {vec3} vec First operand
     * @param {vec3} vec2 Second operand
     * @param {vec3} [dest] vec3 receiving operation result. If not specified result is written to vec
     *
     * @returns {vec3} dest if specified, vec otherwise
     */
    vec3.multiply = function (vec, vec2, dest) {
        if (!dest || vec === dest) {
            vec[0] *= vec2[0];
            vec[1] *= vec2[1];
            vec[2] *= vec2[2];
            return vec;
        }

        dest[0] = vec[0] * vec2[0];
        dest[1] = vec[1] * vec2[1];
        dest[2] = vec[2] * vec2[2];
        return dest;
    };

    /**
     * Negates the components of a vec3
     *
     * @param {vec3} vec vec3 to negate
     * @param {vec3} [dest] vec3 receiving operation result. If not specified result is written to vec
     *
     * @returns {vec3} dest if specified, vec otherwise
     */
    vec3.negate = function (vec, dest) {
        if (!dest) { dest = vec; }

        dest[0] = -vec[0];
        dest[1] = -vec[1];
        dest[2] = -vec[2];
        return dest;
    };

    /**
     * Multiplies the components of a vec3 by a scalar value
     *
     * @param {vec3} vec vec3 to scale
     * @param {number} val Value to scale by
     * @param {vec3} [dest] vec3 receiving operation result. If not specified result is written to vec
     *
     * @returns {vec3} dest if specified, vec otherwise
     */
    vec3.scale = function (vec, val, dest) {
        if (!dest || vec === dest) {
            vec[0] *= val;
            vec[1] *= val;
            vec[2] *= val;
            return vec;
        }

        dest[0] = vec[0] * val;
        dest[1] = vec[1] * val;
        dest[2] = vec[2] * val;
        return dest;
    };

    /**
     * Generates a unit vector of the same direction as the provided vec3
     * If vector length is 0, returns [0, 0, 0]
     *
     * @param {vec3} vec vec3 to normalize
     * @param {vec3} [dest] vec3 receiving operation result. If not specified result is written to vec
     *
     * @returns {vec3} dest if specified, vec otherwise
     */
    vec3.normalize = function (vec, dest) {
        if (!dest) { dest = vec; }

        var x = vec[0], y = vec[1], z = vec[2],
            len = Math.sqrt(x * x + y * y + z * z);

        if (!len) {
            dest[0] = 0;
            dest[1] = 0;
            dest[2] = 0;
            return dest;
        } else if (len === 1) {
            dest[0] = x;
            dest[1] = y;
            dest[2] = z;
            return dest;
        }

        len = 1 / len;
        dest[0] = x * len;
        dest[1] = y * len;
        dest[2] = z * len;
        return dest;
    };

    /**
     * Generates the cross product of two vec3s
     *
     * @param {vec3} vec First operand
     * @param {vec3} vec2 Second operand
     * @param {vec3} [dest] vec3 receiving operation result. If not specified result is written to vec
     *
     * @returns {vec3} dest if specified, vec otherwise
     */
    vec3.cross = function (vec, vec2, dest) {
        if (!dest) { dest = vec; }

        var x = vec[0], y = vec[1], z = vec[2],
            x2 = vec2[0], y2 = vec2[1], z2 = vec2[2];

        dest[0] = y * z2 - z * y2;
        dest[1] = z * x2 - x * z2;
        dest[2] = x * y2 - y * x2;
        return dest;
    };

    /**
     * Caclulates the length of a vec3
     *
     * @param {vec3} vec vec3 to calculate length of
     *
     * @returns {number} Length of vec
     */
    vec3.length = function (vec) {
        var x = vec[0], y = vec[1], z = vec[2];
        return Math.sqrt(x * x + y * y + z * z);
    };

    /**
     * Caclulates the squared length of a vec3
     *
     * @param {vec3} vec vec3 to calculate squared length of
     *
     * @returns {number} Squared Length of vec
     */
    vec3.squaredLength = function (vec) {
        var x = vec[0], y = vec[1], z = vec[2];
        return x * x + y * y + z * z;
    };

    /**
     * Caclulates the dot product of two vec3s
     *
     * @param {vec3} vec First operand
     * @param {vec3} vec2 Second operand
     *
     * @returns {number} Dot product of vec and vec2
     */
    vec3.dot = function (vec, vec2) {
        return vec[0] * vec2[0] + vec[1] * vec2[1] + vec[2] * vec2[2];
    };

    /**
     * Generates a unit vector pointing from one vector to another
     *
     * @param {vec3} vec Origin vec3
     * @param {vec3} vec2 vec3 to point to
     * @param {vec3} [dest] vec3 receiving operation result. If not specified result is written to vec
     *
     * @returns {vec3} dest if specified, vec otherwise
     */
    vec3.direction = function (vec, vec2, dest) {
        if (!dest) { dest = vec; }

        var x = vec[0] - vec2[0],
            y = vec[1] - vec2[1],
            z = vec[2] - vec2[2],
            len = Math.sqrt(x * x + y * y + z * z);

        if (!len) {
            dest[0] = 0;
            dest[1] = 0;
            dest[2] = 0;
            return dest;
        }

        len = 1 / len;
        dest[0] = x * len;
        dest[1] = y * len;
        dest[2] = z * len;
        return dest;
    };

    /**
     * Performs a linear interpolation between two vec3
     *
     * @param {vec3} vec First vector
     * @param {vec3} vec2 Second vector
     * @param {number} lerp Interpolation amount between the two inputs
     * @param {vec3} [dest] vec3 receiving operation result. If not specified result is written to vec
     *
     * @returns {vec3} dest if specified, vec otherwise
     */
    vec3.lerp = function (vec, vec2, lerp, dest) {
        if (!dest) { dest = vec; }

        dest[0] = vec[0] + lerp * (vec2[0] - vec[0]);
        dest[1] = vec[1] + lerp * (vec2[1] - vec[1]);
        dest[2] = vec[2] + lerp * (vec2[2] - vec[2]);

        return dest;
    };

    /**
     * Calculates the euclidian distance between two vec3
     *
     * Params:
     * @param {vec3} vec First vector
     * @param {vec3} vec2 Second vector
     *
     * @returns {number} Distance between vec and vec2
     */
    vec3.dist = function (vec, vec2) {
        var x = vec2[0] - vec[0],
            y = vec2[1] - vec[1],
            z = vec2[2] - vec[2];
            
        return Math.sqrt(x*x + y*y + z*z);
    };

    // Pre-allocated to prevent unecessary garbage collection
    var unprojectMat = null;
    var unprojectVec = new MatrixArray(4);
    /**
     * Projects the specified vec3 from screen space into object space
     * Based on the <a href="http://webcvs.freedesktop.org/mesa/Mesa/src/glu/mesa/project.c?revision=1.4&view=markup">Mesa gluUnProject implementation</a>
     *
     * @param {vec3} vec Screen-space vector to project
     * @param {mat4} view View matrix
     * @param {mat4} proj Projection matrix
     * @param {vec4} viewport Viewport as given to gl.viewport [x, y, width, height]
     * @param {vec3} [dest] vec3 receiving unprojected result. If not specified result is written to vec
     *
     * @returns {vec3} dest if specified, vec otherwise
     */
    vec3.unproject = function (vec, view, proj, viewport, dest) {
        if (!dest) { dest = vec; }

        if(!unprojectMat) {
            unprojectMat = mat4.create();
        }

        var m = unprojectMat;
        var v = unprojectVec;
        
        v[0] = (vec[0] - viewport[0]) * 2.0 / viewport[2] - 1.0;
        v[1] = (vec[1] - viewport[1]) * 2.0 / viewport[3] - 1.0;
        v[2] = 2.0 * vec[2] - 1.0;
        v[3] = 1.0;
        
        mat4.multiply(proj, view, m);
        if(!mat4.inverse(m)) { return null; }
        
        mat4.multiplyVec4(m, v);
        if(v[3] === 0.0) { return null; }

        dest[0] = v[0] / v[3];
        dest[1] = v[1] / v[3];
        dest[2] = v[2] / v[3];
        
        return dest;
    };

    var xUnitVec3 = vec3.createFrom(1,0,0);
    var yUnitVec3 = vec3.createFrom(0,1,0);
    var zUnitVec3 = vec3.createFrom(0,0,1);

    var tmpvec3 = vec3.create();
    /**
     * Generates a quaternion of rotation between two given normalized vectors
     *
     * @param {vec3} a Normalized source vector
     * @param {vec3} b Normalized target vector
     * @param {quat4} [dest] quat4 receiving operation result.
     *
     * @returns {quat4} dest if specified, a new quat4 otherwise
     */
    vec3.rotationTo = function (a, b, dest) {
        if (!dest) { dest = quat4.create(); }
        
        var d = vec3.dot(a, b);
        var axis = tmpvec3;
        if (d >= 1.0) {
            quat4.set(identityQuat4, dest);
        } else if (d < (0.000001 - 1.0)) {
            vec3.cross(xUnitVec3, a, axis);
            if (vec3.length(axis) < 0.000001)
                vec3.cross(yUnitVec3, a, axis);
            if (vec3.length(axis) < 0.000001)
                vec3.cross(zUnitVec3, a, axis);
            vec3.normalize(axis);
            quat4.fromAngleAxis(Math.PI, axis, dest);
        } else {
            var s = Math.sqrt((1.0 + d) * 2.0);
            var sInv = 1.0 / s;
            vec3.cross(a, b, axis);
            dest[0] = axis[0] * sInv;
            dest[1] = axis[1] * sInv;
            dest[2] = axis[2] * sInv;
            dest[3] = s * 0.5;
            quat4.normalize(dest);
        }
        if (dest[3] > 1.0) dest[3] = 1.0;
        else if (dest[3] < -1.0) dest[3] = -1.0;
        return dest;
    };

    /**
     * Returns a string representation of a vector
     *
     * @param {vec3} vec Vector to represent as a string
     *
     * @returns {string} String representation of vec
     */
    vec3.str = function (vec) {
        return '[' + vec[0] + ', ' + vec[1] + ', ' + vec[2] + ']';
    };

    /**
     * @class 3x3 Matrix
     * @name mat3
     */
    var mat3 = {};

    /**
     * Creates a new instance of a mat3 using the default array type
     * Any javascript array-like object containing at least 9 numeric elements can serve as a mat3
     *
     * @param {mat3} [mat] mat3 containing values to initialize with
     *
     * @returns {mat3} New mat3
     */
    mat3.create = function (mat) {
        var dest = new MatrixArray(9);

        if (mat) {
            dest[0] = mat[0];
            dest[1] = mat[1];
            dest[2] = mat[2];
            dest[3] = mat[3];
            dest[4] = mat[4];
            dest[5] = mat[5];
            dest[6] = mat[6];
            dest[7] = mat[7];
            dest[8] = mat[8];
        } else {
            dest[0] = dest[1] =
            dest[2] = dest[3] =
            dest[4] = dest[5] =
            dest[6] = dest[7] =
            dest[8] = 0;
        }

        return dest;
    };

    /**
     * Creates a new instance of a mat3, initializing it with the given arguments
     *
     * @param {number} m00
     * @param {number} m01
     * @param {number} m02
     * @param {number} m10
     * @param {number} m11
     * @param {number} m12
     * @param {number} m20
     * @param {number} m21
     * @param {number} m22

     * @returns {mat3} New mat3
     */
    mat3.createFrom = function (m00, m01, m02, m10, m11, m12, m20, m21, m22) {
        var dest = new MatrixArray(9);

        dest[0] = m00;
        dest[1] = m01;
        dest[2] = m02;
        dest[3] = m10;
        dest[4] = m11;
        dest[5] = m12;
        dest[6] = m20;
        dest[7] = m21;
        dest[8] = m22;

        return dest;
    };

    /**
     * Calculates the determinant of a mat3
     *
     * @param {mat3} mat mat3 to calculate determinant of
     *
     * @returns {Number} determinant of mat
     */
    mat3.determinant = function (mat) {
        var a00 = mat[0], a01 = mat[1], a02 = mat[2],
            a10 = mat[3], a11 = mat[4], a12 = mat[5],
            a20 = mat[6], a21 = mat[7], a22 = mat[8];

        return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);
    };

    /**
     * Calculates the inverse matrix of a mat3
     *
     * @param {mat3} mat mat3 to calculate inverse of
     * @param {mat3} [dest] mat3 receiving inverse matrix. If not specified result is written to mat
     *
     * @param {mat3} dest is specified, mat otherwise, null if matrix cannot be inverted
     */
    mat3.inverse = function (mat, dest) {
        var a00 = mat[0], a01 = mat[1], a02 = mat[2],
            a10 = mat[3], a11 = mat[4], a12 = mat[5],
            a20 = mat[6], a21 = mat[7], a22 = mat[8],

            b01 = a22 * a11 - a12 * a21,
            b11 = -a22 * a10 + a12 * a20,
            b21 = a21 * a10 - a11 * a20,

            d = a00 * b01 + a01 * b11 + a02 * b21,
            id;

        if (!d) { return null; }
        id = 1 / d;

        if (!dest) { dest = mat3.create(); }

        dest[0] = b01 * id;
        dest[1] = (-a22 * a01 + a02 * a21) * id;
        dest[2] = (a12 * a01 - a02 * a11) * id;
        dest[3] = b11 * id;
        dest[4] = (a22 * a00 - a02 * a20) * id;
        dest[5] = (-a12 * a00 + a02 * a10) * id;
        dest[6] = b21 * id;
        dest[7] = (-a21 * a00 + a01 * a20) * id;
        dest[8] = (a11 * a00 - a01 * a10) * id;
        return dest;
    };
    
    /**
     * Performs a matrix multiplication
     *
     * @param {mat3} mat First operand
     * @param {mat3} mat2 Second operand
     * @param {mat3} [dest] mat3 receiving operation result. If not specified result is written to mat
     *
     * @returns {mat3} dest if specified, mat otherwise
     */
    mat3.multiply = function (mat, mat2, dest) {
        if (!dest) { dest = mat; }
        

        // Cache the matrix values (makes for huge speed increases!)
        var a00 = mat[0], a01 = mat[1], a02 = mat[2],
            a10 = mat[3], a11 = mat[4], a12 = mat[5],
            a20 = mat[6], a21 = mat[7], a22 = mat[8],

            b00 = mat2[0], b01 = mat2[1], b02 = mat2[2],
            b10 = mat2[3], b11 = mat2[4], b12 = mat2[5],
            b20 = mat2[6], b21 = mat2[7], b22 = mat2[8];

        dest[0] = b00 * a00 + b01 * a10 + b02 * a20;
        dest[1] = b00 * a01 + b01 * a11 + b02 * a21;
        dest[2] = b00 * a02 + b01 * a12 + b02 * a22;

        dest[3] = b10 * a00 + b11 * a10 + b12 * a20;
        dest[4] = b10 * a01 + b11 * a11 + b12 * a21;
        dest[5] = b10 * a02 + b11 * a12 + b12 * a22;

        dest[6] = b20 * a00 + b21 * a10 + b22 * a20;
        dest[7] = b20 * a01 + b21 * a11 + b22 * a21;
        dest[8] = b20 * a02 + b21 * a12 + b22 * a22;

        return dest;
    };

    /**
     * Transforms the vec2 according to the given mat3.
     *
     * @param {mat3} matrix mat3 to multiply against
     * @param {vec2} vec    the vector to multiply
     * @param {vec2} [dest] an optional receiving vector. If not given, vec is used.
     *
     * @returns {vec2} The multiplication result
     **/
    mat3.multiplyVec2 = function(matrix, vec, dest) {
      if (!dest) dest = vec;
      var x = vec[0], y = vec[1];
      dest[0] = x * matrix[0] + y * matrix[3] + matrix[6];
      dest[1] = x * matrix[1] + y * matrix[4] + matrix[7];
      return dest;
    };

    /**
     * Transforms the vec3 according to the given mat3
     *
     * @param {mat3} matrix mat3 to multiply against
     * @param {vec3} vec    the vector to multiply
     * @param {vec3} [dest] an optional receiving vector. If not given, vec is used.
     *
     * @returns {vec3} The multiplication result
     **/
    mat3.multiplyVec3 = function(matrix, vec, dest) {
      if (!dest) dest = vec;
      var x = vec[0], y = vec[1], z = vec[2];
      dest[0] = x * matrix[0] + y * matrix[3] + z * matrix[6];
      dest[1] = x * matrix[1] + y * matrix[4] + z * matrix[7];
      dest[2] = x * matrix[2] + y * matrix[5] + z * matrix[8];
      
      return dest;
    };

    /**
     * Copies the values of one mat3 to another
     *
     * @param {mat3} mat mat3 containing values to copy
     * @param {mat3} dest mat3 receiving copied values
     *
     * @returns {mat3} dest
     */
    mat3.set = function (mat, dest) {
        dest[0] = mat[0];
        dest[1] = mat[1];
        dest[2] = mat[2];
        dest[3] = mat[3];
        dest[4] = mat[4];
        dest[5] = mat[5];
        dest[6] = mat[6];
        dest[7] = mat[7];
        dest[8] = mat[8];
        return dest;
    };

    /**
     * Compares two matrices for equality within a certain margin of error
     *
     * @param {mat3} a First matrix
     * @param {mat3} b Second matrix
     *
     * @returns {Boolean} True if a is equivalent to b
     */
    mat3.equal = function (a, b) {
        return a === b || (
            Math.abs(a[0] - b[0]) < FLOAT_EPSILON &&
            Math.abs(a[1] - b[1]) < FLOAT_EPSILON &&
            Math.abs(a[2] - b[2]) < FLOAT_EPSILON &&
            Math.abs(a[3] - b[3]) < FLOAT_EPSILON &&
            Math.abs(a[4] - b[4]) < FLOAT_EPSILON &&
            Math.abs(a[5] - b[5]) < FLOAT_EPSILON &&
            Math.abs(a[6] - b[6]) < FLOAT_EPSILON &&
            Math.abs(a[7] - b[7]) < FLOAT_EPSILON &&
            Math.abs(a[8] - b[8]) < FLOAT_EPSILON
        );
    };

    /**
     * Sets a mat3 to an identity matrix
     *
     * @param {mat3} dest mat3 to set
     *
     * @returns dest if specified, otherwise a new mat3
     */
    mat3.identity = function (dest) {
        if (!dest) { dest = mat3.create(); }
        dest[0] = 1;
        dest[1] = 0;
        dest[2] = 0;
        dest[3] = 0;
        dest[4] = 1;
        dest[5] = 0;
        dest[6] = 0;
        dest[7] = 0;
        dest[8] = 1;
        return dest;
    };

    /**
     * Transposes a mat3 (flips the values over the diagonal)
     *
     * Params:
     * @param {mat3} mat mat3 to transpose
     * @param {mat3} [dest] mat3 receiving transposed values. If not specified result is written to mat
     *
     * @returns {mat3} dest is specified, mat otherwise
     */
    mat3.transpose = function (mat, dest) {
        // If we are transposing ourselves we can skip a few steps but have to cache some values
        if (!dest || mat === dest) {
            var a01 = mat[1], a02 = mat[2],
                a12 = mat[5];

            mat[1] = mat[3];
            mat[2] = mat[6];
            mat[3] = a01;
            mat[5] = mat[7];
            mat[6] = a02;
            mat[7] = a12;
            return mat;
        }

        dest[0] = mat[0];
        dest[1] = mat[3];
        dest[2] = mat[6];
        dest[3] = mat[1];
        dest[4] = mat[4];
        dest[5] = mat[7];
        dest[6] = mat[2];
        dest[7] = mat[5];
        dest[8] = mat[8];
        return dest;
    };

    /**
     * Copies the elements of a mat3 into the upper 3x3 elements of a mat4
     *
     * @param {mat3} mat mat3 containing values to copy
     * @param {mat4} [dest] mat4 receiving copied values
     *
     * @returns {mat4} dest if specified, a new mat4 otherwise
     */
    mat3.toMat4 = function (mat, dest) {
        if (!dest) { dest = mat4.create(); }

        dest[15] = 1;
        dest[14] = 0;
        dest[13] = 0;
        dest[12] = 0;

        dest[11] = 0;
        dest[10] = mat[8];
        dest[9] = mat[7];
        dest[8] = mat[6];

        dest[7] = 0;
        dest[6] = mat[5];
        dest[5] = mat[4];
        dest[4] = mat[3];

        dest[3] = 0;
        dest[2] = mat[2];
        dest[1] = mat[1];
        dest[0] = mat[0];

        return dest;
    };

    /**
     * Returns a string representation of a mat3
     *
     * @param {mat3} mat mat3 to represent as a string
     *
     * @param {string} String representation of mat
     */
    mat3.str = function (mat) {
        return '[' + mat[0] + ', ' + mat[1] + ', ' + mat[2] +
            ', ' + mat[3] + ', ' + mat[4] + ', ' + mat[5] +
            ', ' + mat[6] + ', ' + mat[7] + ', ' + mat[8] + ']';
    };

    /**
     * @class 4x4 Matrix
     * @name mat4
     */
    var mat4 = {};

    /**
     * Creates a new instance of a mat4 using the default array type
     * Any javascript array-like object containing at least 16 numeric elements can serve as a mat4
     *
     * @param {mat4} [mat] mat4 containing values to initialize with
     *
     * @returns {mat4} New mat4
     */
    mat4.create = function (mat) {
        var dest = new MatrixArray(16);

        if (mat) {
            dest[0] = mat[0];
            dest[1] = mat[1];
            dest[2] = mat[2];
            dest[3] = mat[3];
            dest[4] = mat[4];
            dest[5] = mat[5];
            dest[6] = mat[6];
            dest[7] = mat[7];
            dest[8] = mat[8];
            dest[9] = mat[9];
            dest[10] = mat[10];
            dest[11] = mat[11];
            dest[12] = mat[12];
            dest[13] = mat[13];
            dest[14] = mat[14];
            dest[15] = mat[15];
        }

        return dest;
    };

    /**
     * Creates a new instance of a mat4, initializing it with the given arguments
     *
     * @param {number} m00
     * @param {number} m01
     * @param {number} m02
     * @param {number} m03
     * @param {number} m10
     * @param {number} m11
     * @param {number} m12
     * @param {number} m13
     * @param {number} m20
     * @param {number} m21
     * @param {number} m22
     * @param {number} m23
     * @param {number} m30
     * @param {number} m31
     * @param {number} m32
     * @param {number} m33

     * @returns {mat4} New mat4
     */
    mat4.createFrom = function (m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {
        var dest = new MatrixArray(16);

        dest[0] = m00;
        dest[1] = m01;
        dest[2] = m02;
        dest[3] = m03;
        dest[4] = m10;
        dest[5] = m11;
        dest[6] = m12;
        dest[7] = m13;
        dest[8] = m20;
        dest[9] = m21;
        dest[10] = m22;
        dest[11] = m23;
        dest[12] = m30;
        dest[13] = m31;
        dest[14] = m32;
        dest[15] = m33;

        return dest;
    };

    /**
     * Copies the values of one mat4 to another
     *
     * @param {mat4} mat mat4 containing values to copy
     * @param {mat4} dest mat4 receiving copied values
     *
     * @returns {mat4} dest
     */
    mat4.set = function (mat, dest) {
        dest[0] = mat[0];
        dest[1] = mat[1];
        dest[2] = mat[2];
        dest[3] = mat[3];
        dest[4] = mat[4];
        dest[5] = mat[5];
        dest[6] = mat[6];
        dest[7] = mat[7];
        dest[8] = mat[8];
        dest[9] = mat[9];
        dest[10] = mat[10];
        dest[11] = mat[11];
        dest[12] = mat[12];
        dest[13] = mat[13];
        dest[14] = mat[14];
        dest[15] = mat[15];
        return dest;
    };

    /**
     * Compares two matrices for equality within a certain margin of error
     *
     * @param {mat4} a First matrix
     * @param {mat4} b Second matrix
     *
     * @returns {Boolean} True if a is equivalent to b
     */
    mat4.equal = function (a, b) {
        return a === b || (
            Math.abs(a[0] - b[0]) < FLOAT_EPSILON &&
            Math.abs(a[1] - b[1]) < FLOAT_EPSILON &&
            Math.abs(a[2] - b[2]) < FLOAT_EPSILON &&
            Math.abs(a[3] - b[3]) < FLOAT_EPSILON &&
            Math.abs(a[4] - b[4]) < FLOAT_EPSILON &&
            Math.abs(a[5] - b[5]) < FLOAT_EPSILON &&
            Math.abs(a[6] - b[6]) < FLOAT_EPSILON &&
            Math.abs(a[7] - b[7]) < FLOAT_EPSILON &&
            Math.abs(a[8] - b[8]) < FLOAT_EPSILON &&
            Math.abs(a[9] - b[9]) < FLOAT_EPSILON &&
            Math.abs(a[10] - b[10]) < FLOAT_EPSILON &&
            Math.abs(a[11] - b[11]) < FLOAT_EPSILON &&
            Math.abs(a[12] - b[12]) < FLOAT_EPSILON &&
            Math.abs(a[13] - b[13]) < FLOAT_EPSILON &&
            Math.abs(a[14] - b[14]) < FLOAT_EPSILON &&
            Math.abs(a[15] - b[15]) < FLOAT_EPSILON
        );
    };

    /**
     * Sets a mat4 to an identity matrix
     *
     * @param {mat4} dest mat4 to set
     *
     * @returns {mat4} dest
     */
    mat4.identity = function (dest) {
        if (!dest) { dest = mat4.create(); }
        dest[0] = 1;
        dest[1] = 0;
        dest[2] = 0;
        dest[3] = 0;
        dest[4] = 0;
        dest[5] = 1;
        dest[6] = 0;
        dest[7] = 0;
        dest[8] = 0;
        dest[9] = 0;
        dest[10] = 1;
        dest[11] = 0;
        dest[12] = 0;
        dest[13] = 0;
        dest[14] = 0;
        dest[15] = 1;
        return dest;
    };

    /**
     * Transposes a mat4 (flips the values over the diagonal)
     *
     * @param {mat4} mat mat4 to transpose
     * @param {mat4} [dest] mat4 receiving transposed values. If not specified result is written to mat
     *
     * @param {mat4} dest is specified, mat otherwise
     */
    mat4.transpose = function (mat, dest) {
        // If we are transposing ourselves we can skip a few steps but have to cache some values
        if (!dest || mat === dest) {
            var a01 = mat[1], a02 = mat[2], a03 = mat[3],
                a12 = mat[6], a13 = mat[7],
                a23 = mat[11];

            mat[1] = mat[4];
            mat[2] = mat[8];
            mat[3] = mat[12];
            mat[4] = a01;
            mat[6] = mat[9];
            mat[7] = mat[13];
            mat[8] = a02;
            mat[9] = a12;
            mat[11] = mat[14];
            mat[12] = a03;
            mat[13] = a13;
            mat[14] = a23;
            return mat;
        }

        dest[0] = mat[0];
        dest[1] = mat[4];
        dest[2] = mat[8];
        dest[3] = mat[12];
        dest[4] = mat[1];
        dest[5] = mat[5];
        dest[6] = mat[9];
        dest[7] = mat[13];
        dest[8] = mat[2];
        dest[9] = mat[6];
        dest[10] = mat[10];
        dest[11] = mat[14];
        dest[12] = mat[3];
        dest[13] = mat[7];
        dest[14] = mat[11];
        dest[15] = mat[15];
        return dest;
    };

    /**
     * Calculates the determinant of a mat4
     *
     * @param {mat4} mat mat4 to calculate determinant of
     *
     * @returns {number} determinant of mat
     */
    mat4.determinant = function (mat) {
        // Cache the matrix values (makes for huge speed increases!)
        var a00 = mat[0], a01 = mat[1], a02 = mat[2], a03 = mat[3],
            a10 = mat[4], a11 = mat[5], a12 = mat[6], a13 = mat[7],
            a20 = mat[8], a21 = mat[9], a22 = mat[10], a23 = mat[11],
            a30 = mat[12], a31 = mat[13], a32 = mat[14], a33 = mat[15];

        return (a30 * a21 * a12 * a03 - a20 * a31 * a12 * a03 - a30 * a11 * a22 * a03 + a10 * a31 * a22 * a03 +
                a20 * a11 * a32 * a03 - a10 * a21 * a32 * a03 - a30 * a21 * a02 * a13 + a20 * a31 * a02 * a13 +
                a30 * a01 * a22 * a13 - a00 * a31 * a22 * a13 - a20 * a01 * a32 * a13 + a00 * a21 * a32 * a13 +
                a30 * a11 * a02 * a23 - a10 * a31 * a02 * a23 - a30 * a01 * a12 * a23 + a00 * a31 * a12 * a23 +
                a10 * a01 * a32 * a23 - a00 * a11 * a32 * a23 - a20 * a11 * a02 * a33 + a10 * a21 * a02 * a33 +
                a20 * a01 * a12 * a33 - a00 * a21 * a12 * a33 - a10 * a01 * a22 * a33 + a00 * a11 * a22 * a33);
    };

    /**
     * Calculates the inverse matrix of a mat4
     *
     * @param {mat4} mat mat4 to calculate inverse of
     * @param {mat4} [dest] mat4 receiving inverse matrix. If not specified result is written to mat
     *
     * @param {mat4} dest is specified, mat otherwise, null if matrix cannot be inverted
     */
    mat4.inverse = function (mat, dest) {
        if (!dest) { dest = mat; }

        // Cache the matrix values (makes for huge speed increases!)
        var a00 = mat[0], a01 = mat[1], a02 = mat[2], a03 = mat[3],
            a10 = mat[4], a11 = mat[5], a12 = mat[6], a13 = mat[7],
            a20 = mat[8], a21 = mat[9], a22 = mat[10], a23 = mat[11],
            a30 = mat[12], a31 = mat[13], a32 = mat[14], a33 = mat[15],

            b00 = a00 * a11 - a01 * a10,
            b01 = a00 * a12 - a02 * a10,
            b02 = a00 * a13 - a03 * a10,
            b03 = a01 * a12 - a02 * a11,
            b04 = a01 * a13 - a03 * a11,
            b05 = a02 * a13 - a03 * a12,
            b06 = a20 * a31 - a21 * a30,
            b07 = a20 * a32 - a22 * a30,
            b08 = a20 * a33 - a23 * a30,
            b09 = a21 * a32 - a22 * a31,
            b10 = a21 * a33 - a23 * a31,
            b11 = a22 * a33 - a23 * a32,

            d = (b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06),
            invDet;

            // Calculate the determinant
            if (!d) { return null; }
            invDet = 1 / d;

        dest[0] = (a11 * b11 - a12 * b10 + a13 * b09) * invDet;
        dest[1] = (-a01 * b11 + a02 * b10 - a03 * b09) * invDet;
        dest[2] = (a31 * b05 - a32 * b04 + a33 * b03) * invDet;
        dest[3] = (-a21 * b05 + a22 * b04 - a23 * b03) * invDet;
        dest[4] = (-a10 * b11 + a12 * b08 - a13 * b07) * invDet;
        dest[5] = (a00 * b11 - a02 * b08 + a03 * b07) * invDet;
        dest[6] = (-a30 * b05 + a32 * b02 - a33 * b01) * invDet;
        dest[7] = (a20 * b05 - a22 * b02 + a23 * b01) * invDet;
        dest[8] = (a10 * b10 - a11 * b08 + a13 * b06) * invDet;
        dest[9] = (-a00 * b10 + a01 * b08 - a03 * b06) * invDet;
        dest[10] = (a30 * b04 - a31 * b02 + a33 * b00) * invDet;
        dest[11] = (-a20 * b04 + a21 * b02 - a23 * b00) * invDet;
        dest[12] = (-a10 * b09 + a11 * b07 - a12 * b06) * invDet;
        dest[13] = (a00 * b09 - a01 * b07 + a02 * b06) * invDet;
        dest[14] = (-a30 * b03 + a31 * b01 - a32 * b00) * invDet;
        dest[15] = (a20 * b03 - a21 * b01 + a22 * b00) * invDet;

        return dest;
    };

    /**
     * Copies the upper 3x3 elements of a mat4 into another mat4
     *
     * @param {mat4} mat mat4 containing values to copy
     * @param {mat4} [dest] mat4 receiving copied values
     *
     * @returns {mat4} dest is specified, a new mat4 otherwise
     */
    mat4.toRotationMat = function (mat, dest) {
        if (!dest) { dest = mat4.create(); }

        dest[0] = mat[0];
        dest[1] = mat[1];
        dest[2] = mat[2];
        dest[3] = mat[3];
        dest[4] = mat[4];
        dest[5] = mat[5];
        dest[6] = mat[6];
        dest[7] = mat[7];
        dest[8] = mat[8];
        dest[9] = mat[9];
        dest[10] = mat[10];
        dest[11] = mat[11];
        dest[12] = 0;
        dest[13] = 0;
        dest[14] = 0;
        dest[15] = 1;

        return dest;
    };

    /**
     * Copies the upper 3x3 elements of a mat4 into a mat3
     *
     * @param {mat4} mat mat4 containing values to copy
     * @param {mat3} [dest] mat3 receiving copied values
     *
     * @returns {mat3} dest is specified, a new mat3 otherwise
     */
    mat4.toMat3 = function (mat, dest) {
        if (!dest) { dest = mat3.create(); }

        dest[0] = mat[0];
        dest[1] = mat[1];
        dest[2] = mat[2];
        dest[3] = mat[4];
        dest[4] = mat[5];
        dest[5] = mat[6];
        dest[6] = mat[8];
        dest[7] = mat[9];
        dest[8] = mat[10];

        return dest;
    };

    /**
     * Calculates the inverse of the upper 3x3 elements of a mat4 and copies the result into a mat3
     * The resulting matrix is useful for calculating transformed normals
     *
     * Params:
     * @param {mat4} mat mat4 containing values to invert and copy
     * @param {mat3} [dest] mat3 receiving values
     *
     * @returns {mat3} dest is specified, a new mat3 otherwise, null if the matrix cannot be inverted
     */
    mat4.toInverseMat3 = function (mat, dest) {
        // Cache the matrix values (makes for huge speed increases!)
        var a00 = mat[0], a01 = mat[1], a02 = mat[2],
            a10 = mat[4], a11 = mat[5], a12 = mat[6],
            a20 = mat[8], a21 = mat[9], a22 = mat[10],

            b01 = a22 * a11 - a12 * a21,
            b11 = -a22 * a10 + a12 * a20,
            b21 = a21 * a10 - a11 * a20,

            d = a00 * b01 + a01 * b11 + a02 * b21,
            id;

        if (!d) { return null; }
        id = 1 / d;

        if (!dest) { dest = mat3.create(); }

        dest[0] = b01 * id;
        dest[1] = (-a22 * a01 + a02 * a21) * id;
        dest[2] = (a12 * a01 - a02 * a11) * id;
        dest[3] = b11 * id;
        dest[4] = (a22 * a00 - a02 * a20) * id;
        dest[5] = (-a12 * a00 + a02 * a10) * id;
        dest[6] = b21 * id;
        dest[7] = (-a21 * a00 + a01 * a20) * id;
        dest[8] = (a11 * a00 - a01 * a10) * id;

        return dest;
    };

    /**
     * Performs a matrix multiplication
     *
     * @param {mat4} mat First operand
     * @param {mat4} mat2 Second operand
     * @param {mat4} [dest] mat4 receiving operation result. If not specified result is written to mat
     *
     * @returns {mat4} dest if specified, mat otherwise
     */
    mat4.multiply = function (mat, mat2, dest) {
        if (!dest) { dest = mat; }

        // Cache the matrix values (makes for huge speed increases!)
        var a00 = mat[ 0], a01 = mat[ 1], a02 = mat[ 2], a03 = mat[3];
        var a10 = mat[ 4], a11 = mat[ 5], a12 = mat[ 6], a13 = mat[7];
        var a20 = mat[ 8], a21 = mat[ 9], a22 = mat[10], a23 = mat[11];
        var a30 = mat[12], a31 = mat[13], a32 = mat[14], a33 = mat[15];

        // Cache only the current line of the second matrix
        var b0  = mat2[0], b1 = mat2[1], b2 = mat2[2], b3 = mat2[3];  
        dest[0] = b0*a00 + b1*a10 + b2*a20 + b3*a30;
        dest[1] = b0*a01 + b1*a11 + b2*a21 + b3*a31;
        dest[2] = b0*a02 + b1*a12 + b2*a22 + b3*a32;
        dest[3] = b0*a03 + b1*a13 + b2*a23 + b3*a33;

        b0 = mat2[4];
        b1 = mat2[5];
        b2 = mat2[6];
        b3 = mat2[7];
        dest[4] = b0*a00 + b1*a10 + b2*a20 + b3*a30;
        dest[5] = b0*a01 + b1*a11 + b2*a21 + b3*a31;
        dest[6] = b0*a02 + b1*a12 + b2*a22 + b3*a32;
        dest[7] = b0*a03 + b1*a13 + b2*a23 + b3*a33;

        b0 = mat2[8];
        b1 = mat2[9];
        b2 = mat2[10];
        b3 = mat2[11];
        dest[8] = b0*a00 + b1*a10 + b2*a20 + b3*a30;
        dest[9] = b0*a01 + b1*a11 + b2*a21 + b3*a31;
        dest[10] = b0*a02 + b1*a12 + b2*a22 + b3*a32;
        dest[11] = b0*a03 + b1*a13 + b2*a23 + b3*a33;

        b0 = mat2[12];
        b1 = mat2[13];
        b2 = mat2[14];
        b3 = mat2[15];
        dest[12] = b0*a00 + b1*a10 + b2*a20 + b3*a30;
        dest[13] = b0*a01 + b1*a11 + b2*a21 + b3*a31;
        dest[14] = b0*a02 + b1*a12 + b2*a22 + b3*a32;
        dest[15] = b0*a03 + b1*a13 + b2*a23 + b3*a33;

        return dest;
    };

    /**
     * Transforms a vec3 with the given matrix
     * 4th vector component is implicitly '1'
     *
     * @param {mat4} mat mat4 to transform the vector with
     * @param {vec3} vec vec3 to transform
     * @param {vec3} [dest] vec3 receiving operation result. If not specified result is written to vec
     *
     * @returns {vec3} dest if specified, vec otherwise
     */
    mat4.multiplyVec3 = function (mat, vec, dest) {
        if (!dest) { dest = vec; }

        var x = vec[0], y = vec[1], z = vec[2];

        dest[0] = mat[0] * x + mat[4] * y + mat[8] * z + mat[12];
        dest[1] = mat[1] * x + mat[5] * y + mat[9] * z + mat[13];
        dest[2] = mat[2] * x + mat[6] * y + mat[10] * z + mat[14];

        return dest;
    };

    /**
     * Transforms a vec4 with the given matrix
     *
     * @param {mat4} mat mat4 to transform the vector with
     * @param {vec4} vec vec4 to transform
     * @param {vec4} [dest] vec4 receiving operation result. If not specified result is written to vec
     *
     * @returns {vec4} dest if specified, vec otherwise
     */
    mat4.multiplyVec4 = function (mat, vec, dest) {
        if (!dest) { dest = vec; }

        var x = vec[0], y = vec[1], z = vec[2], w = vec[3];

        dest[0] = mat[0] * x + mat[4] * y + mat[8] * z + mat[12] * w;
        dest[1] = mat[1] * x + mat[5] * y + mat[9] * z + mat[13] * w;
        dest[2] = mat[2] * x + mat[6] * y + mat[10] * z + mat[14] * w;
        dest[3] = mat[3] * x + mat[7] * y + mat[11] * z + mat[15] * w;

        return dest;
    };

    /**
     * Translates a matrix by the given vector
     *
     * @param {mat4} mat mat4 to translate
     * @param {vec3} vec vec3 specifying the translation
     * @param {mat4} [dest] mat4 receiving operation result. If not specified result is written to mat
     *
     * @returns {mat4} dest if specified, mat otherwise
     */
    mat4.translate = function (mat, vec, dest) {
        var x = vec[0], y = vec[1], z = vec[2],
            a00, a01, a02, a03,
            a10, a11, a12, a13,
            a20, a21, a22, a23;

        if (!dest || mat === dest) {
            mat[12] = mat[0] * x + mat[4] * y + mat[8] * z + mat[12];
            mat[13] = mat[1] * x + mat[5] * y + mat[9] * z + mat[13];
            mat[14] = mat[2] * x + mat[6] * y + mat[10] * z + mat[14];
            mat[15] = mat[3] * x + mat[7] * y + mat[11] * z + mat[15];
            return mat;
        }

        a00 = mat[0]; a01 = mat[1]; a02 = mat[2]; a03 = mat[3];
        a10 = mat[4]; a11 = mat[5]; a12 = mat[6]; a13 = mat[7];
        a20 = mat[8]; a21 = mat[9]; a22 = mat[10]; a23 = mat[11];

        dest[0] = a00; dest[1] = a01; dest[2] = a02; dest[3] = a03;
        dest[4] = a10; dest[5] = a11; dest[6] = a12; dest[7] = a13;
        dest[8] = a20; dest[9] = a21; dest[10] = a22; dest[11] = a23;

        dest[12] = a00 * x + a10 * y + a20 * z + mat[12];
        dest[13] = a01 * x + a11 * y + a21 * z + mat[13];
        dest[14] = a02 * x + a12 * y + a22 * z + mat[14];
        dest[15] = a03 * x + a13 * y + a23 * z + mat[15];
        return dest;
    };

    /**
     * Scales a matrix by the given vector
     *
     * @param {mat4} mat mat4 to scale
     * @param {vec3} vec vec3 specifying the scale for each axis
     * @param {mat4} [dest] mat4 receiving operation result. If not specified result is written to mat
     *
     * @param {mat4} dest if specified, mat otherwise
     */
    mat4.scale = function (mat, vec, dest) {
        var x = vec[0], y = vec[1], z = vec[2];

        if (!dest || mat === dest) {
            mat[0] *= x;
            mat[1] *= x;
            mat[2] *= x;
            mat[3] *= x;
            mat[4] *= y;
            mat[5] *= y;
            mat[6] *= y;
            mat[7] *= y;
            mat[8] *= z;
            mat[9] *= z;
            mat[10] *= z;
            mat[11] *= z;
            return mat;
        }

        dest[0] = mat[0] * x;
        dest[1] = mat[1] * x;
        dest[2] = mat[2] * x;
        dest[3] = mat[3] * x;
        dest[4] = mat[4] * y;
        dest[5] = mat[5] * y;
        dest[6] = mat[6] * y;
        dest[7] = mat[7] * y;
        dest[8] = mat[8] * z;
        dest[9] = mat[9] * z;
        dest[10] = mat[10] * z;
        dest[11] = mat[11] * z;
        dest[12] = mat[12];
        dest[13] = mat[13];
        dest[14] = mat[14];
        dest[15] = mat[15];
        return dest;
    };

    /**
     * Rotates a matrix by the given angle around the specified axis
     * If rotating around a primary axis (X,Y,Z) one of the specialized rotation functions should be used instead for performance
     *
     * @param {mat4} mat mat4 to rotate
     * @param {number} angle Angle (in radians) to rotate
     * @param {vec3} axis vec3 representing the axis to rotate around
     * @param {mat4} [dest] mat4 receiving operation result. If not specified result is written to mat
     *
     * @returns {mat4} dest if specified, mat otherwise
     */
    mat4.rotate = function (mat, angle, axis, dest) {
        var x = axis[0], y = axis[1], z = axis[2],
            len = Math.sqrt(x * x + y * y + z * z),
            s, c, t,
            a00, a01, a02, a03,
            a10, a11, a12, a13,
            a20, a21, a22, a23,
            b00, b01, b02,
            b10, b11, b12,
            b20, b21, b22;

        if (!len) { return null; }
        if (len !== 1) {
            len = 1 / len;
            x *= len;
            y *= len;
            z *= len;
        }

        s = Math.sin(angle);
        c = Math.cos(angle);
        t = 1 - c;

        a00 = mat[0]; a01 = mat[1]; a02 = mat[2]; a03 = mat[3];
        a10 = mat[4]; a11 = mat[5]; a12 = mat[6]; a13 = mat[7];
        a20 = mat[8]; a21 = mat[9]; a22 = mat[10]; a23 = mat[11];

        // Construct the elements of the rotation matrix
        b00 = x * x * t + c; b01 = y * x * t + z * s; b02 = z * x * t - y * s;
        b10 = x * y * t - z * s; b11 = y * y * t + c; b12 = z * y * t + x * s;
        b20 = x * z * t + y * s; b21 = y * z * t - x * s; b22 = z * z * t + c;

        if (!dest) {
            dest = mat;
        } else if (mat !== dest) { // If the source and destination differ, copy the unchanged last row
            dest[12] = mat[12];
            dest[13] = mat[13];
            dest[14] = mat[14];
            dest[15] = mat[15];
        }

        // Perform rotation-specific matrix multiplication
        dest[0] = a00 * b00 + a10 * b01 + a20 * b02;
        dest[1] = a01 * b00 + a11 * b01 + a21 * b02;
        dest[2] = a02 * b00 + a12 * b01 + a22 * b02;
        dest[3] = a03 * b00 + a13 * b01 + a23 * b02;

        dest[4] = a00 * b10 + a10 * b11 + a20 * b12;
        dest[5] = a01 * b10 + a11 * b11 + a21 * b12;
        dest[6] = a02 * b10 + a12 * b11 + a22 * b12;
        dest[7] = a03 * b10 + a13 * b11 + a23 * b12;

        dest[8] = a00 * b20 + a10 * b21 + a20 * b22;
        dest[9] = a01 * b20 + a11 * b21 + a21 * b22;
        dest[10] = a02 * b20 + a12 * b21 + a22 * b22;
        dest[11] = a03 * b20 + a13 * b21 + a23 * b22;
        return dest;
    };

    /**
     * Rotates a matrix by the given angle around the X axis
     *
     * @param {mat4} mat mat4 to rotate
     * @param {number} angle Angle (in radians) to rotate
     * @param {mat4} [dest] mat4 receiving operation result. If not specified result is written to mat
     *
     * @returns {mat4} dest if specified, mat otherwise
     */
    mat4.rotateX = function (mat, angle, dest) {
        var s = Math.sin(angle),
            c = Math.cos(angle),
            a10 = mat[4],
            a11 = mat[5],
            a12 = mat[6],
            a13 = mat[7],
            a20 = mat[8],
            a21 = mat[9],
            a22 = mat[10],
            a23 = mat[11];

        if (!dest) {
            dest = mat;
        } else if (mat !== dest) { // If the source and destination differ, copy the unchanged rows
            dest[0] = mat[0];
            dest[1] = mat[1];
            dest[2] = mat[2];
            dest[3] = mat[3];

            dest[12] = mat[12];
            dest[13] = mat[13];
            dest[14] = mat[14];
            dest[15] = mat[15];
        }

        // Perform axis-specific matrix multiplication
        dest[4] = a10 * c + a20 * s;
        dest[5] = a11 * c + a21 * s;
        dest[6] = a12 * c + a22 * s;
        dest[7] = a13 * c + a23 * s;

        dest[8] = a10 * -s + a20 * c;
        dest[9] = a11 * -s + a21 * c;
        dest[10] = a12 * -s + a22 * c;
        dest[11] = a13 * -s + a23 * c;
        return dest;
    };

    /**
     * Rotates a matrix by the given angle around the Y axis
     *
     * @param {mat4} mat mat4 to rotate
     * @param {number} angle Angle (in radians) to rotate
     * @param {mat4} [dest] mat4 receiving operation result. If not specified result is written to mat
     *
     * @returns {mat4} dest if specified, mat otherwise
     */
    mat4.rotateY = function (mat, angle, dest) {
        var s = Math.sin(angle),
            c = Math.cos(angle),
            a00 = mat[0],
            a01 = mat[1],
            a02 = mat[2],
            a03 = mat[3],
            a20 = mat[8],
            a21 = mat[9],
            a22 = mat[10],
            a23 = mat[11];

        if (!dest) {
            dest = mat;
        } else if (mat !== dest) { // If the source and destination differ, copy the unchanged rows
            dest[4] = mat[4];
            dest[5] = mat[5];
            dest[6] = mat[6];
            dest[7] = mat[7];

            dest[12] = mat[12];
            dest[13] = mat[13];
            dest[14] = mat[14];
            dest[15] = mat[15];
        }

        // Perform axis-specific matrix multiplication
        dest[0] = a00 * c + a20 * -s;
        dest[1] = a01 * c + a21 * -s;
        dest[2] = a02 * c + a22 * -s;
        dest[3] = a03 * c + a23 * -s;

        dest[8] = a00 * s + a20 * c;
        dest[9] = a01 * s + a21 * c;
        dest[10] = a02 * s + a22 * c;
        dest[11] = a03 * s + a23 * c;
        return dest;
    };

    /**
     * Rotates a matrix by the given angle around the Z axis
     *
     * @param {mat4} mat mat4 to rotate
     * @param {number} angle Angle (in radians) to rotate
     * @param {mat4} [dest] mat4 receiving operation result. If not specified result is written to mat
     *
     * @returns {mat4} dest if specified, mat otherwise
     */
    mat4.rotateZ = function (mat, angle, dest) {
        var s = Math.sin(angle),
            c = Math.cos(angle),
            a00 = mat[0],
            a01 = mat[1],
            a02 = mat[2],
            a03 = mat[3],
            a10 = mat[4],
            a11 = mat[5],
            a12 = mat[6],
            a13 = mat[7];

        if (!dest) {
            dest = mat;
        } else if (mat !== dest) { // If the source and destination differ, copy the unchanged last row
            dest[8] = mat[8];
            dest[9] = mat[9];
            dest[10] = mat[10];
            dest[11] = mat[11];

            dest[12] = mat[12];
            dest[13] = mat[13];
            dest[14] = mat[14];
            dest[15] = mat[15];
        }

        // Perform axis-specific matrix multiplication
        dest[0] = a00 * c + a10 * s;
        dest[1] = a01 * c + a11 * s;
        dest[2] = a02 * c + a12 * s;
        dest[3] = a03 * c + a13 * s;

        dest[4] = a00 * -s + a10 * c;
        dest[5] = a01 * -s + a11 * c;
        dest[6] = a02 * -s + a12 * c;
        dest[7] = a03 * -s + a13 * c;

        return dest;
    };

    /**
     * Generates a frustum matrix with the given bounds
     *
     * @param {number} left Left bound of the frustum
     * @param {number} right Right bound of the frustum
     * @param {number} bottom Bottom bound of the frustum
     * @param {number} top Top bound of the frustum
     * @param {number} near Near bound of the frustum
     * @param {number} far Far bound of the frustum
     * @param {mat4} [dest] mat4 frustum matrix will be written into
     *
     * @returns {mat4} dest if specified, a new mat4 otherwise
     */
    mat4.frustum = function (left, right, bottom, top, near, far, dest) {
        if (!dest) { dest = mat4.create(); }
        var rl = (right - left),
            tb = (top - bottom),
            fn = (far - near);
        dest[0] = (near * 2) / rl;
        dest[1] = 0;
        dest[2] = 0;
        dest[3] = 0;
        dest[4] = 0;
        dest[5] = (near * 2) / tb;
        dest[6] = 0;
        dest[7] = 0;
        dest[8] = (right + left) / rl;
        dest[9] = (top + bottom) / tb;
        dest[10] = -(far + near) / fn;
        dest[11] = -1;
        dest[12] = 0;
        dest[13] = 0;
        dest[14] = -(far * near * 2) / fn;
        dest[15] = 0;
        return dest;
    };

    /**
     * Generates a perspective projection matrix with the given bounds
     *
     * @param {number} fovy Vertical field of view
     * @param {number} aspect Aspect ratio. typically viewport width/height
     * @param {number} near Near bound of the frustum
     * @param {number} far Far bound of the frustum
     * @param {mat4} [dest] mat4 frustum matrix will be written into
     *
     * @returns {mat4} dest if specified, a new mat4 otherwise
     */
    mat4.perspective = function (fovy, aspect, near, far, dest) {
        var top = near * Math.tan(fovy * Math.PI / 360.0),
            right = top * aspect;
        return mat4.frustum(-right, right, -top, top, near, far, dest);
    };

    /**
     * Generates a orthogonal projection matrix with the given bounds
     *
     * @param {number} left Left bound of the frustum
     * @param {number} right Right bound of the frustum
     * @param {number} bottom Bottom bound of the frustum
     * @param {number} top Top bound of the frustum
     * @param {number} near Near bound of the frustum
     * @param {number} far Far bound of the frustum
     * @param {mat4} [dest] mat4 frustum matrix will be written into
     *
     * @returns {mat4} dest if specified, a new mat4 otherwise
     */
    mat4.ortho = function (left, right, bottom, top, near, far, dest) {
        if (!dest) { dest = mat4.create(); }
        var rl = (right - left),
            tb = (top - bottom),
            fn = (far - near);
        dest[0] = 2 / rl;
        dest[1] = 0;
        dest[2] = 0;
        dest[3] = 0;
        dest[4] = 0;
        dest[5] = 2 / tb;
        dest[6] = 0;
        dest[7] = 0;
        dest[8] = 0;
        dest[9] = 0;
        dest[10] = -2 / fn;
        dest[11] = 0;
        dest[12] = -(left + right) / rl;
        dest[13] = -(top + bottom) / tb;
        dest[14] = -(far + near) / fn;
        dest[15] = 1;
        return dest;
    };

    /**
     * Generates a look-at matrix with the given eye position, focal point, and up axis
     *
     * @param {vec3} eye Position of the viewer
     * @param {vec3} center Point the viewer is looking at
     * @param {vec3} up vec3 pointing "up"
     * @param {mat4} [dest] mat4 frustum matrix will be written into
     *
     * @returns {mat4} dest if specified, a new mat4 otherwise
     */
    mat4.lookAt = function (eye, center, up, dest) {
        if (!dest) { dest = mat4.create(); }

        var x0, x1, x2, y0, y1, y2, z0, z1, z2, len,
            eyex = eye[0],
            eyey = eye[1],
            eyez = eye[2],
            upx = up[0],
            upy = up[1],
            upz = up[2],
            centerx = center[0],
            centery = center[1],
            centerz = center[2];

        if (eyex === centerx && eyey === centery && eyez === centerz) {
            return mat4.identity(dest);
        }

        //vec3.direction(eye, center, z);
        z0 = eyex - centerx;
        z1 = eyey - centery;
        z2 = eyez - centerz;

        // normalize (no check needed for 0 because of early return)
        len = 1 / Math.sqrt(z0 * z0 + z1 * z1 + z2 * z2);
        z0 *= len;
        z1 *= len;
        z2 *= len;

        //vec3.normalize(vec3.cross(up, z, x));
        x0 = upy * z2 - upz * z1;
        x1 = upz * z0 - upx * z2;
        x2 = upx * z1 - upy * z0;
        len = Math.sqrt(x0 * x0 + x1 * x1 + x2 * x2);
        if (!len) {
            x0 = 0;
            x1 = 0;
            x2 = 0;
        } else {
            len = 1 / len;
            x0 *= len;
            x1 *= len;
            x2 *= len;
        }

        //vec3.normalize(vec3.cross(z, x, y));
        y0 = z1 * x2 - z2 * x1;
        y1 = z2 * x0 - z0 * x2;
        y2 = z0 * x1 - z1 * x0;

        len = Math.sqrt(y0 * y0 + y1 * y1 + y2 * y2);
        if (!len) {
            y0 = 0;
            y1 = 0;
            y2 = 0;
        } else {
            len = 1 / len;
            y0 *= len;
            y1 *= len;
            y2 *= len;
        }

        dest[0] = x0;
        dest[1] = y0;
        dest[2] = z0;
        dest[3] = 0;
        dest[4] = x1;
        dest[5] = y1;
        dest[6] = z1;
        dest[7] = 0;
        dest[8] = x2;
        dest[9] = y2;
        dest[10] = z2;
        dest[11] = 0;
        dest[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);
        dest[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);
        dest[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);
        dest[15] = 1;

        return dest;
    };

    /**
     * Creates a matrix from a quaternion rotation and vector translation
     * This is equivalent to (but much faster than):
     *
     *     mat4.identity(dest);
     *     mat4.translate(dest, vec);
     *     var quatMat = mat4.create();
     *     quat4.toMat4(quat, quatMat);
     *     mat4.multiply(dest, quatMat);
     *
     * @param {quat4} quat Rotation quaternion
     * @param {vec3} vec Translation vector
     * @param {mat4} [dest] mat4 receiving operation result. If not specified result is written to a new mat4
     *
     * @returns {mat4} dest if specified, a new mat4 otherwise
     */
    mat4.fromRotationTranslation = function (quat, vec, dest) {
        if (!dest) { dest = mat4.create(); }

        // Quaternion math
        var x = quat[0], y = quat[1], z = quat[2], w = quat[3],
            x2 = x + x,
            y2 = y + y,
            z2 = z + z,

            xx = x * x2,
            xy = x * y2,
            xz = x * z2,
            yy = y * y2,
            yz = y * z2,
            zz = z * z2,
            wx = w * x2,
            wy = w * y2,
            wz = w * z2;

        dest[0] = 1 - (yy + zz);
        dest[1] = xy + wz;
        dest[2] = xz - wy;
        dest[3] = 0;
        dest[4] = xy - wz;
        dest[5] = 1 - (xx + zz);
        dest[6] = yz + wx;
        dest[7] = 0;
        dest[8] = xz + wy;
        dest[9] = yz - wx;
        dest[10] = 1 - (xx + yy);
        dest[11] = 0;
        dest[12] = vec[0];
        dest[13] = vec[1];
        dest[14] = vec[2];
        dest[15] = 1;
        
        return dest;
    };

    /**
     * Returns a string representation of a mat4
     *
     * @param {mat4} mat mat4 to represent as a string
     *
     * @returns {string} String representation of mat
     */
    mat4.str = function (mat) {
        return '[' + mat[0] + ', ' + mat[1] + ', ' + mat[2] + ', ' + mat[3] +
            ', ' + mat[4] + ', ' + mat[5] + ', ' + mat[6] + ', ' + mat[7] +
            ', ' + mat[8] + ', ' + mat[9] + ', ' + mat[10] + ', ' + mat[11] +
            ', ' + mat[12] + ', ' + mat[13] + ', ' + mat[14] + ', ' + mat[15] + ']';
    };

    /**
     * @class Quaternion
     * @name quat4
     */
    var quat4 = {};

    /**
     * Creates a new instance of a quat4 using the default array type
     * Any javascript array containing at least 4 numeric elements can serve as a quat4
     *
     * @param {quat4} [quat] quat4 containing values to initialize with
     *
     * @returns {quat4} New quat4
     */
    quat4.create = function (quat) {
        var dest = new MatrixArray(4);

        if (quat) {
            dest[0] = quat[0];
            dest[1] = quat[1];
            dest[2] = quat[2];
            dest[3] = quat[3];
        } else {
            dest[0] = dest[1] = dest[2] = dest[3] = 0;
        }

        return dest;
    };

    /**
     * Creates a new instance of a quat4, initializing it with the given arguments
     *
     * @param {number} x X value
     * @param {number} y Y value
     * @param {number} z Z value
     * @param {number} w W value

     * @returns {quat4} New quat4
     */
    quat4.createFrom = function (x, y, z, w) {
        var dest = new MatrixArray(4);

        dest[0] = x;
        dest[1] = y;
        dest[2] = z;
        dest[3] = w;

        return dest;
    };

    /**
     * Copies the values of one quat4 to another
     *
     * @param {quat4} quat quat4 containing values to copy
     * @param {quat4} dest quat4 receiving copied values
     *
     * @returns {quat4} dest
     */
    quat4.set = function (quat, dest) {
        dest[0] = quat[0];
        dest[1] = quat[1];
        dest[2] = quat[2];
        dest[3] = quat[3];

        return dest;
    };

    /**
     * Compares two quaternions for equality within a certain margin of error
     *
     * @param {quat4} a First vector
     * @param {quat4} b Second vector
     *
     * @returns {Boolean} True if a is equivalent to b
     */
    quat4.equal = function (a, b) {
        return a === b || (
            Math.abs(a[0] - b[0]) < FLOAT_EPSILON &&
            Math.abs(a[1] - b[1]) < FLOAT_EPSILON &&
            Math.abs(a[2] - b[2]) < FLOAT_EPSILON &&
            Math.abs(a[3] - b[3]) < FLOAT_EPSILON
        );
    };

    /**
     * Creates a new identity Quat4
     *
     * @param {quat4} [dest] quat4 receiving copied values
     *
     * @returns {quat4} dest is specified, new quat4 otherwise
     */
    quat4.identity = function (dest) {
        if (!dest) { dest = quat4.create(); }
        dest[0] = 0;
        dest[1] = 0;
        dest[2] = 0;
        dest[3] = 1;
        return dest;
    };

    var identityQuat4 = quat4.identity();

    /**
     * Calculates the W component of a quat4 from the X, Y, and Z components.
     * Assumes that quaternion is 1 unit in length.
     * Any existing W component will be ignored.
     *
     * @param {quat4} quat quat4 to calculate W component of
     * @param {quat4} [dest] quat4 receiving calculated values. If not specified result is written to quat
     *
     * @returns {quat4} dest if specified, quat otherwise
     */
    quat4.calculateW = function (quat, dest) {
        var x = quat[0], y = quat[1], z = quat[2];

        if (!dest || quat === dest) {
            quat[3] = -Math.sqrt(Math.abs(1.0 - x * x - y * y - z * z));
            return quat;
        }
        dest[0] = x;
        dest[1] = y;
        dest[2] = z;
        dest[3] = -Math.sqrt(Math.abs(1.0 - x * x - y * y - z * z));
        return dest;
    };

    /**
     * Calculates the dot product of two quaternions
     *
     * @param {quat4} quat First operand
     * @param {quat4} quat2 Second operand
     *
     * @return {number} Dot product of quat and quat2
     */
    quat4.dot = function(quat, quat2){
        return quat[0]*quat2[0] + quat[1]*quat2[1] + quat[2]*quat2[2] + quat[3]*quat2[3];
    };

    /**
     * Calculates the inverse of a quat4
     *
     * @param {quat4} quat quat4 to calculate inverse of
     * @param {quat4} [dest] quat4 receiving inverse values. If not specified result is written to quat
     *
     * @returns {quat4} dest if specified, quat otherwise
     */
    quat4.inverse = function(quat, dest) {
        var q0 = quat[0], q1 = quat[1], q2 = quat[2], q3 = quat[3],
            dot = q0*q0 + q1*q1 + q2*q2 + q3*q3,
            invDot = dot ? 1.0/dot : 0;
        
        // TODO: Would be faster to return [0,0,0,0] immediately if dot == 0
        
        if(!dest || quat === dest) {
            quat[0] *= -invDot;
            quat[1] *= -invDot;
            quat[2] *= -invDot;
            quat[3] *= invDot;
            return quat;
        }
        dest[0] = -quat[0]*invDot;
        dest[1] = -quat[1]*invDot;
        dest[2] = -quat[2]*invDot;
        dest[3] = quat[3]*invDot;
        return dest;
    };


    /**
     * Calculates the conjugate of a quat4
     * If the quaternion is normalized, this function is faster than quat4.inverse and produces the same result.
     *
     * @param {quat4} quat quat4 to calculate conjugate of
     * @param {quat4} [dest] quat4 receiving conjugate values. If not specified result is written to quat
     *
     * @returns {quat4} dest if specified, quat otherwise
     */
    quat4.conjugate = function (quat, dest) {
        if (!dest || quat === dest) {
            quat[0] *= -1;
            quat[1] *= -1;
            quat[2] *= -1;
            return quat;
        }
        dest[0] = -quat[0];
        dest[1] = -quat[1];
        dest[2] = -quat[2];
        dest[3] = quat[3];
        return dest;
    };

    /**
     * Calculates the length of a quat4
     *
     * Params:
     * @param {quat4} quat quat4 to calculate length of
     *
     * @returns Length of quat
     */
    quat4.length = function (quat) {
        var x = quat[0], y = quat[1], z = quat[2], w = quat[3];
        return Math.sqrt(x * x + y * y + z * z + w * w);
    };

    /**
     * Generates a unit quaternion of the same direction as the provided quat4
     * If quaternion length is 0, returns [0, 0, 0, 0]
     *
     * @param {quat4} quat quat4 to normalize
     * @param {quat4} [dest] quat4 receiving operation result. If not specified result is written to quat
     *
     * @returns {quat4} dest if specified, quat otherwise
     */
    quat4.normalize = function (quat, dest) {
        if (!dest) { dest = quat; }

        var x = quat[0], y = quat[1], z = quat[2], w = quat[3],
            len = Math.sqrt(x * x + y * y + z * z + w * w);
        if (len === 0) {
            dest[0] = 0;
            dest[1] = 0;
            dest[2] = 0;
            dest[3] = 0;
            return dest;
        }
        len = 1 / len;
        dest[0] = x * len;
        dest[1] = y * len;
        dest[2] = z * len;
        dest[3] = w * len;

        return dest;
    };

    /**
     * Performs quaternion addition
     *
     * @param {quat4} quat First operand
     * @param {quat4} quat2 Second operand
     * @param {quat4} [dest] quat4 receiving operation result. If not specified result is written to quat
     *
     * @returns {quat4} dest if specified, quat otherwise
     */
    quat4.add = function (quat, quat2, dest) {
        if(!dest || quat === dest) {
            quat[0] += quat2[0];
            quat[1] += quat2[1];
            quat[2] += quat2[2];
            quat[3] += quat2[3];
            return quat;
        }
        dest[0] = quat[0]+quat2[0];
        dest[1] = quat[1]+quat2[1];
        dest[2] = quat[2]+quat2[2];
        dest[3] = quat[3]+quat2[3];
        return dest;
    };

    /**
     * Performs a quaternion multiplication
     *
     * @param {quat4} quat First operand
     * @param {quat4} quat2 Second operand
     * @param {quat4} [dest] quat4 receiving operation result. If not specified result is written to quat
     *
     * @returns {quat4} dest if specified, quat otherwise
     */
    quat4.multiply = function (quat, quat2, dest) {
        if (!dest) { dest = quat; }

        var qax = quat[0], qay = quat[1], qaz = quat[2], qaw = quat[3],
            qbx = quat2[0], qby = quat2[1], qbz = quat2[2], qbw = quat2[3];

        dest[0] = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;
        dest[1] = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;
        dest[2] = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;
        dest[3] = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;

        return dest;
    };

    /**
     * Transforms a vec3 with the given quaternion
     *
     * @param {quat4} quat quat4 to transform the vector with
     * @param {vec3} vec vec3 to transform
     * @param {vec3} [dest] vec3 receiving operation result. If not specified result is written to vec
     *
     * @returns dest if specified, vec otherwise
     */
    quat4.multiplyVec3 = function (quat, vec, dest) {
        if (!dest) { dest = vec; }

        var x = vec[0], y = vec[1], z = vec[2],
            qx = quat[0], qy = quat[1], qz = quat[2], qw = quat[3],

            // calculate quat * vec
            ix = qw * x + qy * z - qz * y,
            iy = qw * y + qz * x - qx * z,
            iz = qw * z + qx * y - qy * x,
            iw = -qx * x - qy * y - qz * z;

        // calculate result * inverse quat
        dest[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;
        dest[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;
        dest[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;

        return dest;
    };

    /**
     * Multiplies the components of a quaternion by a scalar value
     *
     * @param {quat4} quat to scale
     * @param {number} val Value to scale by
     * @param {quat4} [dest] quat4 receiving operation result. If not specified result is written to quat
     *
     * @returns {quat4} dest if specified, quat otherwise
     */
    quat4.scale = function (quat, val, dest) {
        if(!dest || quat === dest) {
            quat[0] *= val;
            quat[1] *= val;
            quat[2] *= val;
            quat[3] *= val;
            return quat;
        }
        dest[0] = quat[0]*val;
        dest[1] = quat[1]*val;
        dest[2] = quat[2]*val;
        dest[3] = quat[3]*val;
        return dest;
    };

    /**
     * Calculates a 3x3 matrix from the given quat4
     *
     * @param {quat4} quat quat4 to create matrix from
     * @param {mat3} [dest] mat3 receiving operation result
     *
     * @returns {mat3} dest if specified, a new mat3 otherwise
     */
    quat4.toMat3 = function (quat, dest) {
        if (!dest) { dest = mat3.create(); }

        var x = quat[0], y = quat[1], z = quat[2], w = quat[3],
            x2 = x + x,
            y2 = y + y,
            z2 = z + z,

            xx = x * x2,
            xy = x * y2,
            xz = x * z2,
            yy = y * y2,
            yz = y * z2,
            zz = z * z2,
            wx = w * x2,
            wy = w * y2,
            wz = w * z2;

        dest[0] = 1 - (yy + zz);
        dest[1] = xy + wz;
        dest[2] = xz - wy;

        dest[3] = xy - wz;
        dest[4] = 1 - (xx + zz);
        dest[5] = yz + wx;

        dest[6] = xz + wy;
        dest[7] = yz - wx;
        dest[8] = 1 - (xx + yy);

        return dest;
    };

    /**
     * Calculates a 4x4 matrix from the given quat4
     *
     * @param {quat4} quat quat4 to create matrix from
     * @param {mat4} [dest] mat4 receiving operation result
     *
     * @returns {mat4} dest if specified, a new mat4 otherwise
     */
    quat4.toMat4 = function (quat, dest) {
        if (!dest) { dest = mat4.create(); }

        var x = quat[0], y = quat[1], z = quat[2], w = quat[3],
            x2 = x + x,
            y2 = y + y,
            z2 = z + z,

            xx = x * x2,
            xy = x * y2,
            xz = x * z2,
            yy = y * y2,
            yz = y * z2,
            zz = z * z2,
            wx = w * x2,
            wy = w * y2,
            wz = w * z2;

        dest[0] = 1 - (yy + zz);
        dest[1] = xy + wz;
        dest[2] = xz - wy;
        dest[3] = 0;

        dest[4] = xy - wz;
        dest[5] = 1 - (xx + zz);
        dest[6] = yz + wx;
        dest[7] = 0;

        dest[8] = xz + wy;
        dest[9] = yz - wx;
        dest[10] = 1 - (xx + yy);
        dest[11] = 0;

        dest[12] = 0;
        dest[13] = 0;
        dest[14] = 0;
        dest[15] = 1;

        return dest;
    };

    /**
     * Performs a spherical linear interpolation between two quat4
     *
     * @param {quat4} quat First quaternion
     * @param {quat4} quat2 Second quaternion
     * @param {number} slerp Interpolation amount between the two inputs
     * @param {quat4} [dest] quat4 receiving operation result. If not specified result is written to quat
     *
     * @returns {quat4} dest if specified, quat otherwise
     */
    quat4.slerp = function (quat, quat2, slerp, dest) {
        if (!dest) { dest = quat; }

        var cosHalfTheta = quat[0] * quat2[0] + quat[1] * quat2[1] + quat[2] * quat2[2] + quat[3] * quat2[3],
            halfTheta,
            sinHalfTheta,
            ratioA,
            ratioB;

        if (Math.abs(cosHalfTheta) >= 1.0) {
            if (dest !== quat) {
                dest[0] = quat[0];
                dest[1] = quat[1];
                dest[2] = quat[2];
                dest[3] = quat[3];
            }
            return dest;
        }

        halfTheta = Math.acos(cosHalfTheta);
        sinHalfTheta = Math.sqrt(1.0 - cosHalfTheta * cosHalfTheta);

        if (Math.abs(sinHalfTheta) < 0.001) {
            dest[0] = (quat[0] * 0.5 + quat2[0] * 0.5);
            dest[1] = (quat[1] * 0.5 + quat2[1] * 0.5);
            dest[2] = (quat[2] * 0.5 + quat2[2] * 0.5);
            dest[3] = (quat[3] * 0.5 + quat2[3] * 0.5);
            return dest;
        }

        ratioA = Math.sin((1 - slerp) * halfTheta) / sinHalfTheta;
        ratioB = Math.sin(slerp * halfTheta) / sinHalfTheta;

        dest[0] = (quat[0] * ratioA + quat2[0] * ratioB);
        dest[1] = (quat[1] * ratioA + quat2[1] * ratioB);
        dest[2] = (quat[2] * ratioA + quat2[2] * ratioB);
        dest[3] = (quat[3] * ratioA + quat2[3] * ratioB);

        return dest;
    };

    /**
     * Creates a quaternion from the given 3x3 rotation matrix.
     * If dest is omitted, a new quaternion will be created.
     *
     * @param {mat3}  mat    the rotation matrix
     * @param {quat4} [dest] an optional receiving quaternion
     *
     * @returns {quat4} the quaternion constructed from the rotation matrix
     *
     */
    quat4.fromRotationMatrix = function(mat, dest) {
        if (!dest) dest = quat4.create();
        
        // Algorithm in Ken Shoemake's article in 1987 SIGGRAPH course notes
        // article "Quaternion Calculus and Fast Animation".

        var fTrace = mat[0] + mat[4] + mat[8];
        var fRoot;

        if ( fTrace > 0.0 ) {
            // |w| > 1/2, may as well choose w > 1/2
            fRoot = Math.sqrt(fTrace + 1.0);  // 2w
            dest[3] = 0.5 * fRoot;
            fRoot = 0.5/fRoot;  // 1/(4w)
            dest[0] = (mat[7]-mat[5])*fRoot;
            dest[1] = (mat[2]-mat[6])*fRoot;
            dest[2] = (mat[3]-mat[1])*fRoot;
        } else {
            // |w| <= 1/2
            var s_iNext = quat4.fromRotationMatrix.s_iNext = quat4.fromRotationMatrix.s_iNext || [1,2,0];
            var i = 0;
            if ( mat[4] > mat[0] )
              i = 1;
            if ( mat[8] > mat[i*3+i] )
              i = 2;
            var j = s_iNext[i];
            var k = s_iNext[j];
            
            fRoot = Math.sqrt(mat[i*3+i]-mat[j*3+j]-mat[k*3+k] + 1.0);
            dest[i] = 0.5 * fRoot;
            fRoot = 0.5 / fRoot;
            dest[3] = (mat[k*3+j] - mat[j*3+k]) * fRoot;
            dest[j] = (mat[j*3+i] + mat[i*3+j]) * fRoot;
            dest[k] = (mat[k*3+i] + mat[i*3+k]) * fRoot;
        }
        
        return dest;
    };

    /**
     * Alias. See the description for quat4.fromRotationMatrix().
     */
    mat3.toQuat4 = quat4.fromRotationMatrix;

    (function() {
        var mat = mat3.create();
        
        /**
         * Creates a quaternion from the 3 given vectors. They must be perpendicular
         * to one another and represent the X, Y and Z axes.
         *
         * If dest is omitted, a new quat4 will be created.
         *
         * Example: The default OpenGL orientation has a view vector [0, 0, -1],
         * right vector [1, 0, 0], and up vector [0, 1, 0]. A quaternion representing
         * this orientation could be constructed with:
         *
         *   quat = quat4.fromAxes([0, 0, -1], [1, 0, 0], [0, 1, 0], quat4.create());
         *
         * @param {vec3}  view   the view vector, or direction the object is pointing in
         * @param {vec3}  right  the right vector, or direction to the "right" of the object
         * @param {vec3}  up     the up vector, or direction towards the object's "up"
         * @param {quat4} [dest] an optional receiving quat4
         *
         * @returns {quat4} dest
         **/
        quat4.fromAxes = function(view, right, up, dest) {
            mat[0] = right[0];
            mat[3] = right[1];
            mat[6] = right[2];

            mat[1] = up[0];
            mat[4] = up[1];
            mat[7] = up[2];

            mat[2] = view[0];
            mat[5] = view[1];
            mat[8] = view[2];

            return quat4.fromRotationMatrix(mat, dest);
        };
    })();

    /**
     * Sets a quat4 to the Identity and returns it.
     *
     * @param {quat4} [dest] quat4 to set. If omitted, a
     * new quat4 will be created.
     *
     * @returns {quat4} dest
     */
    quat4.identity = function(dest) {
        if (!dest) dest = quat4.create();
        dest[0] = 0;
        dest[1] = 0;
        dest[2] = 0;
        dest[3] = 1;
        return dest;
    };

    /**
     * Sets a quat4 from the given angle and rotation axis,
     * then returns it. If dest is not given, a new quat4 is created.
     *
     * @param {Number} angle  the angle in radians
     * @param {vec3}   axis   the axis around which to rotate
     * @param {quat4}  [dest] the optional quat4 to store the result
     *
     * @returns {quat4} dest
     **/
    quat4.fromAngleAxis = function(angle, axis, dest) {
        // The quaternion representing the rotation is
        //   q = cos(A/2)+sin(A/2)*(x*i+y*j+z*k)
        if (!dest) dest = quat4.create();
        
        var half = angle * 0.5;
        var s = Math.sin(half);
        dest[3] = Math.cos(half);
        dest[0] = s * axis[0];
        dest[1] = s * axis[1];
        dest[2] = s * axis[2];
        
        return dest;
    };

    /**
     * Stores the angle and axis in a vec4, where the XYZ components represent
     * the axis and the W (4th) component is the angle in radians.
     *
     * If dest is not given, src will be modified in place and returned, after
     * which it should not be considered not a quaternion (just an axis and angle).
     *
     * @param {quat4} quat   the quaternion whose angle and axis to store
     * @param {vec4}  [dest] the optional vec4 to receive the data
     *
     * @returns {vec4} dest
     */
    quat4.toAngleAxis = function(src, dest) {
        if (!dest) dest = src;
        // The quaternion representing the rotation is
        //   q = cos(A/2)+sin(A/2)*(x*i+y*j+z*k)

        var sqrlen = src[0]*src[0]+src[1]*src[1]+src[2]*src[2];
        if (sqrlen > 0)
        {
            dest[3] = 2 * Math.acos(src[3]);
            var invlen = glMath.invsqrt(sqrlen);
            dest[0] = src[0]*invlen;
            dest[1] = src[1]*invlen;
            dest[2] = src[2]*invlen;
        } else {
            // angle is 0 (mod 2*pi), so any axis will do
            dest[3] = 0;
            dest[0] = 1;
            dest[1] = 0;
            dest[2] = 0;
        }
        
        return dest;
    };

    /**
     * Returns a string representation of a quaternion
     *
     * @param {quat4} quat quat4 to represent as a string
     *
     * @returns {string} String representation of quat
     */
    quat4.str = function (quat) {
        return '[' + quat[0] + ', ' + quat[1] + ', ' + quat[2] + ', ' + quat[3] + ']';
    };
    
    /**
     * @class 2 Dimensional Vector
     * @name vec2
     */
    var vec2 = {};
     
    /**
     * Creates a new vec2, initializing it from vec if vec
     * is given.
     *
     * @param {vec2} [vec] the vector's initial contents
     * @returns {vec2} a new 2D vector
     */
    vec2.create = function(vec) {
        var dest = new MatrixArray(2);

        if (vec) {
            dest[0] = vec[0];
            dest[1] = vec[1];
        } else {
            dest[0] = 0;
            dest[1] = 0;
        }
        return dest;
    };

    /**
     * Creates a new instance of a vec2, initializing it with the given arguments
     *
     * @param {number} x X value
     * @param {number} y Y value

     * @returns {vec2} New vec2
     */
    vec2.createFrom = function (x, y) {
        var dest = new MatrixArray(2);

        dest[0] = x;
        dest[1] = y;

        return dest;
    };
    
    /**
     * Adds the vec2's together. If dest is given, the result
     * is stored there. Otherwise, the result is stored in vecB.
     *
     * @param {vec2} vecA the first operand
     * @param {vec2} vecB the second operand
     * @param {vec2} [dest] the optional receiving vector
     * @returns {vec2} dest
     */
    vec2.add = function(vecA, vecB, dest) {
        if (!dest) dest = vecB;
        dest[0] = vecA[0] + vecB[0];
        dest[1] = vecA[1] + vecB[1];
        return dest;
    };
    
    /**
     * Subtracts vecB from vecA. If dest is given, the result
     * is stored there. Otherwise, the result is stored in vecB.
     *
     * @param {vec2} vecA the first operand
     * @param {vec2} vecB the second operand
     * @param {vec2} [dest] the optional receiving vector
     * @returns {vec2} dest
     */
    vec2.subtract = function(vecA, vecB, dest) {
        if (!dest) dest = vecB;
        dest[0] = vecA[0] - vecB[0];
        dest[1] = vecA[1] - vecB[1];
        return dest;
    };
    
    /**
     * Multiplies vecA with vecB. If dest is given, the result
     * is stored there. Otherwise, the result is stored in vecB.
     *
     * @param {vec2} vecA the first operand
     * @param {vec2} vecB the second operand
     * @param {vec2} [dest] the optional receiving vector
     * @returns {vec2} dest
     */
    vec2.multiply = function(vecA, vecB, dest) {
        if (!dest) dest = vecB;
        dest[0] = vecA[0] * vecB[0];
        dest[1] = vecA[1] * vecB[1];
        return dest;
    };
    
    /**
     * Divides vecA by vecB. If dest is given, the result
     * is stored there. Otherwise, the result is stored in vecB.
     *
     * @param {vec2} vecA the first operand
     * @param {vec2} vecB the second operand
     * @param {vec2} [dest] the optional receiving vector
     * @returns {vec2} dest
     */
    vec2.divide = function(vecA, vecB, dest) {
        if (!dest) dest = vecB;
        dest[0] = vecA[0] / vecB[0];
        dest[1] = vecA[1] / vecB[1];
        return dest;
    };
    
    /**
     * Scales vecA by some scalar number. If dest is given, the result
     * is stored there. Otherwise, the result is stored in vecA.
     *
     * This is the same as multiplying each component of vecA
     * by the given scalar.
     *
     * @param {vec2}   vecA the vector to be scaled
     * @param {Number} scalar the amount to scale the vector by
     * @param {vec2}   [dest] the optional receiving vector
     * @returns {vec2} dest
     */
    vec2.scale = function(vecA, scalar, dest) {
        if (!dest) dest = vecA;
        dest[0] = vecA[0] * scalar;
        dest[1] = vecA[1] * scalar;
        return dest;
    };

    /**
     * Calculates the euclidian distance between two vec2
     *
     * Params:
     * @param {vec2} vecA First vector
     * @param {vec2} vecB Second vector
     *
     * @returns {number} Distance between vecA and vecB
     */
    vec2.dist = function (vecA, vecB) {
        var x = vecB[0] - vecA[0],
            y = vecB[1] - vecA[1];
        return Math.sqrt(x*x + y*y);
    };

    /**
     * Copies the values of one vec2 to another
     *
     * @param {vec2} vec vec2 containing values to copy
     * @param {vec2} dest vec2 receiving copied values
     *
     * @returns {vec2} dest
     */
    vec2.set = function (vec, dest) {
        dest[0] = vec[0];
        dest[1] = vec[1];
        return dest;
    };

    /**
     * Compares two vectors for equality within a certain margin of error
     *
     * @param {vec2} a First vector
     * @param {vec2} b Second vector
     *
     * @returns {Boolean} True if a is equivalent to b
     */
    vec2.equal = function (a, b) {
        return a === b || (
            Math.abs(a[0] - b[0]) < FLOAT_EPSILON &&
            Math.abs(a[1] - b[1]) < FLOAT_EPSILON
        );
    };

    /**
     * Negates the components of a vec2
     *
     * @param {vec2} vec vec2 to negate
     * @param {vec2} [dest] vec2 receiving operation result. If not specified result is written to vec
     *
     * @returns {vec2} dest if specified, vec otherwise
     */
    vec2.negate = function (vec, dest) {
        if (!dest) { dest = vec; }
        dest[0] = -vec[0];
        dest[1] = -vec[1];
        return dest;
    };

    /**
     * Normlize a vec2
     *
     * @param {vec2} vec vec2 to normalize
     * @param {vec2} [dest] vec2 receiving operation result. If not specified result is written to vec
     *
     * @returns {vec2} dest if specified, vec otherwise
     */
    vec2.normalize = function (vec, dest) {
        if (!dest) { dest = vec; }
        var mag = vec[0] * vec[0] + vec[1] * vec[1];
        if (mag > 0) {
            mag = Math.sqrt(mag);
            dest[0] = vec[0] / mag;
            dest[1] = vec[1] / mag;
        } else {
            dest[0] = dest[1] = 0;
        }
        return dest;
    };

    /**
     * Computes the cross product of two vec2's. Note that the cross product must by definition
     * produce a 3D vector. If a dest vector is given, it will contain the resultant 3D vector.
     * Otherwise, a scalar number will be returned, representing the vector's Z coordinate, since
     * its X and Y must always equal 0.
     *
     * Examples:
     *    var crossResult = vec3.create();
     *    vec2.cross([1, 2], [3, 4], crossResult);
     *    //=> [0, 0, -2]
     *
     *    vec2.cross([1, 2], [3, 4]);
     *    //=> -2
     *
     * See http://stackoverflow.com/questions/243945/calculating-a-2d-vectors-cross-product
     * for some interesting facts.
     *
     * @param {vec2} vecA left operand
     * @param {vec2} vecB right operand
     * @param {vec2} [dest] optional vec2 receiving result. If not specified a scalar is returned
     *
     */
    vec2.cross = function (vecA, vecB, dest) {
        var z = vecA[0] * vecB[1] - vecA[1] * vecB[0];
        if (!dest) return z;
        dest[0] = dest[1] = 0;
        dest[2] = z;
        return dest;
    };
    
    /**
     * Caclulates the length of a vec2
     *
     * @param {vec2} vec vec2 to calculate length of
     *
     * @returns {Number} Length of vec
     */
    vec2.length = function (vec) {
      var x = vec[0], y = vec[1];
      return Math.sqrt(x * x + y * y);
    };

    /**
     * Caclulates the squared length of a vec2
     *
     * @param {vec2} vec vec2 to calculate squared length of
     *
     * @returns {Number} Squared Length of vec
     */
    vec2.squaredLength = function (vec) {
      var x = vec[0], y = vec[1];
      return x * x + y * y;
    };

    /**
     * Caclulates the dot product of two vec2s
     *
     * @param {vec2} vecA First operand
     * @param {vec2} vecB Second operand
     *
     * @returns {Number} Dot product of vecA and vecB
     */
    vec2.dot = function (vecA, vecB) {
        return vecA[0] * vecB[0] + vecA[1] * vecB[1];
    };
    
    /**
     * Generates a 2D unit vector pointing from one vector to another
     *
     * @param {vec2} vecA Origin vec2
     * @param {vec2} vecB vec2 to point to
     * @param {vec2} [dest] vec2 receiving operation result. If not specified result is written to vecA
     *
     * @returns {vec2} dest if specified, vecA otherwise
     */
    vec2.direction = function (vecA, vecB, dest) {
        if (!dest) { dest = vecA; }

        var x = vecA[0] - vecB[0],
            y = vecA[1] - vecB[1],
            len = x * x + y * y;

        if (!len) {
            dest[0] = 0;
            dest[1] = 0;
            dest[2] = 0;
            return dest;
        }

        len = 1 / Math.sqrt(len);
        dest[0] = x * len;
        dest[1] = y * len;
        return dest;
    };

    /**
     * Performs a linear interpolation between two vec2
     *
     * @param {vec2} vecA First vector
     * @param {vec2} vecB Second vector
     * @param {Number} lerp Interpolation amount between the two inputs
     * @param {vec2} [dest] vec2 receiving operation result. If not specified result is written to vecA
     *
     * @returns {vec2} dest if specified, vecA otherwise
     */
    vec2.lerp = function (vecA, vecB, lerp, dest) {
        if (!dest) { dest = vecA; }
        dest[0] = vecA[0] + lerp * (vecB[0] - vecA[0]);
        dest[1] = vecA[1] + lerp * (vecB[1] - vecA[1]);
        return dest;
    };

    /**
     * Returns a string representation of a vector
     *
     * @param {vec2} vec Vector to represent as a string
     *
     * @returns {String} String representation of vec
     */
    vec2.str = function (vec) {
        return '[' + vec[0] + ', ' + vec[1] + ']';
    };
    
    /**
     * @class 2x2 Matrix
     * @name mat2
     */
    var mat2 = {};
    
    /**
     * Creates a new 2x2 matrix. If src is given, the new matrix
     * is initialized to those values.
     *
     * @param {mat2} [src] the seed values for the new matrix, if any
     * @returns {mat2} a new matrix
     */
    mat2.create = function(src) {
        var dest = new MatrixArray(4);
        
        if (src) {
            dest[0] = src[0];
            dest[1] = src[1];
            dest[2] = src[2];
            dest[3] = src[3];
        } else {
            dest[0] = dest[1] = dest[2] = dest[3] = 0;
        }
        return dest;
    };

    /**
     * Creates a new instance of a mat2, initializing it with the given arguments
     *
     * @param {number} m00
     * @param {number} m01
     * @param {number} m10
     * @param {number} m11

     * @returns {mat2} New mat2
     */
    mat2.createFrom = function (m00, m01, m10, m11) {
        var dest = new MatrixArray(4);

        dest[0] = m00;
        dest[1] = m01;
        dest[2] = m10;
        dest[3] = m11;

        return dest;
    };
    
    /**
     * Copies the values of one mat2 to another
     *
     * @param {mat2} mat mat2 containing values to copy
     * @param {mat2} dest mat2 receiving copied values
     *
     * @returns {mat2} dest
     */
    mat2.set = function (mat, dest) {
        dest[0] = mat[0];
        dest[1] = mat[1];
        dest[2] = mat[2];
        dest[3] = mat[3];
        return dest;
    };

    /**
     * Compares two matrices for equality within a certain margin of error
     *
     * @param {mat2} a First matrix
     * @param {mat2} b Second matrix
     *
     * @returns {Boolean} True if a is equivalent to b
     */
    mat2.equal = function (a, b) {
        return a === b || (
            Math.abs(a[0] - b[0]) < FLOAT_EPSILON &&
            Math.abs(a[1] - b[1]) < FLOAT_EPSILON &&
            Math.abs(a[2] - b[2]) < FLOAT_EPSILON &&
            Math.abs(a[3] - b[3]) < FLOAT_EPSILON
        );
    };

    /**
     * Sets a mat2 to an identity matrix
     *
     * @param {mat2} [dest] mat2 to set. If omitted a new one will be created.
     *
     * @returns {mat2} dest
     */
    mat2.identity = function (dest) {
        if (!dest) { dest = mat2.create(); }
        dest[0] = 1;
        dest[1] = 0;
        dest[2] = 0;
        dest[3] = 1;
        return dest;
    };

    /**
     * Transposes a mat2 (flips the values over the diagonal)
     *
     * @param {mat2} mat mat2 to transpose
     * @param {mat2} [dest] mat2 receiving transposed values. If not specified result is written to mat
     *
     * @param {mat2} dest if specified, mat otherwise
     */
    mat2.transpose = function (mat, dest) {
        // If we are transposing ourselves we can skip a few steps but have to cache some values
        if (!dest || mat === dest) {
            var a00 = mat[1];
            mat[1] = mat[2];
            mat[2] = a00;
            return mat;
        }
        
        dest[0] = mat[0];
        dest[1] = mat[2];
        dest[2] = mat[1];
        dest[3] = mat[3];
        return dest;
    };

    /**
     * Calculates the determinant of a mat2
     *
     * @param {mat2} mat mat2 to calculate determinant of
     *
     * @returns {Number} determinant of mat
     */
    mat2.determinant = function (mat) {
      return mat[0] * mat[3] - mat[2] * mat[1];
    };
    
    /**
     * Calculates the inverse matrix of a mat2
     *
     * @param {mat2} mat mat2 to calculate inverse of
     * @param {mat2} [dest] mat2 receiving inverse matrix. If not specified result is written to mat
     *
     * @param {mat2} dest is specified, mat otherwise, null if matrix cannot be inverted
     */
    mat2.inverse = function (mat, dest) {
        if (!dest) { dest = mat; }
        var a0 = mat[0], a1 = mat[1], a2 = mat[2], a3 = mat[3];
        var det = a0 * a3 - a2 * a1;
        if (!det) return null;
        
        det = 1.0 / det;
        dest[0] =  a3 * det;
        dest[1] = -a1 * det;
        dest[2] = -a2 * det;
        dest[3] =  a0 * det;
        return dest;
    };
    
    /**
     * Performs a matrix multiplication
     *
     * @param {mat2} matA First operand
     * @param {mat2} matB Second operand
     * @param {mat2} [dest] mat2 receiving operation result. If not specified result is written to matA
     *
     * @returns {mat2} dest if specified, matA otherwise
     */
    mat2.multiply = function (matA, matB, dest) {
        if (!dest) { dest = matA; }
        var a11 = matA[0],
            a12 = matA[1],
            a21 = matA[2],
            a22 = matA[3];
        dest[0] = a11 * matB[0] + a12 * matB[2];
        dest[1] = a11 * matB[1] + a12 * matB[3];
        dest[2] = a21 * matB[0] + a22 * matB[2];
        dest[3] = a21 * matB[1] + a22 * matB[3];
        return dest;
    };

    /**
     * Rotates a 2x2 matrix by an angle
     *
     * @param {mat2}   mat   The matrix to rotate
     * @param {Number} angle The angle in radians
     * @param {mat2} [dest]  Optional mat2 receiving the result. If omitted mat will be used.
     *
     * @returns {mat2} dest if specified, mat otherwise
     */
    mat2.rotate = function (mat, angle, dest) {
        if (!dest) { dest = mat; }
        var a11 = mat[0],
            a12 = mat[1],
            a21 = mat[2],
            a22 = mat[3],
            s = Math.sin(angle),
            c = Math.cos(angle);
        dest[0] = a11 *  c + a12 * s;
        dest[1] = a11 * -s + a12 * c;
        dest[2] = a21 *  c + a22 * s;
        dest[3] = a21 * -s + a22 * c;
        return dest;
    };

    /**
     * Multiplies the vec2 by the given 2x2 matrix
     *
     * @param {mat2} matrix the 2x2 matrix to multiply against
     * @param {vec2} vec    the vector to multiply
     * @param {vec2} [dest] an optional receiving vector. If not given, vec is used.
     *
     * @returns {vec2} The multiplication result
     **/
    mat2.multiplyVec2 = function(matrix, vec, dest) {
      if (!dest) dest = vec;
      var x = vec[0], y = vec[1];
      dest[0] = x * matrix[0] + y * matrix[1];
      dest[1] = x * matrix[2] + y * matrix[3];
      return dest;
    };
    
    /**
     * Scales the mat2 by the dimensions in the given vec2
     *
     * @param {mat2} matrix the 2x2 matrix to scale
     * @param {vec2} vec    the vector containing the dimensions to scale by
     * @param {vec2} [dest] an optional receiving mat2. If not given, matrix is used.
     *
     * @returns {mat2} dest if specified, matrix otherwise
     **/
    mat2.scale = function(matrix, vec, dest) {
      if (!dest) { dest = matrix; }
      var a11 = matrix[0],
          a12 = matrix[1],
          a21 = matrix[2],
          a22 = matrix[3],
          b11 = vec[0],
          b22 = vec[1];
      dest[0] = a11 * b11;
      dest[1] = a12 * b22;
      dest[2] = a21 * b11;
      dest[3] = a22 * b22;
      return dest;
    };

    /**
     * Returns a string representation of a mat2
     *
     * @param {mat2} mat mat2 to represent as a string
     *
     * @param {String} String representation of mat
     */
    mat2.str = function (mat) {
        return '[' + mat[0] + ', ' + mat[1] + ', ' + mat[2] + ', ' + mat[3] + ']';
    };
    
    /**
     * @class 4 Dimensional Vector
     * @name vec4
     */
    var vec4 = {};
     
    /**
     * Creates a new vec4, initializing it from vec if vec
     * is given.
     *
     * @param {vec4} [vec] the vector's initial contents
     * @returns {vec4} a new 2D vector
     */
    vec4.create = function(vec) {
        var dest = new MatrixArray(4);
        
        if (vec) {
            dest[0] = vec[0];
            dest[1] = vec[1];
            dest[2] = vec[2];
            dest[3] = vec[3];
        } else {
            dest[0] = 0;
            dest[1] = 0;
            dest[2] = 0;
            dest[3] = 0;
        }
        return dest;
    };

    /**
     * Creates a new instance of a vec4, initializing it with the given arguments
     *
     * @param {number} x X value
     * @param {number} y Y value
     * @param {number} z Z value
     * @param {number} w W value

     * @returns {vec4} New vec4
     */
    vec4.createFrom = function (x, y, z, w) {
        var dest = new MatrixArray(4);

        dest[0] = x;
        dest[1] = y;
        dest[2] = z;
        dest[3] = w;

        return dest;
    };
    
    /**
     * Adds the vec4's together. If dest is given, the result
     * is stored there. Otherwise, the result is stored in vecB.
     *
     * @param {vec4} vecA the first operand
     * @param {vec4} vecB the second operand
     * @param {vec4} [dest] the optional receiving vector
     * @returns {vec4} dest
     */
    vec4.add = function(vecA, vecB, dest) {
      if (!dest) dest = vecB;
      dest[0] = vecA[0] + vecB[0];
      dest[1] = vecA[1] + vecB[1];
      dest[2] = vecA[2] + vecB[2];
      dest[3] = vecA[3] + vecB[3];
      return dest;
    };
    
    /**
     * Subtracts vecB from vecA. If dest is given, the result
     * is stored there. Otherwise, the result is stored in vecB.
     *
     * @param {vec4} vecA the first operand
     * @param {vec4} vecB the second operand
     * @param {vec4} [dest] the optional receiving vector
     * @returns {vec4} dest
     */
    vec4.subtract = function(vecA, vecB, dest) {
      if (!dest) dest = vecB;
      dest[0] = vecA[0] - vecB[0];
      dest[1] = vecA[1] - vecB[1];
      dest[2] = vecA[2] - vecB[2];
      dest[3] = vecA[3] - vecB[3];
      return dest;
    };
    
    /**
     * Multiplies vecA with vecB. If dest is given, the result
     * is stored there. Otherwise, the result is stored in vecB.
     *
     * @param {vec4} vecA the first operand
     * @param {vec4} vecB the second operand
     * @param {vec4} [dest] the optional receiving vector
     * @returns {vec4} dest
     */
    vec4.multiply = function(vecA, vecB, dest) {
      if (!dest) dest = vecB;
      dest[0] = vecA[0] * vecB[0];
      dest[1] = vecA[1] * vecB[1];
      dest[2] = vecA[2] * vecB[2];
      dest[3] = vecA[3] * vecB[3];
      return dest;
    };
    
    /**
     * Divides vecA by vecB. If dest is given, the result
     * is stored there. Otherwise, the result is stored in vecB.
     *
     * @param {vec4} vecA the first operand
     * @param {vec4} vecB the second operand
     * @param {vec4} [dest] the optional receiving vector
     * @returns {vec4} dest
     */
    vec4.divide = function(vecA, vecB, dest) {
      if (!dest) dest = vecB;
      dest[0] = vecA[0] / vecB[0];
      dest[1] = vecA[1] / vecB[1];
      dest[2] = vecA[2] / vecB[2];
      dest[3] = vecA[3] / vecB[3];
      return dest;
    };
    
    /**
     * Scales vecA by some scalar number. If dest is given, the result
     * is stored there. Otherwise, the result is stored in vecA.
     *
     * This is the same as multiplying each component of vecA
     * by the given scalar.
     *
     * @param {vec4}   vecA the vector to be scaled
     * @param {Number} scalar the amount to scale the vector by
     * @param {vec4}   [dest] the optional receiving vector
     * @returns {vec4} dest
     */
    vec4.scale = function(vecA, scalar, dest) {
      if (!dest) dest = vecA;
      dest[0] = vecA[0] * scalar;
      dest[1] = vecA[1] * scalar;
      dest[2] = vecA[2] * scalar;
      dest[3] = vecA[3] * scalar;
      return dest;
    };

    /**
     * Copies the values of one vec4 to another
     *
     * @param {vec4} vec vec4 containing values to copy
     * @param {vec4} dest vec4 receiving copied values
     *
     * @returns {vec4} dest
     */
    vec4.set = function (vec, dest) {
        dest[0] = vec[0];
        dest[1] = vec[1];
        dest[2] = vec[2];
        dest[3] = vec[3];
        return dest;
    };

    /**
     * Compares two vectors for equality within a certain margin of error
     *
     * @param {vec4} a First vector
     * @param {vec4} b Second vector
     *
     * @returns {Boolean} True if a is equivalent to b
     */
    vec4.equal = function (a, b) {
        return a === b || (
            Math.abs(a[0] - b[0]) < FLOAT_EPSILON &&
            Math.abs(a[1] - b[1]) < FLOAT_EPSILON &&
            Math.abs(a[2] - b[2]) < FLOAT_EPSILON &&
            Math.abs(a[3] - b[3]) < FLOAT_EPSILON
        );
    };

    /**
     * Negates the components of a vec4
     *
     * @param {vec4} vec vec4 to negate
     * @param {vec4} [dest] vec4 receiving operation result. If not specified result is written to vec
     *
     * @returns {vec4} dest if specified, vec otherwise
     */
    vec4.negate = function (vec, dest) {
        if (!dest) { dest = vec; }
        dest[0] = -vec[0];
        dest[1] = -vec[1];
        dest[2] = -vec[2];
        dest[3] = -vec[3];
        return dest;
    };

    /**
     * Caclulates the length of a vec2
     *
     * @param {vec2} vec vec2 to calculate length of
     *
     * @returns {Number} Length of vec
     */
    vec4.length = function (vec) {
      var x = vec[0], y = vec[1], z = vec[2], w = vec[3];
      return Math.sqrt(x * x + y * y + z * z + w * w);
    };

    /**
     * Caclulates the squared length of a vec4
     *
     * @param {vec4} vec vec4 to calculate squared length of
     *
     * @returns {Number} Squared Length of vec
     */
    vec4.squaredLength = function (vec) {
      var x = vec[0], y = vec[1], z = vec[2], w = vec[3];
      return x * x + y * y + z * z + w * w;
    };

    /**
     * Performs a linear interpolation between two vec4
     *
     * @param {vec4} vecA First vector
     * @param {vec4} vecB Second vector
     * @param {Number} lerp Interpolation amount between the two inputs
     * @param {vec4} [dest] vec4 receiving operation result. If not specified result is written to vecA
     *
     * @returns {vec4} dest if specified, vecA otherwise
     */
    vec4.lerp = function (vecA, vecB, lerp, dest) {
        if (!dest) { dest = vecA; }
        dest[0] = vecA[0] + lerp * (vecB[0] - vecA[0]);
        dest[1] = vecA[1] + lerp * (vecB[1] - vecA[1]);
        dest[2] = vecA[2] + lerp * (vecB[2] - vecA[2]);
        dest[3] = vecA[3] + lerp * (vecB[3] - vecA[3]);
        return dest;
    };

    /**
     * Returns a string representation of a vector
     *
     * @param {vec4} vec Vector to represent as a string
     *
     * @returns {String} String representation of vec
     */
    vec4.str = function (vec) {
        return '[' + vec[0] + ', ' + vec[1] + ', ' + vec[2] + ', ' + vec[3] + ']';
    };

    /*
     * Exports
     */

    if(root) {
        root.glMatrixArrayType = MatrixArray;
        root.MatrixArray = MatrixArray;
        root.setMatrixArrayType = setMatrixArrayType;
        root.determineMatrixArrayType = determineMatrixArrayType;
        root.glMath = glMath;
        root.vec2 = vec2;
        root.vec3 = vec3;
        root.vec4 = vec4;
        root.mat2 = mat2;
        root.mat3 = mat3;
        root.mat4 = mat4;
        root.quat4 = quat4;
    }

    return {
        glMatrixArrayType: MatrixArray,
        MatrixArray: MatrixArray,
        setMatrixArrayType: setMatrixArrayType,
        determineMatrixArrayType: determineMatrixArrayType,
        glMath: glMath,
        vec2: vec2,
        vec3: vec3,
        vec4: vec4,
        mat2: mat2,
        mat3: mat3,
        mat4: mat4,
        quat4: quat4
    };
}));

/*global vec3: true, mat4: true */

define('common/qmath', ['glmatrix'], function (glmatrix) {

var vec3origin  = vec3.create();
var axisDefault = [
	vec3.createFrom(1, 0, 0),
	vec3.createFrom(0, 1, 0 ),
	vec3.createFrom(0, 0, 1)
];

var bytedirs = [
	[-0.525731, 0.000000, 0.850651], [-0.442863, 0.238856, 0.864188],
	[-0.295242, 0.000000, 0.955423], [-0.309017, 0.500000, 0.809017],
	[-0.162460, 0.262866, 0.951056], [0.000000, 0.000000, 1.000000],
	[0.000000, 0.850651, 0.525731], [-0.147621, 0.716567, 0.681718],
	[0.147621, 0.716567, 0.681718], [0.000000, 0.525731, 0.850651],
	[0.309017, 0.500000, 0.809017], [0.525731, 0.000000, 0.850651],
	[0.295242, 0.000000, 0.955423], [0.442863, 0.238856, 0.864188],
	[0.162460, 0.262866, 0.951056], [-0.681718, 0.147621, 0.716567],
	[-0.809017, 0.309017, 0.500000],[-0.587785, 0.425325, 0.688191],
	[-0.850651, 0.525731, 0.000000],[-0.864188, 0.442863, 0.238856],
	[-0.716567, 0.681718, 0.147621],[-0.688191, 0.587785, 0.425325],
	[-0.500000, 0.809017, 0.309017], [-0.238856, 0.864188, 0.442863],
	[-0.425325, 0.688191, 0.587785], [-0.716567, 0.681718, -0.147621],
	[-0.500000, 0.809017, -0.309017], [-0.525731, 0.850651, 0.000000],
	[0.000000, 0.850651, -0.525731], [-0.238856, 0.864188, -0.442863],
	[0.000000, 0.955423, -0.295242], [-0.262866, 0.951056, -0.162460],
	[0.000000, 1.000000, 0.000000], [0.000000, 0.955423, 0.295242],
	[-0.262866, 0.951056, 0.162460], [0.238856, 0.864188, 0.442863],
	[0.262866, 0.951056, 0.162460], [0.500000, 0.809017, 0.309017],
	[0.238856, 0.864188, -0.442863],[0.262866, 0.951056, -0.162460],
	[0.500000, 0.809017, -0.309017],[0.850651, 0.525731, 0.000000],
	[0.716567, 0.681718, 0.147621], [0.716567, 0.681718, -0.147621],
	[0.525731, 0.850651, 0.000000], [0.425325, 0.688191, 0.587785],
	[0.864188, 0.442863, 0.238856], [0.688191, 0.587785, 0.425325],
	[0.809017, 0.309017, 0.500000], [0.681718, 0.147621, 0.716567],
	[0.587785, 0.425325, 0.688191], [0.955423, 0.295242, 0.000000],
	[1.000000, 0.000000, 0.000000], [0.951056, 0.162460, 0.262866],
	[0.850651, -0.525731, 0.000000],[0.955423, -0.295242, 0.000000],
	[0.864188, -0.442863, 0.238856], [0.951056, -0.162460, 0.262866],
	[0.809017, -0.309017, 0.500000], [0.681718, -0.147621, 0.716567],
	[0.850651, 0.000000, 0.525731], [0.864188, 0.442863, -0.238856],
	[0.809017, 0.309017, -0.500000], [0.951056, 0.162460, -0.262866],
	[0.525731, 0.000000, -0.850651], [0.681718, 0.147621, -0.716567],
	[0.681718, -0.147621, -0.716567],[0.850651, 0.000000, -0.525731],
	[0.809017, -0.309017, -0.500000], [0.864188, -0.442863, -0.238856],
	[0.951056, -0.162460, -0.262866], [0.147621, 0.716567, -0.681718],
	[0.309017, 0.500000, -0.809017], [0.425325, 0.688191, -0.587785],
	[0.442863, 0.238856, -0.864188], [0.587785, 0.425325, -0.688191],
	[0.688191, 0.587785, -0.425325], [-0.147621, 0.716567, -0.681718],
	[-0.309017, 0.500000, -0.809017], [0.000000, 0.525731, -0.850651],
	[-0.525731, 0.000000, -0.850651], [-0.442863, 0.238856, -0.864188],
	[-0.295242, 0.000000, -0.955423], [-0.162460, 0.262866, -0.951056],
	[0.000000, 0.000000, -1.000000], [0.295242, 0.000000, -0.955423],
	[0.162460, 0.262866, -0.951056], [-0.442863, -0.238856, -0.864188],
	[-0.309017, -0.500000, -0.809017], [-0.162460, -0.262866, -0.951056],
	[0.000000, -0.850651, -0.525731], [-0.147621, -0.716567, -0.681718],
	[0.147621, -0.716567, -0.681718], [0.000000, -0.525731, -0.850651],
	[0.309017, -0.500000, -0.809017], [0.442863, -0.238856, -0.864188],
	[0.162460, -0.262866, -0.951056], [0.238856, -0.864188, -0.442863],
	[0.500000, -0.809017, -0.309017], [0.425325, -0.688191, -0.587785],
	[0.716567, -0.681718, -0.147621], [0.688191, -0.587785, -0.425325],
	[0.587785, -0.425325, -0.688191], [0.000000, -0.955423, -0.295242],
	[0.000000, -1.000000, 0.000000], [0.262866, -0.951056, -0.162460],
	[0.000000, -0.850651, 0.525731], [0.000000, -0.955423, 0.295242],
	[0.238856, -0.864188, 0.442863], [0.262866, -0.951056, 0.162460],
	[0.500000, -0.809017, 0.309017], [0.716567, -0.681718, 0.147621],
	[0.525731, -0.850651, 0.000000], [-0.238856, -0.864188, -0.442863],
	[-0.500000, -0.809017, -0.309017], [-0.262866, -0.951056, -0.162460],
	[-0.850651, -0.525731, 0.000000], [-0.716567, -0.681718, -0.147621],
	[-0.716567, -0.681718, 0.147621], [-0.525731, -0.850651, 0.000000],
	[-0.500000, -0.809017, 0.309017], [-0.238856, -0.864188, 0.442863],
	[-0.262866, -0.951056, 0.162460], [-0.864188, -0.442863, 0.238856],
	[-0.809017, -0.309017, 0.500000], [-0.688191, -0.587785, 0.425325],
	[-0.681718, -0.147621, 0.716567], [-0.442863, -0.238856, 0.864188],
	[-0.587785, -0.425325, 0.688191], [-0.309017, -0.500000, 0.809017],
	[-0.147621, -0.716567, 0.681718], [-0.425325, -0.688191, 0.587785],
	[-0.162460, -0.262866, 0.951056], [0.442863, -0.238856, 0.864188],
	[0.162460, -0.262866, 0.951056], [0.309017, -0.500000, 0.809017],
	[0.147621, -0.716567, 0.681718], [0.000000, -0.525731, 0.850651],
	[0.425325, -0.688191, 0.587785], [0.587785, -0.425325, 0.688191],
	[0.688191, -0.587785, 0.425325], [-0.955423, 0.295242, 0.000000],
	[-0.951056, 0.162460, 0.262866], [-1.000000, 0.000000, 0.000000],
	[-0.850651, 0.000000, 0.525731], [-0.955423, -0.295242, 0.000000],
	[-0.951056, -0.162460, 0.262866], [-0.864188, 0.442863, -0.238856],
	[-0.951056, 0.162460, -0.262866], [-0.809017, 0.309017, -0.500000],
	[-0.864188, -0.442863, -0.238856], [-0.951056, -0.162460, -0.262866],
	[-0.809017, -0.309017, -0.500000], [-0.681718, 0.147621, -0.716567],
	[-0.681718, -0.147621, -0.716567], [-0.850651, 0.000000, -0.525731],
	[-0.688191, 0.587785, -0.425325], [-0.587785, 0.425325, -0.688191],
	[-0.425325, 0.688191, -0.587785], [-0.425325, -0.688191, -0.587785],
	[-0.587785, -0.425325, -0.688191], [-0.688191, -0.587785, -0.425325]
];

/**
 * DirToByte
 */
function DirToByte(dir) {
	if (!dir) {
		return 0;
	}

	var best = 0;
	var bestd = 0;
	var d;
	for (var i = 0, length = bytedirs.length; i < length; i++) {
		d = vec3.dot(dir, bytedirs[i]);
		if (d > bestd) {
			bestd = d;
			best = i;
		}
	}

	return best;
}

/**
 * ByteToDir
 */
function ByteToDir(b, dir) {
	if (b < 0 || b >= bytedirs.length) {
		vec3.create(dir);
		return;
	}
	vec3.set(bytedirs[b], dir);
}

/**
 * rrandom
 */
function rrandom(min, max) {
	return Math.random() * (max - min) + min;
}

/**
 * irrandom
 */
function irrandom(min, max) {
	return Math.floor(Math.random() * (max - min + 1)) + min;
}

/**
 * crandom
 */
function crandom() {
	return 2.0 * (Math.random() - 0.5);
}

/**
 * SnapVector
 */
function SnapVector(normal) {
	normal[0] = Math.round(normal[0]);
	normal[1] = Math.round(normal[1]);
	normal[2] = Math.round(normal[2]);
}

/**
 * PerpendicularVector
 */
function PerpendicularVector(src, dst) {
	// Find the smallest magnitude axially aligned vector.
	var i, pos;
	var minelem = 1;
	for(var i = 0, pos = 0; i < 3; i++) {
		if (Math.abs(src[i]) < minelem) {
			pos = i;
			minelem = Math.abs(src[i]);
		}
	}
	var tempvec = vec3.create();
	tempvec[pos] = 1;

	// Project the point onto the plane defined by src.
	ProjectPointOnPlane(tempvec, src, dst);

	// Normalize the result.
	vec3.normalize(dst);
}

/**
 * Angle consts
 */
var PITCH = 0; // up / down
var YAW   = 1; // left / right
var ROLL  = 2; // fall over

/**
 * DEG2RAD
 */
function DEG2RAD(a) {
	return (a * Math.PI) / 180.0;
}

/**
 * RAD2DEG
 */
function RAD2DEG(a) {
	return (a * 180.0) / Math.PI;
}

/**
 * AngleSubtract
 *
 * Always returns a value from -180 to 180
 */
function AngleSubtract(a1, a2) {
	var a = a1 - a2;
	while (a > 180) {
		a -= 360;
	}
	while (a < -180) {
		a += 360;
	}
	return a;
}

/**
 * AnglesSubtract
 */
function AnglesSubtract(v1, v2, v3) {
	v3[0] = AngleSubtract(v1[0], v2[0]);
	v3[1] = AngleSubtract(v1[1], v2[1]);
	v3[2] = AngleSubtract(v1[2], v2[2]);
}

/**
 * LerpAngle
 */
function LerpAngle(from, to, frac) {
	if (to - from > 180) {
		to -= 360;
	}
	if (to - from < -180) {
		to += 360;
	}

	return from + frac * (to - from);
}

/**
 * AngleNormalize360
 *
 * Returns angle normalized to the range [0 <= angle < 360].
 */
function AngleNormalize360(a) {
	a = (360.0/65536) * (parseInt((a*(65536/360.0)), 10) & 65535);
	return a;
}

/**
 * AngleNormalize180
 *
 * Returns angle normalized to the range [-180 < angle <= 180].
 */
function AngleNormalize180(a) {
	a = AngleNormalize360(a);
	if (a > 180.0) {
		a -= 360.0;
	}
	return a;
}


/**
 * AnglesToVectors
 */
function AnglesToVectors(angles, forward, right, up) {
	var angle;
	var sr, sp, sy, cr, cp, cy;

	angle = angles[YAW] * (Math.PI*2 / 360);
	sy = Math.sin(angle);
	cy = Math.cos(angle);
	angle = angles[PITCH] * (Math.PI*2 / 360);
	sp = Math.sin(angle);
	cp = Math.cos(angle);
	angle = angles[ROLL] * (Math.PI*2 / 360);
	sr = Math.sin(angle);
	cr = Math.cos(angle);

	if (forward) {
		forward[0] = cp*cy;
		forward[1] = cp*sy;
		forward[2] = -sp;
	}

	if (right) {
		right[0] = (-1*sr*sp*cy+-1*cr*-sy);
		right[1] = (-1*sr*sp*sy+-1*cr*cy);
		right[2] = -1*sr*cp;
	}

	if (up) {
		up[0] = (cr*sp*cy+-sr*-sy);
		up[1] = (cr*sp*sy+-sr*cy);
		up[2] = cr*cp;
	}
}

/**
 * VectorToAngles
 */
function VectorToAngles(value1, angles) {
	var forward, yaw, pitch;

	if (value1[1] === 0 && value1[0] === 0) {
		yaw = 0;
		pitch = value1[2] > 0 ? 90 : 270;
	} else {
		if (value1[0]) {
			yaw = (Math.atan2(value1[1], value1[0]) * 180 / Math.PI);
		} else if (value1[1] > 0) {
			yaw = 90;
		} else {
			yaw = 270;
		}

		if (yaw < 0) {
			yaw += 360;
		}

		forward = Math.sqrt(value1[0]*value1[0] + value1[1]*value1[1]);
		pitch = (Math.atan2(value1[2], forward) * 180 / Math.PI);
		if (pitch < 0) {
			pitch += 360;
		}
	}

	angles[PITCH] = -pitch;
	angles[YAW] = yaw;
	angles[ROLL] = 0;
}

/**
 * AngleToShort
 */
function AngleToShort(x) {
	return (((x)*65536/360) & 65535);
}

/**
 * ShortToAngle
 */
function ShortToAngle(x) {
	return ((x)*(360.0/65536));
}

/**
 * AxisClear
 */
function AxisClear(axis) {
	axis[0][0] = 1;
	axis[0][1] = 0;
	axis[0][2] = 0;
	axis[1][0] = 0;
	axis[1][1] = 1;
	axis[1][2] = 0;
	axis[2][0] = 0;
	axis[2][1] = 0;
	axis[2][2] = 1;
}

/**
 * AxisCopy
 */
function AxisCopy(src, dest) {
	vec3.set(src[0], dest[0]);
	vec3.set(src[1], dest[1]);
	vec3.set(src[2], dest[2]);
}

/**
 * AnglesToAxis
 */
function AnglesToAxis(angles, axis) {
	AnglesToVectors(angles, axis[0], axis[1], axis[2]);
	// angle vectors returns "right" instead of "y axis"
	vec3.negate(axis[1]);
}

/**
 * AxisMultiply
 *
 * TODO Perhaps the functions using this should change the way they store
 * there axis, so we can re-use the mat3 lib calls.
 */
function AxisMultiply(in1, in2, out) {
	out[0][0] = in1[0][0] * in2[0][0] + in1[0][1] * in2[1][0] + in1[0][2] * in2[2][0];
	out[0][1] = in1[0][0] * in2[0][1] + in1[0][1] * in2[1][1] + in1[0][2] * in2[2][1];
	out[0][2] = in1[0][0] * in2[0][2] + in1[0][1] * in2[1][2] + in1[0][2] * in2[2][2];

	out[1][0] = in1[1][0] * in2[0][0] + in1[1][1] * in2[1][0] + in1[1][2] * in2[2][0];
	out[1][1] = in1[1][0] * in2[0][1] + in1[1][1] * in2[1][1] + in1[1][2] * in2[2][1];
	out[1][2] = in1[1][0] * in2[0][2] + in1[1][1] * in2[1][2] + in1[1][2] * in2[2][2];

	out[2][0] = in1[2][0] * in2[0][0] + in1[2][1] * in2[1][0] + in1[2][2] * in2[2][0];
	out[2][1] = in1[2][0] * in2[0][1] + in1[2][1] * in2[1][1] + in1[2][2] * in2[2][1];
	out[2][2] = in1[2][0] * in2[0][2] + in1[2][1] * in2[1][2] + in1[2][2] * in2[2][2];
}

/**
 * RotatePoint
 */
function RotatePoint(point, axis) {
	var tvec = vec3.create(point);
	point[0] = vec3.dot(axis[0], tvec);
	point[1] = vec3.dot(axis[1], tvec);
	point[2] = vec3.dot(axis[2], tvec);
}

/**
 * RotatePointAroundVector
 */
function RotatePointAroundVector(point, dir, degrees, dst) {
	var m = mat4.identity();
	mat4.rotate(m, DEG2RAD(degrees), dir);
	mat4.multiplyVec3(m, point, dst);
}

/**
 * RotateAroundDirection
 */
function RotateAroundDirection(axis, yaw) {
	// Create an arbitrary axis[1].
	PerpendicularVector(axis[0], axis[1]);

	// Rotate it around axis[0] by yaw.
	if (yaw) {
		var temp = vec3.create(axis[1]);
		RotatePointAroundVector(temp, axis[0], yaw, axis[1]);
	}

	// Cross to get axis[2].
	vec3.cross(axis[0], axis[1], axis[2]);
}

/**
 * Plane
 */

var PLANE_X           = 0;
var PLANE_Y           = 1;
var PLANE_Z           = 2;
var PLANE_NON_AXIAL   = 3;

var SIDE_FRONT        = 1;
var SIDE_BACK         = 2;
var SIDE_ON           = 3;
var PLANE_TRI_EPSILON = 0.1;

var Plane = function () {
	this.normal   = vec3.create();
	this.dist     = 0;
	this.type     = 0;
	this.signbits = 0;
};

Plane.prototype.clone = function (to) {
	if (typeof(to) === 'undefined') {
		to = new Plane();
	}

	vec3.set(this.normal, to.normal);
	to.dist = this.dist;
	to.type = this.type;
	to.signbits = this.signbits;

	return to;
};

/**
 * PlaneTypeForNormal
 */
function PlaneTypeForNormal(x) {
	return x[0] == 1.0 ? PLANE_X : (x[1] == 1.0 ? PLANE_Y : (x[2] == 1.0 ? PLANE_Z : PLANE_NON_AXIAL));
}

/**
 * GetPlaneSignbits
 */
function GetPlaneSignbits(normal) {
	var bits = 0;

	for (var i = 0; i < 3; i++) {
		if (normal[i] < 0) {
			bits |= 1 << i;
		}
	}

	return bits;
}

/**
 * PointOnPlaneSide
 */
function PointOnPlaneSide(pt, p) {
	var d = vec3.dot(pt, p.normal) - p.dist;

	if (d > PLANE_TRI_EPSILON) {
		return SIDE_FRONT;
	}

	if (d < -PLANE_TRI_EPSILON) {
		return SIDE_BACK;
	}

	return SIDE_ON;
}

/**
 * BoxOnPlaneSide
 *
 * Returns 1, 2, or 1 + 2.
 */
function BoxOnPlaneSide(mins, maxs, p) {
	// Fast axial cases.
	if (p.type < PLANE_NON_AXIAL) {
		if (p.dist <= mins[p.type]) {
			return SIDE_FRONT;
		} else if (p.dist >= maxs[p.type]) {
			return SIDE_BACK;
		}
		return SIDE_ON;
	}

	// general case
	var dist = [0, 0];

	if (p.signbits < 8) {                       // >= 8: default case is original code (dist[0]=dist[1]=0)
		for (var i = 0; i < 3; i++) {
			var b = (p.signbits >> i) & 1;
			dist[b] += p.normal[i]*maxs[i];
			dist[b^1] += p.normal[i]*mins[i];
		}
	}

	var sides = 0;
	if (dist[0] >= p.dist) {
		sides = SIDE_FRONT;
	}
	if (dist[1] < p.dist) {
		sides |= SIDE_BACK;
	}

	return sides;
}

/**
 * ProjectPointOnPlane
 */
function ProjectPointOnPlane(p, normal, dest) {
	var n = vec3.scale(normal, vec3.dot(normal, p), vec3.create());
	vec3.subtract(p, n, dest);
}

/**
 * PlaneFromPoints
 *
 * Returns null if the triangle is degenrate.
 * The normal will point out of the clock for clockwise ordered points.
 */
function PlaneFromPoints(a, b, c) {
	var plane = new Plane();
	var d1 = vec3.subtract(b, a, vec3.create());
	var d2 = vec3.subtract(c, a, vec3.create());

	vec3.cross(d2, d1, plane.normal);
	vec3.normalize(plane.normal);

	if (vec3.length(plane.normal) === 0) {
		return null;
	}

	plane.dist = vec3.dot(a, plane.normal);
	plane.signbits = GetPlaneSignbits(plane.normal);

	return plane;
}

/**
 * PlaneEqual
 */
var NORMAL_EPSILON = 0.0001;
var DIST_EPSILON   = 0.02;

function PlaneEqual(p1, p2) {
	if (Math.abs(p1.normal[0] - p2.normal[0]) < NORMAL_EPSILON &&
		Math.abs(p1.normal[1] - p2.normal[1]) < NORMAL_EPSILON &&
		Math.abs(p1.normal[2] - p2.normal[2]) < NORMAL_EPSILON &&
		Math.abs(p1.dist - p2.dist) < DIST_EPSILON) {
		return true;
	}

	return false;
}

/**
 * Ordered list of colplanar vectors.
 */
var MAX_MAP_BOUNDS        = 65535;
var MAX_POINTS_ON_WINDING = 64;

var Winding = function () {
	this.p = [];
};

Winding.prototype.clone = function (to) {
	if (typeof(to) === 'undefined') {
		to = new Winding();
	}

	to.p = new Array(this.p.length);
	for (var i = 0; i < this.p.length; i++) {
		to.p[i] = vec3.create(this.p[i]);
	}

	return to;
};

/**
 * BaseWindingForPlane
 *
 * Take a plane and generate a giant quad using the
 * MAP_MAP_BOUNDS constant of coplanar points.
 */
function BaseWindingForPlane(normal, dist) {
	// Find the major axis.
	var max = -MAX_MAP_BOUNDS;
	var v;
	var x = -1;
	for (var i = 0; i < 3; i++) {
		v = Math.abs(normal[i]);
		if (v > max) {
			x = i;
			max = v;
		}
	}

	if (x === -1) {
		throw new Exception('BaseWindingForPlane: no axis found');
	}

	var vup = vec3.create();
	var org = vec3.create();
	var vright = vec3.create();
	switch (x) {
		case 0:
		case 1:
			vup[2] = 1;
			break;
		case 2:
			vup[0] = 1;
			break;
	}

	var v = vec3.dot(vup, normal);
	vec3.add(vup, vec3.scale(normal, -v, vec3.create()));
	vec3.normalize(vup);

	vec3.scale(normal, dist, org);

	vec3.cross(vup, normal, vright);

	vec3.scale(vup, MAX_MAP_BOUNDS);
	vec3.scale(vright, MAX_MAP_BOUNDS);

	// Project a really big	axis aligned box onto the plane.
	var w = new Winding();

	w.p[0] = vec3.subtract(org, vright, vec3.create());
	vec3.add(w.p[0], vup, w.p[0]);

	w.p[1] = vec3.add(org, vright, vec3.create());
	vec3.add(w.p[1], vup, w.p[1]);

	w.p[2] = vec3.add(org, vright, vec3.create());
	vec3.subtract(w.p[2], vup, w.p[2]);

	w.p[3] = vec3.subtract(org, vright, vec3.create());
	vec3.subtract(w.p[3], vup, w.p[3]);

	return w;
}

/**
 * WindingBounds
 *
 * Get the bounds of a giving winding, helpful
 * for sanity testing a chop.
 */
function WindingBounds(w, mins, maxs) {
	var v;

	mins[0] = mins[1] = mins[2] = MAX_MAP_BOUNDS;
	maxs[0] = maxs[1] = maxs[2] = -MAX_MAP_BOUNDS;

	for (var i = 0; i < w.p.length; i++) {
		for (var j = 0; j < 3; j++) {
			v = w.p[i][j];

			if (v < mins[j]) {
				mins[j] = v;
			}

			if (v > maxs[j]) {
				maxs[j] = v;
			}
		}
	}
}

/**
 * ChopWindingInPlace
 *
 * Chop a winding by a single plane.
 */
function ChopWindingInPlace(inout, normal, dist, epsilon) {
	var i, j;
	var dot;
	var p1, p2;
	var dists = new Array(MAX_POINTS_ON_WINDING+4);
	var sides = new Array(MAX_POINTS_ON_WINDING+4);
	var counts = vec3.create();
	var mid = vec3.create();
	var orig = inout.clone();

	// Determine sides for each point.
	for (i = 0; i < orig.p.length; i++) {
		dot = dists[i] = vec3.dot(orig.p[i], normal) - dist;

		if (dot > epsilon) {
			sides[i] = SIDE_FRONT;
		} else if (dot < -epsilon) {
			sides[i] = SIDE_BACK;
		} else {
			sides[i] = SIDE_ON;
		}

		counts[sides[i]]++;
	}
	sides[i] = sides[0];
	dists[i] = dists[0];

	if (!counts[SIDE_FRONT]) {
		return false;
	}
	if (!counts[SIDE_BACK]) {
		return true;  // inout stays the same
	}

	// Reset inout points.
	var f = new Winding();
	var maxpts = orig.p.length + 4;  // cant use counts[0]+2 because
	                                 // of fp grouping errors

	for (i = 0; i < orig.p.length; i++) {
		p1 = orig.p[i];

		if (sides[i] === SIDE_ON) {
			f.p.push(vec3.set(p1, vec3.create()));
			continue;
		}

		if (sides[i] === SIDE_FRONT) {
			f.p.push(vec3.set(p1, vec3.create()));
		}

		if (sides[i+1] === SIDE_ON || sides[i+1] === sides[i]) {
			continue;
		}

		// Generate a split point.
		p2 = orig.p[(i+1) % orig.p.length];
		dot = dists[i] / (dists[i]-dists[i+1]);

		for (var j = 0; j < 3; j++) {
			// Avoid round off error when possible.
			if (normal[j] === 1) {
				mid[j] = dist;
			} else if (normal[j] === -1) {
				mid[j] = -dist;
			} else {
				mid[j] = p1[j] + dot*(p2[j]-p1[j]);
			}
		}

		f.p.push(vec3.set(mid, vec3.create()));
	}

	if (f.p.length > maxpts) {
		throw new Exception('ClipWinding: points exceeded estimate');
	}

	if (f.p.length > MAX_POINTS_ON_WINDING) {
		throw new Exception('ClipWinding: MAX_POINTS_ON_WINDING');
	}

	f.clone(inout);

	return true;
}

/**
 * RadiusFromBounds
 */
function RadiusFromBounds(mins, maxs) {
	var a, b;
	var corner = vec3.create();

	for (var i = 0; i < 3; i++) {
		a = Math.abs(mins[i]);
		b = Math.abs(maxs[i]);
		corner[i] = a > b ? a : b;
	}

	return vec3.length(corner);
}

/**
 * ClearBounds
 */
function ClearBounds(mins, maxs) {
	mins[0] = mins[1] = mins[2] = 99999;
	maxs[0] = maxs[1] = maxs[2] = -99999;
}

/**
 * AddPointToBounds
 */
function AddPointToBounds(v, mins, maxs) {
	if (v[0] < mins[0]) {
		mins[0] = v[0];
	}
	if (v[0] > maxs[0]) {
		maxs[0] = v[0];
	}

	if (v[1] < mins[1]) {
		mins[1] = v[1];
	}
	if (v[1] > maxs[1]) {
		maxs[1] = v[1];
	}

	if (v[2] < mins[2]) {
		mins[2] = v[2];
	}
	if (v[2] > maxs[2]) {
		maxs[2] = v[2];
	}
}

/**
 * BoundsIntersect
 */
function BoundsIntersect(mins, maxs, mins2, maxs2, epsilon) {
	epsilon = epsilon || 0;

	if (maxs[0] < mins2[0] - epsilon ||
		maxs[1] < mins2[1] - epsilon ||
		maxs[2] < mins2[2] - epsilon ||
		mins[0] > maxs2[0] + epsilon ||
		mins[1] > maxs2[1] + epsilon ||
		mins[2] > maxs2[2] + epsilon) {
		return false;
	}

	return true;
}

/**
 * BoundsIntersectPoint
 */
function BoundsIntersectPoint(mins, maxs, origin) {
	if (origin[0] > maxs[0] ||
		origin[0] < mins[0] ||
		origin[1] > maxs[1] ||
		origin[1] < mins[1] ||
		origin[2] > maxs[2] ||
		origin[2] < mins[2]) {
		return false;
	}

	return true;
}

/**
 * RadixSort
 *
 * Sort 32 bit ints into 8 bit buckets.
 * http://stackoverflow.com/questions/8082425/fastest-way-to-sort-32bit-signed-integer-arrays-in-javascript
 */
var _radixSort_0 = [
	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
];

function RadixSort(arr, prop, start, end) {
	var len = end - start;
	var cpy = new Array(len);
	var c4 = [].concat(_radixSort_0);
	var c3 = [].concat(_radixSort_0);
	var c2 = [].concat(_radixSort_0);
	var c1 = [].concat(_radixSort_0);
	var o4 = 0; var k4;
	var o3 = 0; var k3;
	var o2 = 0; var k2;
	var o1 = 0; var k1;
	var x;
	for (x = start; x < end; x++) {
		k4 = arr[x][prop] & 0xFF;
		k3 = (arr[x][prop] >> 8) & 0xFF;
		k2 = (arr[x][prop] >> 16) & 0xFF;
		k1 = (arr[x][prop] >> 24) & 0xFF ^ 0x80;
		c4[k4]++;
		c3[k3]++;
		c2[k2]++;
		c1[k1]++;
	}
	for (x = 0; x < 256; x++) {
		k4 = o4 + c4[x];
		k3 = o3 + c3[x];
		k2 = o2 + c2[x];
		k1 = o1 + c1[x];
		c4[x] = o4;
		c3[x] = o3;
		c2[x] = o2;
		c1[x] = o1;
		o4 = k4;
		o3 = k3;
		o2 = k2;
		o1 = k1;
	}
	for (x = start; x < end; x++) {
		k4 = arr[x][prop] & 0xFF;
		cpy[c4[k4]] = arr[x];
		c4[k4]++;
	}
	for (x = 0; x < len; x++) {
		k3 = (cpy[x][prop] >> 8) & 0xFF;
		arr[start+c3[k3]] = cpy[x];
		c3[k3]++;
	}
	for (x = start; x < end; x++) {
		k2 = (arr[x][prop] >> 16) & 0xFF;
		cpy[c2[k2]] = arr[x];
		c2[k2]++;
	}
	for (x = 0; x < len; x++) {
		k1 = (cpy[x][prop] >> 24) & 0xFF ^ 0x80;
		arr[start+c1[k1]] = cpy[x];
		c1[k1]++;
	}

	return arr;
}

return {
	vec3origin:              vec3origin,
	axisDefault:             axisDefault,

	DirToByte:               DirToByte,
	ByteToDir:               ByteToDir,
	rrandom:                 rrandom,
	irrandom:                irrandom,
	crandom:                 crandom,

	SnapVector:              SnapVector,
	PerpendicularVector:     PerpendicularVector,

	PITCH:                   PITCH,
	YAW:                     YAW,
	ROLL:                    ROLL,
	DEG2RAD:                 DEG2RAD,
	RAD2DEG:                 RAD2DEG,
	AngleSubtract:           AngleSubtract,
	AnglesSubtract:          AnglesSubtract,
	LerpAngle:               LerpAngle,
	AngleNormalize360:       AngleNormalize360,
	AngleNormalize180:       AngleNormalize180,
	AnglesToVectors:         AnglesToVectors,
	VectorToAngles:          VectorToAngles,
	AngleToShort:            AngleToShort,
	ShortToAngle:            ShortToAngle,

	AxisClear:               AxisClear,
	AxisCopy:                AxisCopy,
	AnglesToAxis:            AnglesToAxis,
	AxisMultiply:            AxisMultiply,
	RotatePoint:             RotatePoint,
	RotatePointAroundVector: RotatePointAroundVector,
	RotateAroundDirection:   RotateAroundDirection,

	PLANE_X:                 PLANE_X,
	PLANE_Y:                 PLANE_Y,
	PLANE_Z:                 PLANE_Z,
	PLANE_NON_AXIAL:         PLANE_NON_AXIAL,
	SIDE_FRONT:              SIDE_FRONT,
	SIDE_BACK:               SIDE_BACK,
	SIDE_ON:                 SIDE_ON,
	Plane:                   Plane,
	PlaneTypeForNormal:      PlaneTypeForNormal,
	GetPlaneSignbits:        GetPlaneSignbits,
	PointOnPlaneSide:        PointOnPlaneSide,
	BoxOnPlaneSide:          BoxOnPlaneSide,
	ProjectPointOnPlane:     ProjectPointOnPlane,
	PlaneFromPoints:         PlaneFromPoints,
	PlaneEqual:              PlaneEqual,

	MAX_MAP_BOUNDS:          MAX_MAP_BOUNDS,
	BaseWindingForPlane:     BaseWindingForPlane,
	WindingBounds:           WindingBounds,
	ChopWindingInPlace:      ChopWindingInPlace,

	RadiusFromBounds:        RadiusFromBounds,
	ClearBounds:             ClearBounds,
	AddPointToBounds:        AddPointToBounds,
	BoundsIntersect:         BoundsIntersect,
	BoundsIntersectPoint:    BoundsIntersectPoint,

	RadixSort:               RadixSort
};

});
/*global vec3: true, mat4: true */

define('common/qshared', ['common/qmath'], function (QMath) {

var GAME_VERSION = 0.1066;

var CMD_BACKUP   = 64;

// If entityState.solid === SOLID_BMODEL, modelIndex is an inline model number
var SOLID_BMODEL = 0xffffff;

/**
 * Text colors
 */
var COLOR = {
	BLACK:   0,
	RED:     1,
	GREEN:   2,
	YELLOW:  3,
	BLUE:    4,
	CYAN:    5,
	MAGENTA: 6,
	WHITE:   7
};

/**
 * Cvar flags
 */
var CVAR = {
	ROM:        1,                                         // display only, cannot be set by user at all
	ARCHIVE:    2,                                         // save to config file
	CHEAT:      4,                                         // save to config file
	USERINFO:   8,                                         // sent to server on connect or change
	SYSTEMINFO: 16,                                        // these cvars will be duplicated on all clients
	SERVERINFO: 32,                                        // sent in response to front end requests
	ARENAINFO:  64
};

/**
 * Snapshot flags
 */
var SNAPFLAG_RATE_DELAYED   = 1;
var SNAPFLAG_NOT_ACTIVE     = 2;                           // snapshot used during connection and for zombies
var SNAPFLAG_SERVERCOUNT    = 4;                           // toggled every map_restart so transitions can be detected

/**
 * MAX_* defines used to pre-alloc many structures
 */
var GENTITYNUM_BITS         = 10;
var MAX_CLIENTS             = 32;                          // absolute limit
var MAX_GENTITIES           = (1 << 10);                   // can't be increased without changing drawsurf bit packing
var MAX_MODELS              = 256;                         // these are sent over the net as 8 bits
var MAX_SOUNDS              = 256;                         // so they cannot be blindly increased

/**
 * Faux entity numbers
 */
var ARENANUM_NONE           = ENTITYNUM_NONE;

var ENTITYNUM_NONE          = MAX_GENTITIES-1;
var ENTITYNUM_WORLD         = MAX_GENTITIES-2;
var ENTITYNUM_MAX_NORMAL    = MAX_GENTITIES-2;

/**
 * Communicated across the network
 */
var NA = {
	BAD:      0,
	LOOPBACK: 1,
	IP:       2
};

var NS = {
	CLIENT: 0,
	SERVER: 1
};

var NetAdr = function () {
	this.type = NA.BAD;
	this.ip   = null;
	this.port = 0;
};

var BUTTON = {
	ATTACK:       1,
	TALK:         2,                                       // displays talk balloon and disables actions
	USE_HOLDABLE: 4,
	GESTURE:      8,
	WALKING:      16,                                      // walking can't just be infered from MOVE_RUN
	                                                       // because a key pressed late in the frame will
	                                                       // only generate a small move value for that frame
	                                                       // walking will use different animations and
	                                                       // won't generate footsteps
	AFFIRMATIVE:  32,
	NEGATIVE:     64,
	GETFLAG:      128,
	GUARDBASE:    256,
	PATROL:       512,
	FOLLOWME:     1024,
	ANY:          2048                                     // any key whatsoever
};

var UserCmd = function () {
	this.serverTime  = 0;
	this.angles      = vec3.create();
	this.forwardmove = 0;
	this.rightmove   = 0;
	this.upmove      = 0;
	this.buttons     = 0;
	this.weapon      = 0;
};

UserCmd.prototype.clone = function (cmd) {
	if (typeof(cmd) === 'undefined') {
		cmd = new UserCmd();
	}

	cmd.serverTime = this.serverTime;
	vec3.set(this.angles, cmd.angles);
	cmd.forwardmove = this.forwardmove;
	cmd.rightmove = this.rightmove;
	cmd.upmove = this.upmove;
	cmd.buttons = this.buttons;
	cmd.weapon = this.weapon;

	return cmd;
};

/**
 * Shared entity state
 */
var SharedEntity = function () {
	this.linked        = false;
	// SVF_NOCLIENT, SVF_BROADCAST, etc.
	this.svFlags       = 0;
	// Only send to this client when SVF_SINGLECLIENT is set.
	this.singleClient  = 0;
	// If false, assume an explicit mins / maxs bounding box only set by trap_SetBrushModel.
	this.bmodel        = false;
	this.mins          = vec3.create();
	this.maxs          = vec3.create();
	// CONTENTS.TRIGGER, CONTENTS.SOLID, CONTENTS.BODY (non-solid ent should be 0)
	this.contents      = 0;
	// Derived from mins/maxs and origin + rotation.
	this.absmin        = vec3.create();
	this.absmax        = vec3.create();
	// currentOrigin will be used for all collision detection and world linking.
	// it will not necessarily be the same as the trajectory evaluation for the current
	// time, because each entity must be moved one at a time after time is advanced
	// to avoid simultanious collision issues.
	this.currentOrigin = vec3.create();
	this.currentAngles = vec3.create();
	this.client        = null;
	// When a trace call is made and passEntityNum != ENTITYNUM_NONE,
	// an ent will be excluded from testing if:
	// ent.s.number == passEntityNum                   (don't interact with self)
	// ent.ownerNum == passEntityNum                   (don't interact with your own missiles)
	// entity[ent.ownerNum].ownerNum == passEntityNum  (don't interact with other missiles from owner)
	this.ownerNum      = ENTITYNUM_NONE;
};

/**
 * Player state
 */
var MAX_STATS               = 16;
var MAX_PERSISTANT          = 16;
var MAX_POWERUPS            = 16;
var MAX_WEAPONS             = 16;
var MAX_PS_EVENTS           = 2;
var PMOVEFRAMECOUNTBITS     = 6;

var PlayerState = function () {
	this.clientNum           = 0;                          // ranges from 0 to MAX_CLIENTS-1
	this.arenaNum            = ARENANUM_NONE;
	this.commandTime         = 0;                          // cmd->serverTime of last executed command
	this.pm_type             = 0;
	this.pm_flags            = 0;                          // ducked, jump_held, etc
	this.origin              = vec3.create();
	this.velocity            = vec3.create();
	this.viewangles          = vec3.create();
	this.viewheight          = 0;
	this.delta_angles        = vec3.create();              // add to command angles to get view direction
	                                                       // changed by spawns, rotating objects, and teleporters
	this.speed               = 0;
	this.gravity             = 0;
	this.groundEntityNum     = ENTITYNUM_NONE;             // ENTITYNUM_NONE = in air
	this.bobCycle            = 0;                          // for view bobbing and footstep generation

	this.weapon              = 0;                          // copied to entityState_t->weapon
	this.weaponState         = 0;
	this.weaponTime          = 0;
	this.legsTimer           = 0;                          // don't change low priority animations until this runs out
	this.legsAnim            = 0;                          // mask off ANIM_TOGGLEBIT

	this.torsoTimer          = 0;                          // don't change low priority animations until this runs out
	this.torsoAnim           = 0;                          // mask off ANIM_TOGGLEBIT

	this.movementDir         = 0;                          // a number 0 to 7 that represents the relative angle
	                                                       // of movement to the view angle (axial and diagonals)
	                                                       // when at rest, the value will remain unchanged
	                                                       // used to twist the legs during strafing
	// Damage feedback.
	this.damageEvent         = 0;                          // when it changes, latch the other parms
	this.damageYaw           = 0;
	this.damagePitch         = 0;
	this.damageCount         = 0;

	this.stats               = new Array(MAX_STATS);
	this.persistant          = new Array(MAX_PERSISTANT);  // stats that aren't cleared on death
	this.powerups            = new Array(MAX_POWERUPS);    // level.time that the powerup runs out
	this.ammo                = new Array(MAX_WEAPONS);

	this.eFlags              = 0;                          // copied to entityState_t->eFlags
	this.eventSequence       = 0;                          // pmove generated events
	this.events              = new Array(MAX_PS_EVENTS);
	this.eventParms          = new Array(MAX_PS_EVENTS);

	this.externalEvent       = 0;                          // events set on player from another source
	this.externalEventParm   = 0;

	// Not communicated over the net.
	this.ping                = 0;                          // server to game info for scoreboard
	this.jumppad_ent         = 0;                          // jumppad entity hit this frame
	this.jumppad_frame       = 0;
	this.pmove_framecount    = 0;
	this.entityEventSequence = 0;

	for (var i = 0; i < MAX_STATS; i++) {
		this.stats[i] = 0;
	}
	for (var i = 0; i < MAX_PERSISTANT; i++) {
		this.persistant[i] = 0;
	}
	for (var i = 0; i < MAX_POWERUPS; i++) {
		this.powerups[i] = 0;
	}
	for (var i = 0; i < MAX_WEAPONS; i++) {
		this.ammo[i] = 0;
	}
};

// deep copy
PlayerState.prototype.clone = function (ps) {
	if (typeof(ps) === 'undefined') {
		ps = new PlayerState();
	}

	ps.clientNum            = this.clientNum;
	ps.arenaNum             = this.arenaNum;
	ps.commandTime          = this.commandTime;
	ps.pm_type              = this.pm_type;
	ps.pm_flags             = this.pm_flags;
	vec3.set(this.origin, ps.origin);
	vec3.set(this.velocity, ps.velocity);
	vec3.set(this.viewangles, ps.viewangles);
	ps.viewheight           = this.viewheight;
	vec3.set(this.delta_angles, ps.delta_angles);
	ps.speed                = this.speed;
	ps.gravity              = this.gravity;
	ps.groundEntityNum      = this.groundEntityNum;
	ps.bobCycle             = this.bobCycle;
	ps.weapon               = this.weapon;
	ps.weaponState          = this.weaponState;
	ps.weaponTime           = this.weaponTime;
	ps.legsTimer            = this.legsTimer;
	ps.legsAnim             = this.legsAnim;
	ps.torsoTimer           = this.torsoTimer;
	ps.torsoAnim            = this.torsoAnim;
	ps.movementDir          = this.movementDir;
	ps.damageEvent          = this.damageEvent;
	ps.damageYaw            = this.damageYaw;
	ps.damagePitch          = this.damagePitch;
	ps.damageCount          = this.damageCount;
	for (var i = 0; i < MAX_STATS; i++) {
		ps.stats[i] = this.stats[i];
	}
	for (var i = 0; i < MAX_PERSISTANT; i++) {
		ps.persistant[i] = this.persistant[i];
	}
	for (var i = 0; i < MAX_POWERUPS; i++) {
		ps.powerups[i] = this.powerups[i];
	}
	for (var i = 0; i < MAX_WEAPONS; i++) {
		ps.ammo[i] = this.ammo[i];
	}
	ps.eFlags               = this.eFlags;
	ps.eventSequence        = this.eventSequence;
	for (var i = 0; i < MAX_PS_EVENTS; i++) {
		ps.events[i] = this.events[i];
		ps.eventParms[i] = this.eventParms[i];
	}
	ps.externalEvent        = this.externalEvent;
	ps.externalEventParm    = this.externalEventParm;
	ps.jumppad_ent          = this.jumppad_ent;
	ps.jumppad_frame        = this.jumppad_frame;
	ps.pmove_framecount     = this.pmove_framecount;
	ps.entityEventSequence  = this.entityEventSequence;

	return ps;
};

var TR = {
	STATIONARY:  0,
	INTERPOLATE: 1,                                        // non-parametric, but interpolate between snapshots
	LINEAR:      2,
	LINEAR_STOP: 3,
	SINE:        4,                                        // value = base + sin( time / duration ) * delta
	GRAVITY:     5
};

var Trajectory = function () {
	this.trType     = 0;
	this.trTime     = 0;
	this.trDuration = 0;
	this.trBase     = vec3.create();
	this.trDelta    = vec3.create();
};

Trajectory.prototype.clone = function (tr) {
	if (typeof(tr) === 'undefined') {
		tr = new Trajectory();
	}

	tr.trType = this.trType;
	tr.trTime = this.trTime;
	tr.trDuration = this.trDuration;
	vec3.set(this.trBase, tr.trBase);
	vec3.set(this.trDelta, tr.trDelta);

	return tr;
};

var Orientation = function () {
	this.origin      = vec3.create();                          // in world coordinates
	this.axis        = [                                   // orientation in world
		vec3.create(),
		vec3.create(),
		vec3.create()
	];
	// Used by renderer.
	this.viewOrigin  = vec3.create();                          // viewParms->or.origin in local coordinates
	this.modelMatrix = mat4.create();
};

Orientation.prototype.clone = function (to) {
	if (typeof(to) === 'undefined') {
		to = new Orientation();
	}

	vec3.set(this.origin, to.origin);
	vec3.set(this.axis[0], to.axis[0]);
	vec3.set(this.axis[1], to.axis[1]);
	vec3.set(this.axis[2], to.axis[2]);
	vec3.set(this.viewOrigin, to.viewOrigin);
	mat4.set(this.modelMatrix, to.modelMatrix);

	return to;
};

/**********************************************************
 * EntityState is the information conveyed from the server
 * in an update message about entities that the client will
 * need to render in some way. Different eTypes may use the
 * information in different ways. The messages are delta
 * compressed, so it doesn't really matter if the structure
 * size is fairly large
 **********************************************************/
var EntityState = function () {
	this.reset();
};

EntityState.prototype.reset = function () {
	this.number          = 0;                              // entity index
	this.arenaNum        = ARENANUM_NONE;
	this.eType           = 0;                              // entityType_t
	this.eFlags          = 0;
	this.pos             = new Trajectory();               // for calculating position
	this.apos            = new Trajectory();               // for calculating angles
	this.time            = 0;
	this.time2           = 0;
	this.origin          = vec3.create();
	this.origin2         = vec3.create();
	this.angles          = vec3.create();
	this.angles2         = vec3.create();
	this.otherEntityNum  = 0;                              // shotgun sources, etc
	this.otherEntityNum2 = 0;                              // shotgun sources, etc
	this.groundEntityNum = ENTITYNUM_NONE;                 // ENTITYNUM_NONE = in air
	this.constantLight   = 0;                              // r + (g<<8) + (b<<16) + (intensity<<24)
	this.loopSound       = 0;                              // constantly loop this sound
	this.modelIndex      = 0;
	this.modelIndex2     = 0;
	this.clientNum       = 0;                              // 0 to (MAX_CLIENTS - 1), for players and corpses
	this.frame           = 0;
	this.solid           = 0;                              // for client side prediction, trap_linkentity sets this properly
	this.event           = 0;                              // impulse events -- muzzle flashes, footsteps, etc
	this.eventParm       = 0;
	// For players.
	this.powerups        = 0;                              // bit flags
	this.weapon          = 0;                              // determines weapon and flash model, etc
	this.legsAnim        = 0;                              // mask off ANIM_TOGGLEBIT
	this.torsoAnim       = 0;                              // mask off ANIM_TOGGLEBIT
	this.generic1        = 0;
};

// deep copy
EntityState.prototype.clone = function (es) {
	if (typeof(es) === 'undefined') {
		es = new EntityState();
	}

	es.number            = this.number;
	es.arenaNum          = this.arenaNum;
	es.eType             = this.eType;
	es.eFlags            = this.eFlags;
	this.pos.clone(es.pos);
	this.apos.clone(es.apos);
	es.time              = this.time;
	es.time2             = this.time2;
	vec3.set(this.origin,  es.origin);
	vec3.set(this.origin2, es.origin2);
	vec3.set(this.angles,  es.angles);
	vec3.set(this.angles2, es.angles2);
	es.otherEntityNum    = this.otherEntityNum;
	es.otherEntityNum2   = this.otherEntityNum2;
	es.groundEntityNum   = this.groundEntityNum;
	es.constantLight     = this.constantLight;
	es.loopSound         = this.loopSound;
	es.modelIndex        = this.modelIndex;
	es.modelIndex2       = this.modelIndex2;
	es.clientNum         = this.clientNum;
	es.frame             = this.frame;
	es.solid             = this.solid;
	es.event             = this.event;
	es.eventParm         = this.eventParm;
	es.powerups          = this.powerups;
	es.weapon            = this.weapon;
	es.legsAnim          = this.legsAnim;
	es.torsoAnim         = this.torsoAnim;
	es.generic1          = this.generic1;

	return es;
};

/**
 * Trace results
 */
var TraceResults = function () {
	this.allSolid     = false;                             // if true, plane is not valid
	this.startSolid   = false;                             // if true, the initial point was in a solid area
	this.fraction     = 1.0;                               // time completed, 1.0 = didn't hit anything
	this.endPos       = vec3.create();                     // final position
	this.plane        = new QMath.Plane();                 // surface normal at impact, transformed to world space
	this.surfaceFlags = 0;
	this.contents     = 0;
	this.entityNum    = 0;
	this.shaderName   = null;                              // debugging
};

TraceResults.prototype.reset = function () {
	this.allSolid = false;
	this.startSolid = false;
	this.fraction = 1.0;
	this.endPos[0] = this.endPos[1] = this.endPos[2] = 0.0;
	// Plane reset
	this.plane = new QMath.Plane();
	this.surfaceFlags = 0;
	this.contents = 0;
	this.entityNum = 0;
	this.shaderName = null;
};

TraceResults.prototype.clone = function (to) {
	if (typeof(to) === 'undefined') {
		to = new TraceResults();
	}

	to.allSolid = this.allSolid;
	to.startSolid = this.startSolid;
	to.fraction = this.fraction;
	vec3.set(this.endPos, to.endPos);
	this.plane.clone(to.plane);
	to.surfaceFlags = this.surfaceFlags;
	to.contents = this.contents;
	to.entityNum = this.entityNum;
	to.shaderName = this.shaderName;

	return to;
};

/**
 * Surface flags
 */
var SURF = {
	NODAMAGE:    0x1,                                      // never give falling damage
	SLICK:       0x2,                                      // effects game physics
	SKY:         0x4,                                      // lighting from environment map
	LADDER:      0x8,
	NOIMPACT:    0x10,                                     // don't make missile explosions
	NOMARKS:     0x20,                                     // don't leave missile marks
	FLESH:       0x40,                                     // make flesh sounds and effects
	NODRAW:      0x80,                                     // don't generate a drawsurface at all
	HINT:        0x100,                                    // make a primary bsp splitter
	SKIP:        0x200,                                    // completely ignore, allowing non-closed brushes
	NOLIGHTMAP:  0x400,                                    // surface doesn't need a lightmap
	POINTLIGHT:  0x800,                                    // generate lighting info at vertexes
	METALSTEPS:  0x1000,                                   // clanking footsteps
	NOSTEPS:     0x2000,                                   // no footstep sounds
	NONSOLID:    0x4000,                                   // don't collide against curves with this set
	LIGHTFILTER: 0x8000,                                   // act as a light filter during q3map -light
	ALPHASHADOW: 0x10000,                                  // do per-pixel light shadow casting in q3map
	NODLIGHT:    0x20000,                                  // don't dlight even if solid (solid lava, skies)
	DUST:        0x40000                                   // leave a dust trail when walking on this surface
};

var CONTENTS = {
	SOLID:         1,                                      // an eye is never valid in a solid
	LAVA:          8,
	SLIME:         16,
	WATER:         32,
	FOG:           64,

	NOTTEAM1:      0x0080,
	NOTTEAM2:      0x0100,
	NOBOTCLIP:     0x0200,

	AREAPORTAL:    0x8000,

	PLAYERCLIP:    0x10000,
	MONSTERCLIP:   0x20000,
	TELEPORTER:    0x40000,
	JUMPPAD:       0x80000,
	CLUSTERPORTAL: 0x100000,
	DONOTENTER:    0x200000,
	BOTCLIP:       0x400000,
	MOVER:         0x800000,

	ORIGIN:        0x1000000,                              // removed before bsping an entity

	BODY:          0x2000000,                              // should never be on a brush, only in game
	CORPSE:        0x4000000,
	DETAIL:        0x8000000,                              // brushes not used for the bsp
	STRUCTURAL:    0x10000000,                             // brushes used for the bsp
	TRANSLUCENT:   0x20000000,                             // don't consume surface fragments inside
	TRIGGER:       0x40000000,
	NODROP:        0x80000000                              // don't leave bodies or items (death fog, lava)
};

var FLAG = {
	ATBASE:      0,
	TAKEN:       1,     // CTF
	TAKEN_RED:   2,     // One Flag CTF
	TAKEN_BLUE:  3,     // One Flag CTF
	DROPPED:     4
};

/**
 * Helper functions for getting and setting object
 * properties from a string
 */
function FTA(fieldname) {
	var m = fieldname.match(/([^\.\[\]]+)/g);
	return m;
}

function AGET(obj, path) {
	var i, len;

	for (i = 0, len = path.length; i < len - 1; i++) {
		obj = obj[path[i]];
	}

	return obj[path[len - 1]];
}

function ASET(obj, path, val) {
	var i, len;

	for (i = 0, len = path.length; i < len - 1; i++) {
		obj = obj[path[i]];
	}

	obj[path[len - 1]] = val;
}

/**
 * atob64
 *
 * Convert array to base64 string
 */
function atob64(arr) {
	var limit = 1 << 16;
	var length = arr.length;
	var slice = arr.slice || arr.subarray;
	var str;

	if (length < limit) {
		str = String.fromCharCode.apply(String, arr);
	} else {
		var chunks = [];
		var i = 0;
		while (i < length) {
			chunks.push(String.fromCharCode.apply(String, slice.call(arr, i, i + limit)));
			i += limit;
		}
		str = chunks.join('');
	}

	return btoa(str);
}

/**
 * colorize
 */
var colors = ['black', 'red', 'green', 'yellow', 'blue', 'cyan', 'pink', 'white'];

function colorize(text) {
	return text.replace(/\^(\d)(.*?)(?=\^|$)/g, function (match, color, text) {
		return '<span class="' + colors[color] + '">' + text + '</span>';
	});
}

return {
	GAME_VERSION:          GAME_VERSION,
	CMD_BACKUP:            CMD_BACKUP,
	SOLID_BMODEL:          SOLID_BMODEL,

	COLOR:                 COLOR,

	SNAPFLAG_RATE_DELAYED: SNAPFLAG_RATE_DELAYED,
	SNAPFLAG_NOT_ACTIVE:   SNAPFLAG_NOT_ACTIVE,
	SNAPFLAG_SERVERCOUNT:  SNAPFLAG_SERVERCOUNT,

	GENTITYNUM_BITS:       GENTITYNUM_BITS,
	MAX_CLIENTS:           MAX_CLIENTS,
	MAX_GENTITIES:         MAX_GENTITIES,
	MAX_MODELS:            MAX_MODELS,
	MAX_SOUNDS:            MAX_SOUNDS,

	ARENANUM_NONE:         ARENANUM_NONE,
	ENTITYNUM_NONE:        ENTITYNUM_NONE,
	ENTITYNUM_WORLD:       ENTITYNUM_WORLD,
	ENTITYNUM_MAX_NORMAL:  ENTITYNUM_MAX_NORMAL,

	MAX_STATS:             MAX_STATS,
	MAX_PERSISTANT:        MAX_PERSISTANT,
	MAX_POWERUPS:          MAX_POWERUPS,
	MAX_WEAPONS:           MAX_WEAPONS,
	MAX_PS_EVENTS:         MAX_PS_EVENTS,
	PMOVEFRAMECOUNTBITS:   PMOVEFRAMECOUNTBITS,

	CVAR:                   CVAR,
	BUTTON:                BUTTON,
	TR:                    TR,
	SURF:                  SURF,
	CONTENTS:              CONTENTS,
	FLAG:                  FLAG,
	NA:                    NA,
	NS:                    NS,

	SharedEntity:          SharedEntity,
	PlayerState:           PlayerState,
	Trajectory:            Trajectory,
	Orientation:           Orientation,
	EntityState:           EntityState,
	TraceResults:          TraceResults,

	NetAdr:                NetAdr,
	UserCmd:               UserCmd,

	FTA:                   FTA,
	AGET:                  AGET,
	ASET:                  ASET,

	atob64:                atob64,
	colorize:              colorize,
};

});
/**
 * EventEmitter v4.0.4 - git.io/ee
 * Oliver Caldwell
 * MIT license
 * @preserve
 */

;(function(exports) {
    // JSHint config - http://www.jshint.com/
    /*jshint laxcomma:true*/
    /*global define:true*/

    // Place the script in strict mode
    

    /**
     * Class for managing events.
     * Can be extended to provide event functionality in other classes.
     *
     * @class Manages event registering and emitting.
     */
    function EventEmitter(){}

    // Shortcuts to improve speed and size

        // Easy access to the prototype
    var proto = EventEmitter.prototype

      // Existence of a native indexOf
      , nativeIndexOf = Array.prototype.indexOf ? true : false;

    /**
     * Finds the index of the listener for the event in it's storage array
     *
     * @param {Function} listener Method to look for.
     * @param {Function[]} listeners Array of listeners to search through.
     * @return {Number} Index of the specified listener, -1 if not found
     */
    function indexOfListener(listener, listeners) {
        // Return the index via the native method if possible
        if(nativeIndexOf) {
            return listeners.indexOf(listener);
        }

        // There is no native method
        // Use a manual loop to find the index
        var i = listeners.length;
        while(i--) {
            // If the listener matches, return it's index
            if(listeners[i] === listener) {
                return i;
            }
        }

        // Default to returning -1
        return -1;
    }

    /**
     * Fetches the events object and creates one if required.
     *
     * @return {Object} The events storage object.
     */
    proto._getEvents = function() {
        return this._events || (this._events = {});
    };

    /**
     * Returns the listener array for the specified event.
     * Will initialise the event object and listener arrays if required.
     *
     * @param {String} evt Name of the event to return the listeners from.
     * @return {Function[]} All listener functions for the event.
     * @doc
     */
    proto.getListeners = function(evt) {
        // Create a shortcut to the storage object
        // Initialise it if it does not exists yet
        var events = this._getEvents();

        // Return the listener array
        // Initialise it if it does not exist
        return events[evt] || (events[evt] = []);
    };

    /**
     * Adds a listener function to the specified event.
     * The listener will not be added if it is a duplicate.
     * If the listener returns true then it will be removed after it is called.
     *
     * @param {String} evt Name of the event to attach the listener to.
     * @param {Function} listener Method to be called when the event is emitted. If the function returns true then it will be removed after calling.
     * @return {Object} Current instance of EventEmitter for chaining.
     * @doc
     */
    proto.addListener = function(evt, listener) {
        // Fetch the listeners
        var listeners = this.getListeners(evt);

        // Push the listener into the array if it is not already there
        if(indexOfListener(listener, listeners) === -1) {
            listeners.push(listener);
        }

        // Return the instance of EventEmitter to allow chaining
        return this;
    };

    /**
     * Alias of addListener
     * @doc
     */
    proto.on = proto.addListener;

    /**
     * Removes a listener function from the specified event.
     *
     * @param {String} evt Name of the event to remove the listener from.
     * @param {Function} listener Method to remove from the event.
     * @return {Object} Current instance of EventEmitter for chaining.
     * @doc
     */
    proto.removeListener = function(evt, listener) {
        // Fetch the listeners
        // And get the index of the listener in the array
        var listeners = this.getListeners(evt)
          , index = indexOfListener(listener, listeners);

        // If the listener was found then remove it
        if(index !== -1) {
            listeners.splice(index, 1);

            // If there are no more listeners in this array then remove it
            if(listeners.length === 0) {
                this.removeEvent(evt);
            }
        }

        // Return the instance of EventEmitter to allow chaining
        return this;
    };

    /**
     * Alias of removeListener
     * @doc
     */
    proto.off = proto.removeListener;

    /**
     * Adds listeners in bulk using the manipulateListeners method.
     * If you pass an object as the second argument you can add to multiple events at once. The object should contain key value pairs of events and listeners or listener arrays.
     * You can also pass it an event name and an array of listeners to be added.
     *
     * @param {String|Object} evt An event name if you will pass an array of listeners next. An object if you wish to add to multiple events at once.
     * @param {Function[]} [listeners] An optional array of listener functions to add.
     * @return {Object} Current instance of EventEmitter for chaining.
     * @doc
     */
    proto.addListeners = function(evt, listeners) {
        // Pass through to manipulateListeners
        return this.manipulateListeners(false, evt, listeners);
    };

    /**
     * Removes listeners in bulk using the manipulateListeners method.
     * If you pass an object as the second argument you can remove from multiple events at once. The object should contain key value pairs of events and listeners or listener arrays.
     * You can also pass it an event name and an array of listeners to be removed.
     *
     * @param {String|Object} evt An event name if you will pass an array of listeners next. An object if you wish to remove from multiple events at once.
     * @param {Function[]} [listeners] An optional array of listener functions to remove.
     * @return {Object} Current instance of EventEmitter for chaining.
     * @doc
     */
    proto.removeListeners = function(evt, listeners) {
        // Pass through to manipulateListeners
        return this.manipulateListeners(true, evt, listeners);
    };

    /**
     * Edits listeners in bulk. The addListeners and removeListeners methods both use this to do their job. You should really use those instead, this is a little lower level.
     * The first argument will determine if the listeners are removed (true) or added (false).
     * If you pass an object as the second argument you can add/remove from multiple events at once. The object should contain key value pairs of events and listeners or listener arrays.
     * You can also pass it an event name and an array of listeners to be added/removed.
     *
     * @param {Boolean} remove True if you want to remove listeners, false if you want to add.
     * @param {String|Object} evt An event name if you will pass an array of listeners next. An object if you wish to add/remove from multiple events at once.
     * @param {Function[]} [listeners] An optional array of listener functions to add/remove.
     * @return {Object} Current instance of EventEmitter for chaining.
     * @doc
     */
    proto.manipulateListeners = function(remove, evt, listeners) {
        // Initialise any required variables
        var i
          , value
          , single = remove ? this.removeListener : this.addListener
          , multiple = remove ? this.removeListeners : this.addListeners;

        // If evt is an object then pass each of it's properties to this method
        if(typeof evt === 'object') {
            for(i in evt) {
                if(evt.hasOwnProperty(i) && (value = evt[i])) {
                    // Pass the single listener straight through to the singular method
                    if(typeof value === 'function') {
                        single.call(this, i, value);
                    }
                    else {
                        // Otherwise pass back to the multiple function
                        multiple.call(this, i, value);
                    }
                }
            }
        }
        else {
            // So evt must be a string
            // And listeners must be an array of listeners
            // Loop over it and pass each one to the multiple method
            i = listeners.length;
            while(i--) {
                single.call(this, evt, listeners[i]);
            }
        }

        // Return the instance of EventEmitter to allow chaining
        return this;
    };

    /**
     * Removes all listeners from a specified event.
     * If you do not specify an event then all listeners will be removed.
     * That means every event will be emptied.
     *
     * @param {String} [evt] Optional name of the event to remove all listeners for. Will remove from every event if not passed.
     * @return {Object} Current instance of EventEmitter for chaining.
     * @doc
     */
    proto.removeEvent = function(evt) {
        // Remove different things depending on the state of evt
        if(evt) {
            // Remove all listeners for the specified event
            delete this._getEvents()[evt];
        }
        else {
            // Remove all listeners in all events
            delete this._events;
        }

        // Return the instance of EventEmitter to allow chaining
        return this;
    };

    /**
     * Emits an event of your choice.
     * When emitted, every listener attached to that event will be executed.
     * If you pass the optional argument array then those arguments will be passed to every listener upon execution.
     * Because it uses `apply`, your array of arguments will be passed as if you wrote them out separately.
     * So they will not arrive within the array on the other side, they will be separate.
     *
     * @param {String} evt Name of the event to emit and execute listeners for.
     * @param {Array} [args] Optional array of arguments to be passed to each argument.
     * @return {Object} Current instance of EventEmitter for chaining.
     * @doc
     */
    proto.emitEvent = function(evt, args) {
        // Get the listeners for the event
        // Also initialise any other required variables
        var listeners = this.getListeners(evt)
          , i = listeners.length
          , response;

        // Loop over all listeners assigned to the event
        // Apply the arguments array to each listener function
        while(i--) {
            // If the listener returns true then it shall be removed from the event
            // The function is executed either with a basic call or an apply if there is an args array
            response = args ? listeners[i].apply(null, args) : listeners[i]();
            if(response === true) {
                this.removeListener(evt, listeners[i]);
            }
        }

        // Return the instance of EventEmitter to allow chaining
        return this;
    };

    /**
     * Alias of emitEvent
     * @doc
     */
    proto.trigger = proto.emitEvent;

    // Expose the class either via AMD or the global object
    if(typeof define === 'function' && define.amd) {
        define('EventEmitter',[],function() {
            return EventEmitter;
        });
    }
    else {
        exports.EventEmitter = EventEmitter;
    }
}(this));
/**
 * Utility module for handling deferring callbacks when async
 * loading assets, as well as maintaining a pattern of always
 * returning a valid asset handle.
 */

define('common/asset-cache', ['EventEmitter'], function (EventEmitter) {

var AssetCache = function (defaultObject) {
	this.assets = [{
		name: '*default',
		obj: defaultObject
	}];
	this.callbacks = {};
};

AssetCache.prototype = new EventEmitter();
AssetCache.prototype.constructor = AssetCache;

/**
 * Register an object under a name.
 */
AssetCache.prototype.register = function (name, obj) {
	var asset = {
		name: name,
		obj: obj
	};

	this.assets.push(asset);
};

/**
 * Load and register a filename, returning
 * the handle to the callback.
 */
AssetCache.prototype.load = function () {
	var assets = this.assets;

	// Name will always be first and callback last, but
	// a variable number of arguments may be in between.
	var args = Array.prototype.slice.call(arguments);
	var name = args[0];
	var callback = args[args.length - 1];

	// Wrap the callback in our own.
	args[args.length - 1] = function (obj, handle) {
		callback(handle);
	};

	this.findByName.apply(this, args);
};

/**
 * Find asset object by handle.
 */
AssetCache.prototype.findByHandle = function (handle) {
	var assets = this.assets;

	if (typeof(handle) === 'undefined' ||
		handle < 1 || handle >= assets.length) {
		return assets[0].obj;
	}

	return assets[handle].obj;
};

/**
 * Find asset object by name.
 */
AssetCache.prototype.findByName = function () {
	var assets = this.assets;
	var callbacks = this.callbacks;

	var args = Array.prototype.slice.call(arguments);
	var name = args[0];
	var callback = args[arguments.length - 1];

	// Search the currently loaded assets.
	for (var handle = 0; handle < assets.length; handle++) {
		var asset = assets[handle];

		if (asset.name === name) {
			return callback(asset.obj, handle);
		}
	}

	// Append to the pending callback stack if it exists.
	if (callbacks[name]) {
		callbacks[name].push(callback);
		return;
	}

	// Initialize the callback stack.
	callbacks[name] = [callback];

	// Wrap the callback in our own.
	args[args.length - 1] = function (err, obj) {
		var handle;
		var asset;

		if (err) {
			handle = 0;
			asset = assets[0];
		} else {
			handle = assets.length;
			asset = {
				name: name,
				obj: obj
			};
			assets.push(asset);
		}

		// Execute pending callbacks.
		var pending = callbacks[name];
		for (var i = 0; i < pending.length; i++) {
			pending[i](asset.obj, handle);
		}

		// Clear the callback stack.
		delete callbacks[name];
	};

	this.trigger('load', args);
};

return AssetCache;

});
define('common/cvar', [], function () {
	var cvars = {};
	var modifiedFlags = 0;

	/******************************************************
	 *
	 * Core CVAR class
	 *
	 ******************************************************/
	function asInt(val, defaultValue) {
		val = parseInt(val, 10);
		if (isNaN(val)) {
			return defaultValue;
		}
		return val;
	}

	function asFloat(val, defaultValue) {
		val = parseFloat(val);
		if (isNaN(val)) {
			return defaultValue;
		}
		return val;
	}

	function asString(val, defaultValue) {
		val = val.toString();
		if (val === undefined || val  === null) {
			return defaultValue;
		}
		return val;
	}

	function asDefaultType(val, defaultValue) {
		if (typeof(defaultValue) === 'number') {
			if ((defaultValue % 1) === 0) {
				return asInt(val, defaultValue);
			}

			return asFloat(val, defaultValue);
		}

		return asString(val, defaultValue);
	}

	var Cvar = function (defaultValue, flags, latched) {
		this._defaultValue = typeof(defaultValue) === 'undefined' ? 0 : defaultValue;
		this._currentValue = this._defaultValue;
		this._latchedValue = this._defaultValue;
		this._flags = typeof(flags) === 'undefined' ? 0 : flags;

		// Latched cvars will only update their values on subsequent adds.
		this._latched = latched;
	};

	Cvar.prototype.at = function (index) {
		return new CvarCursor(this, index);
	};

	Cvar.prototype.default = function () {
		return this._defaultValue;
	};

	Cvar.prototype.flags = function () {
		return this._flags;
	}

	Cvar.prototype.modified = function () {
		if (this._latched && this._modified) {
			return true
		} else if (this._modified) {
			this._modified = false;
			return true;
		}

		return false;
	};

	Cvar.prototype.get = function (raw) {
		var val = this._latched ? this._latchedValue : this._currentValue;

		if (raw) {
			return val;
		}

		return asDefaultType(val, this._defaultValue);
	};

	Cvar.prototype.set = function (val) {
		this._currentValue = val;

		this._modified = true;

		modifiedFlags |= this._flags;
	};

	// Helper to support getting multi-value cvars.
	var CvarCursor = function (cvar, index) {
		this._cvar = cvar;
		this._index = index;
	};

	CvarCursor.prototype.get = function () {
		var str = this._cvar.get(true).toString();
		var split = str.split(',');

		for (var i = 0; i < split.length; i++) {
			split[i] = split[i].replace(/^\s*/, '').replace(/\s*$/, '');
		}

		// Use the first value if one doesn't exist for the specified index.
		var val = split[this._index];

		if (val === undefined && split[0] !== undefined) {
			val = split[0];
		}

		return asDefaultType(val, this._cvar.default());
	};

	/******************************************************
	 *
	 *
	 *
	 ******************************************************/
	function AddCvar(name, defaultValue, flags, latched) {
		var cvar = GetCvar(name);

		if (cvar) {
			// If the user already created a cvar, update its info.
			if (typeof(defaultValue) !== 'undefined') {
				cvar._defaultValue = defaultValue;
			}
			if (typeof(flags) !== 'undefined') {
				cvar._flags = flags;
			}
			if (typeof(latched) !== 'undefined') {
				cvar._latched = latched;
			}

			// This code path is possibly being hit because a module (e.g. cgame or game)
			// is being reinitialized, so go ahead and relatch.
			cvar._latchedValue = cvar._currentValue;
			cvar._modified = false;

			return cvar;
		}

		// Register the new cvar.
		cvar = cvars[name] = new Cvar(defaultValue, flags, latched);

		return cvar;
	}

	function GetCvar(name) {
		return cvars[name];
	}

	function GetCvarJSON(flag) {
		var data = {};

		for (var name in cvars) {
			if (!cvars.hasOwnProperty(name)) {
				continue;
			}

			var cvar = cvars[name];

			if (!(cvar._flags & flag)) {
				continue;
			}

			data[name] = cvar.get();
		}

		return data;
	}

	function Modified(flag) {
		return (modifiedFlags & flag);
	}

	function ClearModified(flag) {
		modifiedFlags &= ~flag;
	}

	var exports = {
		AddCvar:       AddCvar,
		GetCvar:       GetCvar,

		GetCvarJSON:   GetCvarJSON,

		Modified:      Modified,
		ClearModified: ClearModified
	};

	return exports;
});

define('ui/dom',['require'],function (require) {

var exports = {};

// Maintain references to bound event listeners.
var allListeners = {};

exports.hasClass = function (el, className) {
	var classNames = el.getAttribute('class');
	return classNames && classNames.indexOf(className) !== -1;
};

exports.addClass = function (el, className) {
	var classNames = el.getAttribute('class');
	var classes = classNames ? classNames.split(' ') : [];

	if (classes.indexOf(className) === -1) {
		classes.push(className);
	}

	el.setAttribute('class', classes.join(' '));
};

exports.removeClass = function (el, className) {
	var classNames = el.getAttribute('class');
	var classes = classNames ? classNames.split(' ') : [];

	var idx = classes.indexOf(className);
	if (idx !== -1) {
		classes.splice(idx, 1);
	}

	el.setAttribute('class', classes.join(' '));
};

exports.containsElement = function (parent, child) {
	if (!child) {
		return false;
	}

	var node = child.parentNode;

	while (node !== null) {
		if (node == parent) {
			return true;
		}

		node = node.parentNode;
	}

	return false;
};

exports.documentOffset = function (el) {
	var offset = { top: 0, left: 0 };

	do {
		if (!isNaN(el.offsetTop)) {
			offset.top += el.offsetTop;
		}

		if (!isNaN(el.offsetLeft)) {
			offset.left += el.offsetLeft;
		}
	} while ((el = el.offsetParent));

	return offset;
};


exports.getAllElementsAtPoint = function (container, x, y) {
	// Offset X / Y by container offset so they are in document space.
	var containerOffset = exports.documentOffset(container);
	x += containerOffset.left;
	y += containerOffset.top;

	// Get all the elements in the document at the current X / Y.
	var el = document.elementFromPoint(x, y);

	if (!el) {
		return null;
	}

	// Find all the parents of el that also reside at the X / Y offset.
	var matches = [el];

	var parent = el.parentNode;
	while (parent && parent !== container) {
		var offset = exports.documentOffset(parent);

		var range = {
			x: [offset.left, offset.left + parent.offsetWidth],
			y: [offset.top, offset.top + parent.offsetHeight]
		};

		if ((x >= range.x[0] && x <= range.x[1]) && (y >= range.y[0] && y <= range.y[1])) {
			matches.push(parent);
		}

		parent = parent.parentNode;
	}

	return matches;
};

exports.addEventListener = function (el, type, fn) {
	if (!allListeners[el]) {
		allListeners[el] = {};
	}

	if (!allListeners[el][type]) {
		allListeners[el][type] = [];
	}

	allListeners[el][type].push(fn);

	el.addEventListener(type, fn);
};

exports.removeEventListener = function (el, type, fn) {
	var listeners = allListeners[el];
	if (!listeners) {
		return;
	}

	var listenersForType = listeners[type];
	if (!listenersForType) {
		return;
	}

	// If no function is specified, remove them all.
	if (!fn) {
		for (var i = listenersForType.length - 1; i >= 0 ; i--) {
			el.removeEventListener(type, listenersForType[i]);
			listenersForType.splice(i, 1);
		}
	} else {
		el.removeEventListener(type, fn);

		var idx = listenersForType.indexOf(fn);
		if (idx !== -1) {
			listenersForType.splice(idx, 1);
		}
	}
};

return exports;

});
/**
 * @license RequireJS text 2.0.5 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */
/*jslint regexp: true */
/*global require: false, XMLHttpRequest: false, ActiveXObject: false,
  define: false, window: false, process: false, Packages: false,
  java: false, location: false */

define('text',['module'], function (module) {
    

    var text, fs,
        progIds = ['Msxml2.XMLHTTP', 'Microsoft.XMLHTTP', 'Msxml2.XMLHTTP.4.0'],
        xmlRegExp = /^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,
        bodyRegExp = /<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,
        hasLocation = typeof location !== 'undefined' && location.href,
        defaultProtocol = hasLocation && location.protocol && location.protocol.replace(/\:/, ''),
        defaultHostName = hasLocation && location.hostname,
        defaultPort = hasLocation && (location.port || undefined),
        buildMap = [],
        masterConfig = (module.config && module.config()) || {};

    text = {
        version: '2.0.5',

        strip: function (content) {
            //Strips <?xml ...?> declarations so that external SVG and XML
            //documents can be added to a document without worry. Also, if the string
            //is an HTML document, only the part inside the body tag is returned.
            if (content) {
                content = content.replace(xmlRegExp, "");
                var matches = content.match(bodyRegExp);
                if (matches) {
                    content = matches[1];
                }
            } else {
                content = "";
            }
            return content;
        },

        jsEscape: function (content) {
            return content.replace(/(['\\])/g, '\\$1')
                .replace(/[\f]/g, "\\f")
                .replace(/[\b]/g, "\\b")
                .replace(/[\n]/g, "\\n")
                .replace(/[\t]/g, "\\t")
                .replace(/[\r]/g, "\\r")
                .replace(/[\u2028]/g, "\\u2028")
                .replace(/[\u2029]/g, "\\u2029");
        },

        createXhr: masterConfig.createXhr || function () {
            //Would love to dump the ActiveX crap in here. Need IE 6 to die first.
            var xhr, i, progId;
            if (typeof XMLHttpRequest !== "undefined") {
                return new XMLHttpRequest();
            } else if (typeof ActiveXObject !== "undefined") {
                for (i = 0; i < 3; i += 1) {
                    progId = progIds[i];
                    try {
                        xhr = new ActiveXObject(progId);
                    } catch (e) {}

                    if (xhr) {
                        progIds = [progId];  // so faster next time
                        break;
                    }
                }
            }

            return xhr;
        },

        /**
         * Parses a resource name into its component parts. Resource names
         * look like: module/name.ext!strip, where the !strip part is
         * optional.
         * @param {String} name the resource name
         * @returns {Object} with properties "moduleName", "ext" and "strip"
         * where strip is a boolean.
         */
        parseName: function (name) {
            var modName, ext, temp,
                strip = false,
                index = name.indexOf("."),
                isRelative = name.indexOf('./') === 0 ||
                             name.indexOf('../') === 0;

            if (index !== -1 && (!isRelative || index > 1)) {
                modName = name.substring(0, index);
                ext = name.substring(index + 1, name.length);
            } else {
                modName = name;
            }

            temp = ext || modName;
            index = temp.indexOf("!");
            if (index !== -1) {
                //Pull off the strip arg.
                strip = temp.substring(index + 1) === "strip";
                temp = temp.substring(0, index);
                if (ext) {
                    ext = temp;
                } else {
                    modName = temp;
                }
            }

            return {
                moduleName: modName,
                ext: ext,
                strip: strip
            };
        },

        xdRegExp: /^((\w+)\:)?\/\/([^\/\\]+)/,

        /**
         * Is an URL on another domain. Only works for browser use, returns
         * false in non-browser environments. Only used to know if an
         * optimized .js version of a text resource should be loaded
         * instead.
         * @param {String} url
         * @returns Boolean
         */
        useXhr: function (url, protocol, hostname, port) {
            var uProtocol, uHostName, uPort,
                match = text.xdRegExp.exec(url);
            if (!match) {
                return true;
            }
            uProtocol = match[2];
            uHostName = match[3];

            uHostName = uHostName.split(':');
            uPort = uHostName[1];
            uHostName = uHostName[0];

            return (!uProtocol || uProtocol === protocol) &&
                   (!uHostName || uHostName.toLowerCase() === hostname.toLowerCase()) &&
                   ((!uPort && !uHostName) || uPort === port);
        },

        finishLoad: function (name, strip, content, onLoad) {
            content = strip ? text.strip(content) : content;
            if (masterConfig.isBuild) {
                buildMap[name] = content;
            }
            onLoad(content);
        },

        load: function (name, req, onLoad, config) {
            //Name has format: some.module.filext!strip
            //The strip part is optional.
            //if strip is present, then that means only get the string contents
            //inside a body tag in an HTML string. For XML/SVG content it means
            //removing the <?xml ...?> declarations so the content can be inserted
            //into the current doc without problems.

            // Do not bother with the work if a build and text will
            // not be inlined.
            if (config.isBuild && !config.inlineText) {
                onLoad();
                return;
            }

            masterConfig.isBuild = config.isBuild;

            var parsed = text.parseName(name),
                nonStripName = parsed.moduleName +
                    (parsed.ext ? '.' + parsed.ext : ''),
                url = req.toUrl(nonStripName),
                useXhr = (masterConfig.useXhr) ||
                         text.useXhr;

            //Load the text. Use XHR if possible and in a browser.
            if (!hasLocation || useXhr(url, defaultProtocol, defaultHostName, defaultPort)) {
                text.get(url, function (content) {
                    text.finishLoad(name, parsed.strip, content, onLoad);
                }, function (err) {
                    if (onLoad.error) {
                        onLoad.error(err);
                    }
                });
            } else {
                //Need to fetch the resource across domains. Assume
                //the resource has been optimized into a JS module. Fetch
                //by the module name + extension, but do not include the
                //!strip part to avoid file system issues.
                req([nonStripName], function (content) {
                    text.finishLoad(parsed.moduleName + '.' + parsed.ext,
                                    parsed.strip, content, onLoad);
                });
            }
        },

        write: function (pluginName, moduleName, write, config) {
            if (buildMap.hasOwnProperty(moduleName)) {
                var content = text.jsEscape(buildMap[moduleName]);
                write.asModule(pluginName + "!" + moduleName,
                               "define(function () { return '" +
                                   content +
                               "';});\n");
            }
        },

        writeFile: function (pluginName, moduleName, req, write, config) {
            var parsed = text.parseName(moduleName),
                extPart = parsed.ext ? '.' + parsed.ext : '',
                nonStripName = parsed.moduleName + extPart,
                //Use a '.js' file name so that it indicates it is a
                //script that can be loaded across domains.
                fileName = req.toUrl(parsed.moduleName + extPart) + '.js';

            //Leverage own load() method to load plugin value, but only
            //write out values that do not have the strip argument,
            //to avoid any potential issues with ! in file names.
            text.load(nonStripName, req, function (value) {
                //Use own write() method to construct full module value.
                //But need to create shell that translates writeFile's
                //write() to the right interface.
                var textWrite = function (contents) {
                    return write(fileName, contents);
                };
                textWrite.asModule = function (moduleName, contents) {
                    return write.asModule(moduleName, fileName, contents);
                };

                text.write(pluginName, nonStripName, textWrite, config);
            }, config);
        }
    };

    if (masterConfig.env === 'node' || (!masterConfig.env &&
            typeof process !== "undefined" &&
            process.versions &&
            !!process.versions.node)) {
        //Using special require.nodeRequire, something added by r.js.
        fs = require.nodeRequire('fs');

        text.get = function (url, callback) {
            var file = fs.readFileSync(url, 'utf8');
            //Remove BOM (Byte Mark Order) from utf8 files if it is there.
            if (file.indexOf('\uFEFF') === 0) {
                file = file.substring(1);
            }
            callback(file);
        };
    } else if (masterConfig.env === 'xhr' || (!masterConfig.env &&
            text.createXhr())) {
        text.get = function (url, callback, errback, headers) {
            var xhr = text.createXhr(), header;
            xhr.open('GET', url, true);

            //Allow plugins direct access to xhr headers
            if (headers) {
                for (header in headers) {
                    if (headers.hasOwnProperty(header)) {
                        xhr.setRequestHeader(header.toLowerCase(), headers[header]);
                    }
                }
            }

            //Allow overrides specified in config
            if (masterConfig.onXhr) {
                masterConfig.onXhr(xhr, url);
            }

            xhr.onreadystatechange = function (evt) {
                var status, err;
                //Do not explicitly handle errors, those should be
                //visible via console output in the browser.
                if (xhr.readyState === 4) {
                    status = xhr.status;
                    if (status > 399 && status < 600) {
                        //An http 4xx or 5xx error. Signal an error.
                        err = new Error(url + ' HTTP status: ' + status);
                        err.xhr = xhr;
                        errback(err);
                    } else {
                        callback(xhr.responseText);
                    }
                }
            };
            xhr.send(null);
        };
    } else if (masterConfig.env === 'rhino' || (!masterConfig.env &&
            typeof Packages !== 'undefined' && typeof java !== 'undefined')) {
        //Why Java, why is this so awkward?
        text.get = function (url, callback) {
            var stringBuffer, line,
                encoding = "utf-8",
                file = new java.io.File(url),
                lineSeparator = java.lang.System.getProperty("line.separator"),
                input = new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(file), encoding)),
                content = '';
            try {
                stringBuffer = new java.lang.StringBuffer();
                line = input.readLine();

                // Byte Order Mark (BOM) - The Unicode Standard, version 3.0, page 324
                // http://www.unicode.org/faq/utf_bom.html

                // Note that when we use utf-8, the BOM should appear as "EF BB BF", but it doesn't due to this bug in the JDK:
                // http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4508058
                if (line && line.length() && line.charAt(0) === 0xfeff) {
                    // Eat the BOM, since we've already found the encoding on this file,
                    // and we plan to concatenating this buffer with others; the BOM should
                    // only appear at the top of a file.
                    line = line.substring(1);
                }

                stringBuffer.append(line);

                while ((line = input.readLine()) !== null) {
                    stringBuffer.append(lineSeparator);
                    stringBuffer.append(line);
                }
                //Make sure we return a JavaScript string and not a Java string.
                content = String(stringBuffer.toString()); //String
            } finally {
                input.close();
            }
            callback(content);
        };
    }

    return text;
});

define('text!ui/css/views.css',[],function () { return '/**\n * Main\n */\n@font-face {\n\tfont-family: \'GibsonBold\';\n\tsrc: url(\'data:application/x-font-ttf;base64,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AABBbHRzACAAICIZArwBLABLA58BDQAAAAAAEAAAANAJCgYAAwMDBAUFBwYCBAQEBgIDAgMFBQUFBQUFBQUFAwMFBgUECQcGBgcFBQcHAwMGBQcICAUIBgUGBwcKCAYGBAMEAAUABQUEBQUDBAUDAwUDCAUFBQUEBAQFBQcFBQUDAgMABQYCBQUJBQcAAgcDCQUEBgICBQUDBQYACAMIBgMDBAYFAAcGBgcDBQAFBgEABgQHBwcHBwcJBgUFBQUDAwMDCAgICAgICAcHBwcFBQUFBQUFBwQFBQUFAwMDAwUFBQUFBQUFBQUFBQUDAAEACgsHAAMDAwUFBggHAgQEBQYCAwIEBQUFBQUFBQUFBQMDBgYGBAoIBwcIBgUICAMDBwYICAgGCAYGBwgHCwgHBwQDBAAGAAUGBQYFAwUGAwMFAwkGBgYGBAQEBgUIBgUFAwMDAAUHAgUFCgUIAAMHAwoGBQYCAgUFAwUGAAkDCQcDAwUGBgAIBgcIAwUABgcCAAYECAgICAgICgcGBgYGAwMDAwgICAgICAgICAgIBgUFBQUFBQgFBQUFBQMDAwMGBgYGBgYFBgYGBgYFAwABAAsMCAADAwMFBgYJCAIEBAUHAwQDBAYGBgYGBgYGBgYDAwYHBgULCAcICAYGCAkDBAgGCQkJBgkHBgcJCAwJCAcFAwUABgAGBwUGBgQFBgMDBgMKBgYHBgUEBAYGCAYGBgQDBAAGCAIGBgsGCQADCAQLBgUHAwMGBgQGBwAJBAoIAwMFBwYACAcICAMGAAYHAgAHBQgICAgICAsIBgYGBgMDAwMJCQkJCQkJCQkJCQcGBgYGBgYIBQYGBgYDAwMDBgYGBgYGBgYGBgYGBgMAAQAMDQgAAwMDBgYHCQgDBQUGCAMEAwQGBgYGBgYGBgYGAwMHCAcFDAkICAkHBwkKBAQIBwoKCgcKCAcICgkNCggIBQMFAAcABgcGBwcEBgcDAwcDCwcHBwcFBQUHBgkHBgYEAwQABggDBgYMBgkAAwkEDAcGCAMDBgYEBggACgQKCAMDBggHAAkICAkDBgAHCAIACAUJCQkJCQkMCAcHBwcEBAQECgoKCgoKCgoKCgoHBgYGBgYGCQYHBwcHAwMDAwcHBwcHBwYHBwcHBwYDAAEADQ4JAAQEBAYHBwoJAwUFBggDBAMFBwcHBwcHBwcHBwQEBwgHBg0KCQkKCAcKCgQECQgLCwsHCwgICQoJDgsJCQUEBQAHAAcIBggHBAYIBAQHBAwICAgHBQUFCAcKBwcHBAMEAAcJAwcHDQcKAAMKBA0IBggDAwcHBAcIAAsECwkEBAYIBwAKCAkKBAcABwkCAAgGCgoKCgoKDQkICAgIBAQEBAsLCwsLCwsKCgoKCAcHBwcHBwoGBwcHBwQEBAQICAgICAgHCAgICAgHBAACAA4PCgAEBAQHBwgLCgMGBgcJAwUDBQcHBwcHBwcHBwcEBAgJCAYOCwkKCwgICwsEBQoIDAwMCAwJCAkLCg8MCgkGBAYACAAHCAYICAUHCAQECAQMCAgICAYGBggHCwgHBwUEBQAHCgMHBw4HCwAECgUOCAcJAwMHBwUHCQAMBQwKBAQGCQgACwkKCwQHAAgJAgAJBgsLCwsLCw4KCAgICAQEBAQMDAwMDAwMCwsLCwgHBwcHBwcLBggICAgEBAQECAgICAgIBwgICAgIBwQAAgAPEAsABAQEBwgIDAsDBgYHCgQFBAUICAgICAgICAgIBAQICggHDwsKCwsJCAsMBQUKCQwNDQgNCgkKDAsQDQoKBgQGAAgACAkHCQgFBwkEBAgEDQkJCQgGBgYJCAsICAgFBAUACAoDCAgPCAwABAsFDwkHCgQECAgFCAoADQUNCgQEBwoIAAsKCgsECAAICgIACgcLCwsLCwsPCwkJCQkFBQUFDQ0NDQ0NDQwMDAwJCAgICAgICwcICAgIBAQEBAkJCQkJCQgJCQkJCQgEAAIAEBELAAUFBQgICQ0LBAYGCAoEBQQGCAgICAgICAgICAUFCQoJBxAMCwsMCQkMDQUFCwkNDg4JDgoJCw0MEQ4LCwcEBwAJAAgKBwkJBQgJBQUJBQ4JCQoJBwYGCQgMCQgIBQQFAAgLBAgIEAgNAAQMBRAJCAoEBAgIBQgKAA4FDgsFBQcKCQAMCgsMBQgACQsDAAoHDAwMDAwMEAsJCQkJBQUFBQ4ODg4ODg4NDQ0NCggICAgICAwHCQkJCQUFBQUJCQkJCQkICQkJCQkIBQACABESDAAFBQUICQoNDAQHBwgLBAYEBgkJCQkJCQkJCQkFBQkLCQgRDQsMDQoJDQ4FBQwKDg4OCg4LCgsODBIODAsHBQcACQAJCggKCQYICgUFCQUPCgoKCgcHBwoJDQoJCQYEBgAJDAQJCREJDQAEDAYRCggLBAQJCQYJCwAOBg8MBQUICwoADQsMDQUJAAkLAwALCA0NDQ0NDREMCgoKCgUFBQUODg4ODg4ODg4ODgoJCQkJCQkNCAkJCQkFBQUFCgoKCgoKCQoKCgoKCQUAAgASFA0ABQUFCQkKDg0EBwcJDAQGBAcJCQkJCQkJCQkJBQUKDAoIEg4MDQ4KCg4OBQYMCg8PDwoPDAoMDg0UDwwMCAUIAAoACQsICgoGCQoFBQoFEAoKCwoIBwcKCQ4KCQkGBQYACQwECQkSCQ4ABQ0GEgsIDAQECQkGCQwADwYQDAUFCAwKAA4MDA4FCQAKDAMADAgODg4ODg4SDQoKCgoFBQUFDw8PDw8PDw4ODg4LCQkJCQkJDggKCgoKBQUFBQoKCgoKCgkKCgoKCgkFAAIAExUNAAUFBQkKCw8NBAgICQwFBgUHCgoKCgoKCgoKCgUFCgwKCBMPDQ0PCwoPDwYGDQsQEBALEAwLDQ8OFRANDQgFCAALAAoLCQsKBgkLBQUKBRELCwsLCAgICwoPCwoKBgUGAAoNBAoKEwoPAAUOBhMLCQwFBQoKBgoMABAGEA0FBQkMCwAODA0OBQoACg0DAAwIDw8PDw8PEw0LCwsLBgYGBhAQEBAQEBAPDw8PCwoKCgoKCg8JCgoKCgUFBQULCwsLCwsKCwsLCwsKBQACABQWDgAGBgYKCgsQDgUICAoNBQcFBwoKCgoKCgoKCgoGBgsNCwkUDw0ODwwLDxAGBg4MERERCxENDA0QDhYRDg0IBggACwAKDAkMCwcKDAYGCwYSDAwMCwgICAwKDwsKCgcFBwAKDgUKChQKEAAFDwcUDAkNBQUKCgcKDQARBxEOBgYJDQsADw0ODwYKAAsNAwANCQ8PDw8PDxUODAwMDAYGBgYREREREREREBAQEAwKCgoKCgoPCQsLCwsGBgYGDAwMDAwMCgwMDAwMCgYAAgAVFw8ABgYGCgsMEA8FCAgKDgUHBQgLCwsLCwsLCwsLBgYMDgwJFRAODxAMCxARBgcODBESEgwSDgwOEQ8XEg4OCQYJAAwACw0KDAsHCgwGBgsGEwwMDQwJCAgMCxAMCwsHBQcACw4FCwsVCxEABg8HFQwKDgUFCwsHCw4AEgcSDgYGCg4MABAODhAGCwAMDgMADgkQEBAQEBAWDwwMDAwGBgYGEhISEhISEhERERENCwsLCwsLEAoLCwsLBgYGBgwMDAwMDAsMDAwMDAsGAAMAFhgPAAYGBgsLDBEPBQkJCw4FCAUIDAwMDAwMDAwMDAYGDA4MChYRDw8RDQwREgcHDw0SExMMEw4NDxIQGBMPDwkGCQAMAAwNCg0MCAsNBgYMBhMNDQ0MCQkJDQsRDAwLBwYHAAwPBQwLFgwRAAYQBxYNCg4FBQsLBwwOABMHEw8GBgoODAARDg8RBgwADA8EAA4KERERERERFw8NDQ0NBwcHBxMTExMTExMSEhISDQwMDAwMDBEKDAwMDAYGBgYNDQ0NDQ0MDQ0NDQ0MBgADABcZEAAGBgYLDA0SEAUJCQsPBggGCAwMDAwMDAwMDAwGBg0PDQoXEg8QEg0NEhMHBxANExMTDRMPDQ8TERkTEA8KBgoADQAMDgsNDQgLDQYGDQYUDQ0ODQoJCQ0MEg0MDAgGCAAMEAUMDBcMEgAGEQgXDQsPBgYMDAgMDwAUCBQQBgYLDw0AEQ8QEQYMAA0PBAAPChISEhISEhgQDQ0NDQcHBwcTExMTExMTExMTEw4MDAwMDAwSCw0NDQ0GBgYGDQ0NDQ0NDA0NDQ0NDAYAAwAYGhEABwcHDAwOExEFCgoMDwYIBgkNDQ0NDQ0NDQ0NBwcNDw0LGBIQERIODRITBwgQDhQUFA4UDw4QExEaFBAQCgcKAA0ADQ4LDg0IDA4HBw0HFQ4ODg4KCgoODBIODQwIBggADRAFDQwYDRMABhIIGA4LEAYGDAwIDQ8AFAgVEAcHCw8OABIPEBIHDQANEAQADwsSEhISEhIZEQ4ODg4HBwcHFBQUFBQUFBMTExMODQ0NDQ0NEgsNDQ0NBwcHBw4ODg4ODg0ODg4ODg0HAAMAAAAAAQAABKAAAQDDACoABwRoAAMAAP/ZAAAAAP/6ACMAAP/EACQAAP/aACgAAP/ZAC4AAP+PADEAAP/ZADIAAP/RADYAAP+zADcAAP+yADgAAP/NADkAAP/CADkAAP/QADoAAP/FADsAAP+5ADwAAP/LADwAAP+vAEgAAAAFAFQAAP/+AAQAAP/oAAAAAP/rAAAAAP/ZAAAAAP/aACkAD/+bADoAD/+nAFUAD/+5AFkAD//IAFoAD//HAFwAD//EADMAD/+VADkAD/+jADcAD/+qADwAD/+nADoAEP/HADkAEP/EAFUAEP/0ADwAEP+qADcAEP+tADoAEf+nAFkAEf/HADwAEf+nAFoAEf/HADMAEf+VAFwAEf/CADcAEf+qACkAEf+bADkAEf+jAFUAEf+5ABQAFP+1ADwAHf+pADkAHf+8ADcAHf+dADoAHf++ADwAHv+tADkAHv/BADoAHv/CADcAHv+hADkAJP+sADoAJP+sADwAJP+1AAAAJP/6ADMAJP/RADIAJP/ZACkAJP/ZADcAJP+7AAAAJP/ZAAAAJP/ZADwAJv/HACQAJv/XAAAAJv/oAAAAJv/XACQAKv/ZAAAAKv/pADwAKv/IAAAAKv/xADIAKv/xAAAAKv/rAAAAKv/xAAAAMv/rADwAMv/LACQAMv/aAAAAMv/aAAAANP/yAAAANP/sADIANP/yADwANP/LACQANP/aAAAANP/rAAAANP/yAC8AN/+5AAAAN//1ACQAN/+8AAAAN/+8AAAAOf/3ACQAOf+sAC8AOf+1ADUAOf/aADIAOf/WAAAAOf/1AAAAOf/WAAAAOf/WACQAOv+yAC8AOv+/AAAAOv/7AAAAOv+yAAAAPP/KAAAAPP/3AC8APP+1AAAAPP/1ACQAPP+zADIAPP/KADUAPP/UAAAAPP/KADkARP/IADoARP/LADcARP+wADwARP+1ADoARv+/ADkARv+8ADcARv+sADwARv+pADcAR/+tADkAR/+/ADoAR//CADwAR/+qADcASP+sADoASP/BADkASP++ADwASP+pADoASv/LADcASv+wADkASv/IADwASv+zADkAUP/QADcAUP+nADoAUP/RADwAUP+/ADkAUf/LADoAUf/NADcAUf+jADwAUf+7ADoAUv/BADkAUv++ADcAUv+tADwAUv+qADcAU/+jADkAU//LADoAU//NADwAU/+7ADcAVP+tADoAVP/BADkAVP++ADwAVP+qADoAVf/KADcAVf+gADkAVf/IADwAVf+4ADkAVv/IADcAVv+tADoAVv/LADwAVv+zAAAAV//XADoAWP/NADcAWP+jADwAWP+7ADkAWP/LADoAWf/fADcAWf+1ACQAWf/HADwAWf/NADkAWf/dAAAAWf/pAAAAWf/HACQAWv/LADwAWv/RADoAWv/jADcAWv+5AAAAWv/uADkAWv/iAAAAWv/LADoAW//aADkAW//ZADwAW//IADcAW/+1ADcAXP+1ADkAXP/dADoAXP/fAAAAXP/oACQAXP/TADwAXP/NAAAAXP/TADwAXf/CADkAXf/TADcAXf+yADoAXf/UAwAECggNAAA=\') format(\'truetype\');\n\tfont-weight: normal;\n\tfont-style: normal;\n}\n\n#viewport-ui .pointer {\n\tdisplay: none;\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 13px;\n\theight: 20px;\n\tbackground-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAUCAYAAABWMrcvAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAZpJREFUeNqUk79LAnEUwN9FgXh4wUGIg7g46XCI4NLgcERi0NzQXyBRc/9AU4uDBNFgY4QQgi1phIqKUy2OTimBnYFy/s7Xe0eKmuJ18Pny5b37vO+77/e+gIjnhECAWXjQiat/Sf1+v1mv12mO16alTqejBYNBLJVKLN4SG2ul0WikuVwulCQJy+Uyi3fE1lrJ7XbTDFCWZczlciw+EBZTEsMrZjIZFh8J0ZTEiKI4EXmQTEmMzWbDdDrNYnZRXCkxVqsVU6kUi8/EtimJEQQB4/E4i3lCZmkTVjyqqoLX64VWqwV0hhAKhXbtdnuWUgdzkqIo0G63oVqtAm0GRKNRDj8RnwS/KxHHMBwONafTiX6/H3VdN1qZtJZIJLityz+7R5W1SCSCjUbjmwI3VOQjEAgYks/nw16v16W4MieNx+OvwWDAFc9+gxfJZHK6WiwW49z94tVoEiczwR3iPRwOG5LD4cBarcaiOisdLvlVTguFgiF5PB6sVCqTs5pKy7DQ+b0Vi0XsdvmT8IXYWycxR8Qrsb+Y+xFgABTcmOagLuC4AAAAAElFTkSuQmCC\');\n\n\tz-index: 1;\n\t/* Don\'t let elementFromPoint() return the actual pointer */\n\tpointer-events: none;\n}\n\n#viewport-ui.active .pointer {\n\tdisplay: inline-block;\n}\n\n#viewport-ui .fullscreen {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tbottom: 0;\n\tright: 0;\n}\n\n#viewport-ui .logo {\n\twidth: 20em;\n\theight: 20em;\n\tmargin: 0 auto 2em;\n}\n\n#viewport-ui h1, #viewport-ui h2 {\n\tfont-family: \'GibsonBold\', sans-serif;\n}\n\n#viewport-ui a {\n\tcolor: #fff;\n\ttext-decoration: none;\n}\n\n/**\n * Text colors\n */\n\tBLACK:   0,\n\tRED:     1,\n\tGREEN:   2,\n\tYELLOW:  3,\n\tBLUE:    4,\n\tCYAN:    5,\n\tMAGENTA: 6,\n\tWHITE:   7\n.black {\n\tcolor: #000;\n}\n\n.red {\n\tcolor: #ff0000;\n}\n\n.green {\n\tcolor: #00dd00;\n}\n\n.yellow {\n\tcolor: #ffff00;\n}\n\n.blue {\n\tcolor: #0000ff;\n}\n\n.cyan {\n\tcolor: #00ffff;\n}\n\n.magenta {\n\tcolor: #ff00ff;\n}\n\n.white {\n\tcolor: #fff;\n}\n\n/**\n * Dialogs\n */\n.dialog {\n\tposition: relative;\n\twidth: 60%;\n\tmargin: 8em auto 0;\n\tbackground: #1b1b1b;\n\tcolor: #fff;\n}\n\n.dialog .close.hover {\n\tcolor: #bfbfbf;\n}\n\n.dialog .sections {\n\tlist-style: none;\n\tmargin: 0;\n\tpadding: 0;\n\toverflow: hidden;\n\tbackground-image: -moz-linear-gradient(top, #222, #111);\n\tbackground-image: -webkit-linear-gradient(top, #222, #111);\n\tborder-bottom: 1px solid #252525;\n}\n\n.dialog .sections li {\n\tfloat: left;\n\tmargin: 0;\n\tpadding: 0;\n\tfont-size: 1.1em;\n\ttext-transform: uppercase;\n}\n\n.dialog .sections li a {\n\tdisplay: inline-block;\n\tpadding: .6em 1em;\n\tborder-right: 1px solid #111;\n\tborder-left: 1px solid #222;\n}\n\n.dialog .sections li:first-child a {\n\tborder-left: none;\n}\n\n.dialog .sections li:last-child a {\n\tborder-right: none;\n}\n\n.dialog .sections li.active a,\n.dialog .sections li.hover a {\n\tbackground: #050505;\n}\n\n.dialog .sections li.active a {\n\tcolor: #15e000 !important;\n}\n\n.dialog .content {\n\tpadding: 1.2em 1.6em;\n}\n\n/**\n * TABLES\n */\n.table {\n\twidth: 100%;\n\tborder-collapse: collapse;\n}\n\n.table th,\n.table td {\n\tpadding: .4em 1em;\n\tborder: 1px solid #000;\n}\n\n.table thead th {\n\tbackground-image: -moz-linear-gradient(top, #181818, #121212);\n\tbackground-image: -webkit-linear-gradient(top, #181818, #121212);\n\ttext-align: left;\n\ttext-transform: uppercase;\n\tfont-size: 1.1em;\n\tcolor: #aaa;\n}\n\n.table tbody td {\n\tbackground: #181818;\n}\n\n.table tbody tr:nth-child(odd) td {\n\tbackground: #121212;\n}\n\n.table tbody tr.hover td {\n\tbackground: #050505;\n}\n\n/**\n * Progress bar\n */\n.progress {\n\tdisplay: block;\n\tbackground: -moz-linear-gradient(top, #222, #303030);\n\tbackground: -webkit-linear-gradient(top, #222, #303030);\n\tbox-shadow: inset 0 1px 2px rgba(0, 0, 0, .1);\n\tborder-radius: 2px;\n}\n\n.progress .bar {\n\twidth: 0;\n\tbackground: -moz-linear-gradient(top, #8cc84b, #448800);\n\tbackground: -webkit-linear-gradient(top, #8cc84b, #448800);\n\tbox-shadow: inset 0 -1px 0 rgba(0, 0, 0, .15);\n\t-moz-transition: width .6s ease;\n\t-webkit-transition: width .6s ease;\n}\n\n/**\n * Controls\n */\n.control-group {\n\tmargin-bottom: .5em;\n}\n\n.control-label {\n\tfloat: left;\n\tpadding: .5em 0 0;\n\twidth: 12em;\n\tcolor: #a6e22e;\n\ttext-align: right\n}\n\n.control-input {\n\tpadding: .5em;\n\tmargin-left: 13em;\n\t/* Empty fields */\n\tmin-height: 10px;\n}\n\n.control-input.input-text,\n.control-input.input-key,\n.control-input.input-radio {\n\tbackground: rgba(34, 34, 34, 0.8);\n\tborder: 1px solid transparent;\n}\n\n.control-input.input-text.hover,\n.control-input.input-key.hover,\n.control-input.input-radio.hover {\n\tbackground: rgba(51, 51, 51, 0.8);\n}\n\n.control-input.input-text.focus,\n.control-input.input-key.focus {\n\tborder-color: rgba(166, 226, 46, 0.8);\n\t-webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 8px rgba(166, 226, 46, 0.6);\n\t-moz-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 8px rgba(166, 226, 46, 0.6);\n\tbox-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 8px rgba(166, 226, 46, 0.6)\n}\n\n.control-input.input-text {\n\tword-wrap: break-word;\n}\n\n.control-input.input-radio:before {\n\tcontent: \'off\';\n}\n\n.control-input.input-radio[value=true]:before {\n\tcontent: \'on\';\n}\n\n.form-horizontal .form-actions {\n\tmargin-left: 11em;\n}\n\n/**\n * Tabs\n */\n.tab-pane {\n\tdisplay: none;\n}\n\n.tab-pane.active {\n\tdisplay: block;\n}\n\n/**\n * Ranges\n */\n.input-range {\n\tposition: relative;\n\theight: 1em;\n}\n\n.input-range .range-track {\n\theight: 100%;\n\tbackground: -moz-linear-gradient(top, #222, #303030);\n\tbackground: -webkit-linear-gradient(top, #222, #303030);\n\tbox-shadow: inset 0 1px 2px rgba(0, 0, 0, .1);\n}\n\n.input-range .range-slider {\n\tposition: absolute;\n\ttop: .5em;\n\tleft: 0;\n\tbackground: -moz-linear-gradient(top, #8cc84b, #448800);\n\tbackground: -webkit-linear-gradient(top, #8cc84b, #448800);\n\tbox-shadow: inset 0 -1px 0 rgba(0, 0, 0, .15);\n\twidth: 1em;\n\theight: 1em;\n\tcontent: \'\';\n}\n\n/**********************************************************\n *\n * Specialized\n *\n **********************************************************/\n#logo {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tbottom: 0;\n\tright: 0;\n\tbackground-repeat: no-repeat;\n\tbackground-attachment: fixed;\n\tbackground-position: center;\n}\n\n/**\n * Main menu\n */\n#main {\n\tbackground: #000;\n}\n\n/**\n * Ingame menu\n */\n#ingame p {\n\tmargin: .4em 0 1.4em 0;\n}\n\n#ingame .table th:first-child {\n\twidth: 12em;\n}\n\n#ingame #team-select {\n\tmargin-bottom: 1em;\n}\n\n/**\n * Settings menu\n */\n\n\n/**\n * Message menu\n */\n#message {\n\tposition: absolute;\n\tpadding: .7em;\n\tbottom: 6em;\n\tleft: 0em;\n\tbackground: #1b1b1b;\n\tcolor: #fff;\n\tbackground-image: -moz-linear-gradient(top, #222, #111);\n\tbackground-image: -webkit-linear-gradient(top, #222, #111);\n}\n\n#message .control-group {\n\tmargin: 0;\n}\n\n#message .control-input {\n\tmargin: 0;\n\twidth: 30em;\n\t-webkit-box-sizing: border-box;\n\t   -moz-box-sizing: border-box;\n\t        box-sizing: border-box;\n}\n\n/**\n * Loading view\n */\n#loading {\n\tbackground: #000;\n}\n\n#loading.hidden {\n\topacity: 0;\n\tvisibility: hidden;\n\t-moz-transition: visibility .2s, opacity .2s ease-out;\n\t-webkit-transition: visibility .2s, opacity .2s ease-out;\n}\n\n#loading .loading {\n\tposition: absolute;\n\ttop: 50%;\n\tleft: 50%;\n\tdisplay: block;\n\tmargin-top: -2.5em;\n\tmargin-left: -16em;\n\tpadding: 1em;\n\ttext-align: center;\n\tbackground: rgba(0, 0, 0, 0.95);\n\tborder-radius: 0.2em;\n}\n\n#loading .loading .progress {\n\twidth: 30em;\n\tmargin: 1em auto 0;\n}\n\n/**\n * Hud view\n */\n#hud {\n\tpadding: 1em;\n}\n\n#scores-wrapper {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n}\n\n#scores-wrapper .scores {\n\tmargin: .7em;\n\tbox-shadow: 0 0 10px rgba(50, 50, 50, .5);\n\tborder-radius: 0 0 .2em 0;\n}\n\n#scores-wrapper .score-wrapper {\n\tpadding: .2em .6em;\n}\n\n#scores-wrapper .status {\n\tfont-size: .8em;\n\tdisplay: inline-block;\n\tpadding: .2em .4em;\n}\n\n#scores-wrapper .status .player {\n\tdisplay: inline-block;\n\twidth: .8em;\n\theight: .8em;\n}\n\n#scores-wrapper .name {\n\tdisplay: inline-block;\n\twidth: 10em;\n\twhite-space: nowrap;\n\toverflow: hidden;\n}\n\n#scores-wrapper .score {\n\ttext-align: right;\n}\n\n#scores-wrapper .team-free.localplayer {\n\tbackground: rgba(255, 255, 0, 0.4);\n\tborder: .1em solid rgba(255, 255, 0, 0.4);\n\tborder-radius: .1em;\n}\n\n#scores-wrapper .team-red {\n\tbackground: rgba(155, 0, 0, 0.4);\n\tborder-radius: .1em;\n\tcolor: #bbb;\n}\n\n#scores-wrapper .team-red.localplayer {\n\tcolor: #fff;\n}\n\n#scores-wrapper .team-blue {\n\tbackground: rgba(0, 0, 155, 0.4);\n\tborder-radius: .1em;\n\tcolor: #bbb;\n}\n\n#scores-wrapper .team-blue.localplayer {\n\tcolor: #fff;\n}\n\n#scores-wrapper .team-red .status {\n\tbackground: rgba(255, 0, 0, 0.4);\n\tborder-radius: .2em;\n}\n\n#scores-wrapper .team-blue .status {\n\tbackground: rgba(0, 0, 255, 0.4);\n\tborder-radius: .2em;\n\n}\n\n#events-wrapper {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 17em;\n\twidth: 30em;\n\tpadding: .7em;\n}\n\n#events {\n\tmargin: 0;\n\tpadding: 0;\n\tlist-style: none;\n\tword-wrap: break-word;\n}\n\n#warmup {\n\tposition: absolute;\n\ttop: 20%;\n\tleft: 0;\n\tright: 0;\n\tfont-size: 1.6em;\n\ttext-align: center;\n}\n\n#centerprint {\n\tposition: absolute;\n\ttop: 30%;\n\tleft: 50%;\n\tmargin-left: -8em;\n\twidth: 16em;\n\tfont-size: 2em;\n\ttext-align: center;\n\ttext-shadow: 0.1em 0.1em 0.05em #000;\n\n\topacity: 1;\n\t-webkit-transition: opacity 0s;\n\t   -moz-transition: opacity 0s;\n\t        transition: opacity 0s;\n}\n\n#centerprint.hidden {\n\topacity: 0;\n\t-webkit-transition: opacity .2s ease-out;\n\t   -moz-transition: opacity .2s ease-out;\n\t        transition: opacity .2s ease-out;\n}\n\n#crosshair {\n\tposition: absolute;\n\ttop: 50%;\n\tleft: 50%;\n\tmargin-top: -1em;\n\tmargin-left: -1em;\n\twidth: 2.2em;\n\theight: 2.2em;\n}\n\n#crosshair-name {\n\tposition: absolute;\n\ttop: 50%;\n\tleft: 50%;\n\tmargin-top: -2.5em;\n\tmargin-left: -5em;\n\twidth: 10em;\n\ttext-align: center;\n\toverflow: hidden;\n}\n\n#crosshair-name.visible {\n\topacity: 1;\n\t-webkit-transition: opacity 0s;\n\t   -moz-transition: opacity 0s;\n\t        transition: opacity 0s;\n}\n\n#crosshair-name.hidden {\n\topacity: 0;\n\t-webkit-transition: opacity .2s ease-out;\n\t   -moz-transition: opacity .2s ease-out;\n\t        transition: opacity .2s ease-out;\n}\n\n#fps-wrapper {\n\tposition: absolute;\n\ttop: 1em;\n\tright: 1em;\n}\n\n#weapons-wrapper {\n\tposition: absolute;\n\ttop: 10em;\n\tleft: 0;\n}\n\n#weapons-wrapper .weapons {\n\tmargin: 0;\n\tpadding: 0;\n\tlist-style: none;\n}\n\n#weapons-wrapper .weapons li {\n\tdisplay: block;\n\tpadding: .3em .5em .3em 1em;\n}\n\n#weapons-wrapper .weapons li.selected {\n\tbackground: -moz-linear-gradient(top, rgba(48, 48, 48, .8), rgba(16, 16, 16, .8));\n\tbackground: -webkit-linear-gradient(top, rgba(48, 48, 48,  .8), rgba(16, 16, 16, .8));\n\tbox-shadow: 1px 1px 5px rgba(0, 0, 0, .5);\n\tborder-radius: 0 .2em .2em 0;\n}\n\n#weapons-wrapper .weapons li .icon {\n\tfloat: left;\n\tdisplay: block;\n\twidth: 2em;\n\theight: 2em;\n}\n\n#weapons-wrapper .weapons li .ammo {\n\tdisplay: block;\n\tmargin-left: 2.2em;\n\tpadding: 0 .5em;\n\tline-height: 2em;\n}\n\n#health-wrapper {\n\tposition: absolute;\n\tright: 50%;\n\tbottom: 0;\n\tmargin-right: 2em;\n}\n\n#armor-wrapper {\n\tposition: absolute;\n\tleft: 50%;\n\tbottom: 0;\n\tmargin-left: 2em;\n}\n\n#health-icon,\n#armor-icon {\n\tdisplay: inline-block;\n\twidth: 2em;\n\theight: 2em;\n}\n\n#health-text,\n#armor-text {\n\tfont-size: 4em;\n}\n\n#lagometer-wrapper {\n\tposition: absolute;\n\tbottom: 1em;\n\tleft: 1em;\n\theight: 10em;\n\toverflow: hidden;\n\tbackground: rgba(0, 0, 0, 0.7);\n}\n\n#lagometer-wrapper .lag-frame,\n#lagometer-wrapper .snapshot-frame {\n\tfloat: left;\n\twidth: 0.15625em;\n\theight: 10em;\n\tbackground: #ff0000;\n}\n\n#lagometer-wrapper .snapshot-frame {\n\tbackground: #00ff00;\n}\n\n#counts-wrapper {\n\tposition: absolute;\n\tbottom: 1em;\n\tright: 1em;\n}\n\n#counts-wrapper .count-label {\n\tdisplay: inline-block;\n\twidth: 9em;\n\ttext-align: right;\n}\n\n#counts-wrapper .count-value {\n\tdisplay: inline-block;\n\twidth: 4em;\n}\n\n/**\n * Scoreboard view\n */\n#scoreboard-wrapper {\n\tposition: absolute;\n\ttop: 15%;\n\tleft: 20%;\n\tright: 20%;\n\tpadding: 2em;\n}\n\n#scoreboard-wrapper .summary {\n\tmargin-bottom: 1em;\n\tpadding: .7em 1em;\n\tbackground: rgba(0, 0, 0, 0.3);\n\tborder-radius: .5em;\n}\n\n#scoreboard-wrapper .scores {\n\tposition: relative;\n\tmargin-bottom: 1em;\n\theight: 20em;\n}\n\n#scoreboard-wrapper .team {\n\tbackground: rgba(0, 0, 0, 0.3);\n}\n\n#scoreboard-wrapper .team .header {\n\tpadding: .4em .7em;\n}\n\n#scoreboard-wrapper .team .status {\n\tdisplay: inline-block;\n\tpadding: .2em .4em;\n\tfont-size: .8em;\n}\n\n#scoreboard-wrapper .team-red {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tright: 50%;\n\tbottom: 0;\n}\n\n#scoreboard-wrapper .team-red .header,\n#scoreboard-wrapper .team-red .status {\n\tbackground: rgba(155, 0, 0, 0.4);\n}\n\n#scoreboard-wrapper .team-blue {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 50%;\n\tright: 0;\n\tbottom: 0;\n}\n\n#scoreboard-wrapper .team-blue .header,\n#scoreboard-wrapper .team-blue .status {\n\tbackground: rgba(0, 0, 155, 0.4);\n}\n\n#scoreboard-wrapper table {\n\tbox-sizing: border-box;\n\twidth: 100%;\n\tcolor: #fff;\n\tborder: .6em solid transparent;\n\tborder-left-width: 1em;\n\tborder-right-width: 1em;\n}\n\n#scoreboard-wrapper table th {\n\ttext-align: left;\n\tcolor: #ffff00;\n}\n\n#scoreboard-wrapper .eliminated {\n\tcolor: #666;\n}\n\n#scoreboard-wrapper .spectators {\n\tbackground: rgba(0, 0, 0, 0.3);\n\tborder-radius: .5em;\n\toverflow: hidden;\n}\n\n#scoreboard-wrapper .spectators .header {\n\tfloat: left;\n\tpadding: .7em 1em;\n\tbackground: rgba(20, 20, 200, 0.7);\n\tborder-radius: .5em;\n\ttext-transform: uppercase;\n}\n\n#scoreboard-wrapper .spectators ul {\n\tlist-style: none;\n\tmargin: 0;\n\tpadding: .7em 1em;\n\tfloat: left;\n}\n\n#scoreboard-wrapper .spectators li {\n\tfloat: left;\n}';});

define('text!ui/templates/currentgame.tpl',[],function () { return '<p data-bind="if: rocketarena() && lobby()">\n\tWelcome! You\'re currently in the lobby. Select an arena from below or run through a portal to join an arena and get started fragging.\n</p>\n<p data-bind="if: rocketarena() && !lobby()">\n\tCurrently on team <span data-bind="text: currentTeamName"></span> in <span data-bind="text: currentArena().name"></span>. You can change your team or arena by selecting one from below.\n</p>\n\n<div id="team-select" data-bind="if: !rocketarena() || (rocketarena() && !lobby())">\n\t<table class="table">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th>Name</th>\n\t\t\t\t<th>Players</th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<!-- ko if: gametype() === \'team\' || gametype() === \'ctf\' || gametype() === \'nfctf\' || gametype() === \'ca\' -->\n\t\t\t<tr>\n\t\t\t\t<td data-bind="event: { click: function (data, ev) { joinTeam(ev, \'red\'); } }"><span class="red">RED</span></td>\n\t\t\t\t<td data-bind="event: { click: function (data, ev) { joinTeam(ev, \'red\'); } }, text: \'foobar\'"></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td data-bind="event: { click: function (data, ev) { joinTeam(ev, \'blue\'); } }"><span class="blue">BLUE</span></td>\n\t\t\t\t<td data-bind="event: { click: function (data, ev) { joinTeam(ev, \'blue\'); } }, text: \'foobar\'"></td>\n\t\t\t</tr>\n\t\t\t<!-- /ko -->\n\t\t</tbody>\n\t</table>\n</div>\n\n<div id="arena-select" data-bind="if: arenas().length > 1">\n\t<table class="table">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th>Arena</th>\n\t\t\t\t<th>Gametype</th>\n\t\t\t\t<th>Players</th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody data-bind="foreach: arenas">\n\t\t\t<tr data-bind="visible: $index() !== 0">\n\t\t\t\t<td data-bind="event: { click: function () { $parent.joinArena($index()); } }, text: name"></td>\n\t\t\t\t<td data-bind="event: { click: function () { $parent.joinArena($index()); } }, text: type"></td>\n\t\t\t\t<td data-bind="event: { click: function () { $parent.joinArena($index()); } }, text: numClients"></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n</div>';});

define('text!ui/templates/default.tpl',[],function () { return '<div id="default" data-bind="visible: visible">\n\t<div id="logo" data-bind="img: \'ui/logo.png\'"></div>\n</div>';});

define('text!ui/templates/hud.tpl',[],function () { return '<div id="hud" class="fullscreen" data-bind="visible: visible">\n\t<div id="scores-wrapper">\n\t\t<div class="scores">\n\t\t\t<!-- ko if: gametype() === \'ffa\' || gametype() === \'tournament\' -->\n\t\t\t\t<div class="score-wrapper score1 team-free" data-bind="visible: score1.visible, css: { localplayer: score1.localplayer }">\n\t\t\t\t\t<span class="name" data-bind="text: score1.rank() + \'. \' + score1.name()"></span>\n\t\t\t\t\t<span class="score" data-bind="text: score1.score"></span>\n\t\t\t\t</div>\n\t\t\t\t<div class="score-wrapper score2 team-free" data-bind="visible: score2.visible, css: { localplayer: score2.localplayer }">\n\t\t\t\t\t<span class="name" data-bind="text: score2.rank() + \'. \' + score2.name()"></span>\n\t\t\t\t\t<span class="score" data-bind="text: score2.score"></span>\n\t\t\t\t</div>\n\t\t\t<!-- /ko -->\n\t\t\t<!-- ko if: gametype() === \'team\' || gametype() === \'ctf\' || gametype() === \'nfctf\' || gametype() === \'ca\' -->\n\t\t\t\t<div class="score-wrapper score1 team-red" data-bind="visible: score1.visible, css: { localplayer: score1.localplayer }">\n\t\t\t\t\t<span class="status"><span class="player" data-bind="img: \'icons/player.png\'">&nbsp;</span> <span data-bind="text: score1.count"></span></span>\n\t\t\t\t\t<span class="name">Red Team</span>\n\t\t\t\t\t<span class="score" data-bind="text: score1.score"></span>\n\t\t\t\t</div>\n\t\t\t\t<div class="score-wrapper score2 team-blue" data-bind="visible: score2.visible, css: { localplayer: score2.localplayer }">\n\t\t\t\t\t<span class="status"><span class="player" data-bind="img: \'icons/player.png\'">&nbsp;</span> <span data-bind="text: score2.count"></span></span>\n\t\t\t\t\t<span class="name">Blue Team</span>\n\t\t\t\t\t<span class="score" data-bind="text: score2.score"></span>\n\t\t\t\t</div>\n\t\t\t<!-- /ko -->\n\t\t</div>\n\t</div>\n\n\t<div id="events-wrapper">\n\t\t<ul id="events" data-bind="foreach: events">\n\t\t\t<li class="event">\n\t\t\t\t<span data-bind="html: text"></span>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n\n\t<div id="warmup" data-bind="visible: gamestate() <= 2, text: warmup"></div>\n\t<div id="centerprint" data-bind="css: { hidden: !centerPrintVisible() }, html: centerPrint"></div>\n\n\t<div id="crosshair" data-bind="visible: alive, img: \'gfx/2d/crosshairb\'"></div>\n\t<div id="crosshair-name" data-bind="visible: alive, css: { hidden: !crosshairNameVisible() }, text: crosshairName"></div>\n\n\t<div id="fps-wrapper">\n\t\t<span id="fps" data-bind="text: fps"></span> FPS\n\t</div>\n\n\t<div id="weapons-wrapper" data-bind="visible: alive">\n\t\t<ul class="weapons" data-bind="foreach: weapons">\n\t\t\t<!-- ko if: $data && icon -->\n\t\t\t<li class="weapon" data-bind="css: { selected: $index() === $parent.weaponSelect() }">\n\t\t\t\t<span class="icon" data-bind="img: icon"></span>\n\t\t\t\t<span class="ammo" data-bind="text: ammo() > -1 ? ammo() : \'&nbsp\'"></span>\n\t\t\t</li>\n\t\t\t<!-- /ko -->\n\t\t</ul>\n\t</div>\n\n\t<div id="health-wrapper" data-bind="visible: alive">\n\t\t<span id="health-text" data-bind="text: health"></span>\n\t\t<span id="health-icon" data-bind="img: \'icons/iconh_green.png\'"></span>\n\t</div>\n\n\t<div id="armor-wrapper" data-bind="visible: alive">\n\t\t<span id="armor-icon" data-bind="img: \'icons/iconr_yellow.png\'"></span>\n\t\t<span id="armor-text" data-bind="text: armor"></span>\n\t</div>\n\n\t<div id="lagometer-wrapper" data-bind="visible: lagometerVisible">\n\t\t<div class="lag-frames" data-bind="foreach: frames">\n\t\t\t<div class="lag-frame" data-bind="style: { height: Math.abs((val() / 1000) * 10) + \'em\', bottom: (val() / 1000) * 10 < 0 ? ((val() / 1000) * 10) + \'em\' : 0 }">&nbsp</div>\n\t\t</div>\n\t\t<div class="snapshot-frames" data-bind="foreach: snapshots">\n\t\t\t<div class="snapshot-frame" data-bind="style: { height: Math.abs((val() / 1000) * 10) + \'em\', bottom: (val() / 1000) * 10 < 0 ? ((val() / 1000) * 10) + \'em\' : 0 }">&nbsp</div>\n\t\t</div>\n\t</div>\n\n\t<div id="counts-wrapper" data-bind="visible: countsVisible">\n\t\t<div><span class="count-label">Shaders:</span> <span class="count-value" data-bind="text: shaders"></span></div>\n\t\t<div><span class="count-label">Nodes:</span> <span class="count-value" data-bind="text: nodes() + \'/\' + leafs()"></span></div>\n\t\t<div><span class="count-label">Surfaces:</span> <span class="count-value" data-bind="text: surfaces"><%- surfaces %></span></div>\n\t\t<div><span class="count-label">Indexes:</span> <span class="count-value" data-bind="text: indexes"><%- indexes %></span></div>\n\t\t<div><span class="count-label">Culled mod out:</span> <span class="count-value" data-bind="text: culledModelOut"><%- culledModelOut %></span></div>\n\t\t<div><span class="count-label">Culled mod in:</span> <span class="count-value" data-bind="text: culledModelIn"><%- culledModelIn %></span></div>\n\t\t<div><span class="count-label">Culled mod clip:</span> <span class="count-value" data-bind="text: culledModelClip"><%- culledModelClip %></span>\n\t</div>\n</div>';});

define('text!ui/templates/loading.tpl',[],function () { return '<div id="loading" class="fullscreen" data-bind="visible: visible">\n\t<div id="logo" data-bind="img: \'ui/logo.png\'"></div>\n\t<div class="loading">\n\t\t<div class="description">Loading <span class="map-name" data-bind="text: mapName"></span></div>\n\t\t<div class="progress">\n\t\t\t<div class="bar" data-bind="style: { width: progress() + \'%\' }">&nbsp;</div>\n\t\t</div>\n\t</div>\n</div>';});

define('text!ui/templates/message.tpl',[],function () { return '<div id="message" data-bind="visible: visible">\n\t<div class="control-group">\n\t\t<div name="say" class="control-input input-text" data-bind="textinput: \'\', hasfocus: visible, event: { keypress: keyPress }"></div>\n\t</div>\n</div>';});

define('text!ui/templates/scoreboard.tpl',[],function () { return '<div id="scoreboard" class="fullscreen" data-bind="visible: visible">\n\t<div id="scoreboard-wrapper">\n\t\t<!-- ko if: gametype() === \'ffa\' || gametype() === \'tournament\' -->\n\t\t<div class="scores">\n\t\t\t<div class="team team-free">\n\t\t\t\t<table>\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>Name</th>\n\t\t\t\t\t\t\t<th>Ping</th>\n\t\t\t\t\t\t\t<th>Score</th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t<tbody data-bind="foreach: freeScores">\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td data-bind="text: name + \' (\' + spectatorNum + \')\'"></td>\n\t\t\t\t\t\t\t<td data-bind="text: ping"></td>\n\t\t\t\t\t\t\t<td data-bind="text: score"></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t</div>\n\t\t<!-- /ko -->\n\n\t\t<!-- ko if: gametype() === \'team\' || gametype() === \'ctf\' || gametype() === \'nfctf\' || gametype() === \'ca\' -->\n\t\t<div class="summary">\n\t\t\t<span data-bind="if: score1() > score2()">\n\t\t\t\tRed team leads Blue, <span data-bind="text: score1"></span> to <span data-bind="text: score2"></span>\n\t\t\t</span>\n\t\t\t<span data-bind="if: score2() > score1()">\n\t\t\t\tBlue team leads red, <span data-bind="text: score2"></span> to <span data-bind="text: score1"></span>\n\t\t\t</span>\n\t\t\t<span data-bind="if: score1() === score2()">\n\t\t\t\tTeams are tied, <span data-bind="text: score1"></span> to <span data-bind="text: score2"></span>\n\t\t\t</span>\n\t\t</div>\n\n\t\t<div class="scores">\n\t\t\t<div class="team team-red">\n\t\t\t\t<div class="header">\n\t\t\t\t\t<span class="status"><span class="player" data-image="icons/player.png">&nbsp;</span> <span data-bind="text: redScores().length"></span></span> Red Team\n\t\t\t\t</div>\n\t\t\t\t<table>\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>Name</th>\n\t\t\t\t\t\t\t<th>Ping</th>\n\t\t\t\t\t\t\t<th>Score</th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t<tbody data-bind="foreach: redScores">\n\t\t\t\t\t\t<tr data-bind="css: { eliminated: score.eliminated }">\n\t\t\t\t\t\t\t<td data-bind="text: name + \' (\' + spectatorNum + \')\'"></td>\n\t\t\t\t\t\t\t<td data-bind="text: ping"></td>\n\t\t\t\t\t\t\t<td data-bind="text: score"></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t</div>\n\n\t\t\t<div class="team team-blue">\n\t\t\t\t<div class="header">\n\t\t\t\t\t<span class="status"><span class="player" data-image="icons/player.png">&nbsp;</span> <span data-bind="text: blueScores().length"></span> Blue Team\n\t\t\t\t</div>\n\t\t\t\t<table>\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>Name</th>\n\t\t\t\t\t\t\t<th>Ping</th>\n\t\t\t\t\t\t\t<th>Score</th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t<tbody data-bind="foreach: blueScores">\n\t\t\t\t\t\t<tr data-bind="css: { eliminated: score.eliminated }">\n\t\t\t\t\t\t\t<td data-bind="text: name + \' (\' + spectatorNum + \')\'"></td>\n\t\t\t\t\t\t\t<td data-bind="text: ping"></td>\n\t\t\t\t\t\t\t<td data-bind="text: score"></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t</div>\n\t\t<!-- /ko -->\n\n\t\t<div class="spectators">\n\t\t\t<div class="header">Spectators</div>\n\t\t\t<ul data-bind="foreach: specScores">\n\t\t\t\t<li data-bind="text: name + \' (\' + spectatorNum + \')\'"></li>\n\t\t\t</ul>\n\t\t</div>\n\t</div>\n</div>';});

define('text!ui/templates/settings.tpl',[],function () { return '<ul class="sections">\n\t<li><a href="#controls" data-bind="tab: true">Controls</a></li>\n\t<li><a href="#character" data-bind="tab: false">Character</a></li>\n\t<li><a href="#game" data-bind="tab: false">Game</a></li>\n</ul>\n\n<div class="content">\n\t<div class="tab-pane" id="controls">\n\t\t<ul class="sections">\n\t\t\t<li><a href="#move" data-bind="tab: true">Move</a></li>\n\t\t\t<li><a href="#look" data-bind="tab: false">Look</a></li>\n\t\t\t<li><a href="#shoot" data-bind="tab: false">Shoot</a></li>\n\t\t\t<li><a href="#weapons" data-bind="tab: false">Weapons</a></li>\n\t\t</ul>\n\n\t\t<div class="content">\n\t\t\t<div class="tab-pane active" id="move">\n\t\t\t\t<div class="control-group">\n\t\t\t\t\t<div class="control-label">Move forward:</div><div name="forwardKey" class="control-input input-key" data-bind="keyinput: forwardKey, event: { change: updated }"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="control-group">\n\t\t\t\t\t<div class="control-label">Move left:</div><div name="leftKey" class="control-input input-key" data-bind="keyinput: leftKey, event: { change: updated }"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="control-group">\n\t\t\t\t\t<div class="control-label">Move back:</div><div name="backKey" class="control-input input-key" data-bind="keyinput: backKey, event: { change: updated }"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="control-group">\n\t\t\t\t\t<div class="control-label">Move right:</div><div name="rightKey" class="control-input input-key" data-bind="keyinput: rightKey, event: { change: updated }"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="control-group">\n\t\t\t\t\t<div class="control-label">Jump:</div><div name="upKey" class="control-input input-key" data-bind="keyinput: upKey, event: { change: updated }"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class="tab-pane" id="look">\n\t\t\t\t<div class="control-group">\n\t\t\t\t\t<div class="control-label">Sensitivity:</div><div name="sensitivity" class="control-input input-range" min="0" max="10" data-bind="rangeinput: sensitivity, event: { change: updated }"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class="tab-pane" id="shoot">\n\t\t\t\t<div class="control-group">\n\t\t\t\t\t<div class="control-label">Attack:</div><div name="attackKey" class="control-input input-key" data-bind="keyinput: attackKey, event: { change: updated }"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="control-group">\n\t\t\t\t\t<div class="control-label">Zoom:</div><div name="zoomKey" class="control-input input-key" data-bind="keyinput: zoomKey, event: { change: updated }"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="control-group">\n\t\t\t\t\t<div class="control-label">Next weapon:</div><div name="weapnextKey" class="control-input input-key" data-bind="keyinput: weapnextKey, event: { change: updated }"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="control-group">\n\t\t\t\t\t<div class="control-label">Prev weapon:</div><div name="weapprevKey" class="control-input input-key" data-bind="keyinput: weapprevKey, event: { change: updated }"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class="tab-pane" id="weapons">\n\t\t\t\t<div class="control-group">\n\t\t\t\t\t<div class="control-label">Gauntlet:</div><div name="weapon1Key" class="control-input input-key" data-bind="keyinput: weapon1Key, event: { change: updated }"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="control-group">\n\t\t\t\t\t<div class="control-label">Machinegun:</div><div name="weapon2Key" class="control-input input-key" data-bind="keyinput: weapon2Key, event: { change: updated }"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="control-group">\n\t\t\t\t\t<div class="control-label">Shotgun:</div><div name="weapon3Key" class="control-input input-key" data-bind="keyinput: weapon3Key, event: { change: updated }"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="control-group">\n\t\t\t\t\t<div class="control-label">Grenade launcher:</div><div name="weapon4Key" class="control-input input-key" data-bind="keyinput: weapon4Key, event: { change: updated }"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="control-group">\n\t\t\t\t\t<div class="control-label">Rocket launcher:</div><div name="weapon5Key" class="control-input input-key" data-bind="keyinput: weapon5Key, event: { change: updated }"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="control-group">\n\t\t\t\t\t<div class="control-label">Lightning gun:</div><div name="weapon6Key" class="control-input input-key" data-bind="keyinput: weapon6Key, event: { change: updated }"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="control-group">\n\t\t\t\t\t<div class="control-label">Railgun:</div><div name="weapon7Key" class="control-input input-key" data-bind="keyinput: weapon7Key, event: { change: updated }"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="control-group">\n\t\t\t\t\t<div class="control-label">Plasma gun:</div><div name="weapon8Key" class="control-input input-key" data-bind="keyinput: weapon8Key, event: { change: updated }"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="control-group">\n\t\t\t\t\t<div class="control-label">BFG:</div><div name="weapon9Key" class="control-input input-key" data-bind="keyinput: weapon9Key, event: { change: updated }"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<div class="tab-pane" id="character">\n\t\t<div class="control-group">\n\t\t\t<div class="control-label">Name:</div><div name="name" class="control-input input-text" data-bind="textinput: name, event: { change: updated }"></div>\n\t\t</div>\n\t</div>\n\n\t<div class="tab-pane" id="game">\n\t\t<div class="control-group">\n\t\t\t<div class="control-label">Autoswitch weapons:</div><div name="autoSwitch" class="control-input input-radio" data-bind="radioinput: autoSwitch, event: { change: updated }"></div>\n\t\t</div>\n\n\t\t<div class="control-group">\n\t\t\t<div class="control-label">Net time nudge:</div><div name="timeNudge" class="control-input input-range" min="-30" max="30" data-bind="rangeinput: timeNudge, event: { change: updated }"></div>\n\t\t</div>\n\t</div>\n</div>';});

define('text!ui/templates/tab.tpl',[],function () { return '<div class="fullscreen" data-bind="visible: visible, attr: { id: title }">\n\t<script type="text/html" id="tab-pane">\n\t\t<div class="tab-pane" data-bind="attr: { id: id }"></div>\n\t</script>\n\n\t<div class="dialog">\n\t\t<ul class="sections" data-bind="foreach: tabs">\n\t\t\t<li><a data-bind="attr: { href: \'#\' + id() }, text: title, tab: $index() === 0"></a></li>\n\t\t</ul>\n\n\t\t<div class="content" data-bind="template: { name: \'tab-pane\', foreach: tabs, afterRender: bindTab }">\n\t\t</div>\n\t</div>\n</div>';});

define('ui/views/currentgame',['require','knockout'],function (require) {

var ko = require('knockout');

return function (UI) {

function ArenaModel() {
	var self = this;

	self.name = ko.observable('unknown');
	self.playersPerTeam = ko.observable(0);
	self.numClients = ko.observable(0);

	self.type = ko.computed(function () {
		return self.playersPerTeam() === 0 ? 'Pickup' : self.playersPerTeam() + 'v' + self.playersPerTeam();
	}, self);
}

function CurrentGameMenuModel() {
	var self = this;

	self.gametype = ko.observable('unknown');
	self.currentTeam = ko.observable(0);
	self.currentArenaNum = ko.observable(0);
	self.arenas = ko.observableArray([]);

	self.getArena = function (i) {
		if (!self.arenas()[i]) {
			self.arenas.valueWillMutate();
			self.arenas()[i] = new ArenaModel();
			self.arenas.valueHasMutated();
		}

		return self.arenas()[i];
	};

	self.rocketarena = ko.computed(function () {
		return self.gametype() === 'ca' && self.arenas().length > 1;
	}, self);

	self.lobby = ko.computed(function () {
		return self.rocketarena() && self.currentArenaNum() === 0;
	}, self);

	self.currentTeamName = ko.computed(function () {
		return self.currentTeam() === 1 ? 'RED' : 'BLUE';
	}, self);

	self.currentArena = ko.computed(function () {
		return self.getArena(self.currentArenaNum());
	});

	self.joinTeam = function (ev, team) {
		var el = ev.target;

		UI.ExecuteBuffer('team ' + team);
		UI.PopMenu();
	};

	self.joinArena = function (ev, arenaNum) {
		var el = ev.target;

		UI.ExecuteBuffer('arena ' + arenaNum);
		UI.PopMenu();
	};
}

return CurrentGameMenuModel;

};

});
define('ui/views/default',['require','knockout'],function (require) {

var ko = require('knockout');

return function (UI) {

var DefaultViewModel = function () {
	this.visible = ko.observable(false);
};

return DefaultViewModel;

};

});
define('ui/views/hud',['require','knockout','common/qshared'],function (require) {

var ko = require('knockout');
var QS = require('common/qshared');

return function (UI) {

var LAG_SAMPLES = 64;
var MAX_HUD_EVENTS = 6;
var HUD_EVENT_TIME     = 4000;
var CROSSHAIRNAME_TIME = 1000;
var CENTERPRINT_TIME   = 3000;

function HudEvent(type, text) {
	this.type = name;
	this.text = QS.colorize(text);
}

function HudWeapon(icon, ammo) {
	this.icon = ko.observable(icon);
	this.ammo = ko.observable(ammo);
}

function HudSampleFrame(val, flags) {
	this.val = ko.observable(val);
	this.flags = ko.observable(flags);
}

function HudScore() {
	this.visible = ko.observable(false);
	this.localplayer = ko.observable(false);
	this.count = ko.observable(0);
	this.score = ko.observable(0);
	this.rank = ko.observable(0);
	this.name = ko.observable('');
}

function HudViewModel() {
	var self = this;

	self.visible = ko.observable(false);

	self.alive = ko.observable(false);

	// Scores.
	self.score1 = new HudScore();
	self.score2 = new HudScore();

	// Chat.
	self.events = ko.observableArray([]);

	// Gamestate.
	self.gametype = new ko.observable('unknown');
	self.gamestate = new ko.observable(0);
	self.warmup = new ko.observable('unknown');

	// Player info.
	self.centerPrint = ko.observable(null);
	self.centerPrintVisible = ko.observable(false);
	self.centerPrintTimeout = 0;

	self.crosshairName = ko.observable(null);
	self.crosshairNameVisible = ko.observable(false);
	self.crosshairNameTimeout = 0;

	self.weaponSelect = ko.observable(0);
	self.weapons = ko.observableArray([]);
	self.fps = ko.observable(0);
	self.health = ko.observable(0);
	self.armor = ko.observable(0);

	// Lagometer.
	self.lagometerVisible = ko.observable(false);
	self.frames = ko.observableArray([]);
	self.currentFrame = 0;
	self.snapshots = ko.observableArray([]);
	self.currentSnapshot = 0;

	// Debug counts.
	self.countsVisible = ko.observable(false);
	self.shaders = ko.observable(0);
	self.nodes = ko.observable(0);
	self.leafs = ko.observable(0);
	self.surfaces = ko.observable(0);
	self.indexes = ko.observable(0);
	self.culledModelOut = ko.observable(0);
	self.culledModelIn = ko.observable(0);
	self.culledModelClip = ko.observable(0);

	self.addEvent = function (type, text) {
		// Shift one off the stack if we're full.
		if (self.events.length >= MAX_HUD_EVENTS) {
			self.events.shift();
		}

		// Add event to stack.
		var ev = new HudEvent(type, text);
		self.events.push(ev);

		// Remove in a few seconds if it still exists.
		setTimeout(function () {
			var idx = self.events.indexOf(ev);
			if (idx === -1) {
				return;
			}

			self.events.splice(idx, 1);
		}, HUD_EVENT_TIME);
	};

	self.setWeaponIcon = function (i, icon) {
		if (!self.weapons()[i]) {
			self.weapons.valueWillMutate();
			self.weapons()[i] = new HudWeapon(icon, 0);
			self.weapons.valueHasMutated();
		} else {
			self.weapons()[i].icon(icon);
		}
	};

	self.setWeaponAmmo = function (i, ammo) {
		if (!self.weapons()[i]) {
			self.weapons.valueWillMutate();
			self.weapons()[i] = new HudWeapon(0, ammo);
			self.weapons.valueHasMutated();
		} else {
			self.weapons()[i].ammo(ammo);
		}
	};

	self.addLagometerFrame = function (val) {
		var i = self.currentFrame++ % LAG_SAMPLES;

		if (!self.frames()[i]) {
			self.frames.valueWillMutate();
			self.frames()[i] = new HudSampleFrame(val, 0);
			self.frames.valueHasMutated();
		} else {
			self.frames()[i].val(val);
		}
	};

	self.addSnapshotFrame = function (val, flags) {
		var i = self.currentSnapshot++ % LAG_SAMPLES;

		if (!self.snapshots()[i]) {
			self.snapshots.valueWillMutate();
			self.snapshots()[i] = new HudSampleFrame(val, flags);
			self.snapshots.valueHasMutated();
		} else {
			self.snapshots()[i].val(val);
			self.snapshots()[i].flags(flags);
		}
	};

	self.setCrosshairName = function (name) {
		self.crosshairName(name);
		self.crosshairNameVisible(true);

		clearTimeout(self.crosshairNameTimeout);
		self.crosshairNameTimeout = setTimeout(function () {
			self.crosshairNameVisible(false);
		}, CROSSHAIRNAME_TIME);
	};

	self.setCenterPrint = function (text) {
		self.centerPrint(QS.colorize(text));
		self.centerPrintVisible(true);

		clearTimeout(self.centerPrintTimeout);
		self.centerPrintTimeout = setTimeout(function () {
			self.centerPrintVisible(false);
		}, CENTERPRINT_TIME);
	};
}

return HudViewModel;

};

});
define('ui/views/loading',['require','knockout'],function (require) {

var ko = require('knockout');

return function (UI) {

function LoadingViewModel() {
	var self = this;

	self.visible = ko.observable(false);

	self.mapName = ko.observable('unknown');
	self.progress = ko.observable(0);
}

return LoadingViewModel;

};

});
define('ui/views/message',['require','knockout'],function (require) {

var ko = require('knockout');

return function (UI) {

var MAX_CONSOLE_MESSAGES = 12;

function MessageMenuModel() {
	var self = this;

	self.visible = ko.observable(false);

	self.keyPress = function (data, ev) {
		var keyName = ev.key;

		if (keyName !== 'enter') {
			return;
		}

		var el = ev.target;

		// blur() to update value.
		el.blur();

		// Escape quotes in text.
		var text = el.value.replace(/"/g, '\\"');

		UI.ExecuteBuffer('say "' + text + '"');
		UI.PopMenu();
	};
}

return MessageMenuModel;

};

});
define('ui/views/scoreboard',['require','knockout'],function (require) {

var ko = require('knockout');

return function (UI) {

function ScoreModel(spectatorNum, name, score, ping, time, eliminated) {
	this.spectatorNum = spectatorNum;
	this.name = name;
	this.score = score;
	this.ping = ping;
	this.time = time;
	this.eliminated = eliminated;
}

function ScoreboardViewModel() {
	var self = this;

	self.visible = ko.observable(false);
	self.gametype = ko.observable('unknown');
	self.score1 = ko.observable(0);
	self.score2 = ko.observable(0);
	self.freeScores = ko.observableArray([]);
	self.redScores = ko.observableArray([]);
	self.blueScores = ko.observableArray([]);
	self.specScores = ko.observableArray([]);

	self.resetScores = function () {
		self.freeScores.removeAll();
		self.redScores.removeAll();
		self.blueScores.removeAll();
		self.specScores.removeAll();
	};

	self.addFreeScore = function (spectatorNum, name, score, ping, time, eliminated) {
		self.freeScores.push(new ScoreModel(spectatorNum, name, score, ping, time, eliminated));
	};

	self.addRedScore = function (spectatorNum, name, score, ping, time, eliminated) {
		self.redScores.push(new ScoreModel(spectatorNum, name, score, ping, time, eliminated));
	};

	self.addBlueScore = function (spectatorNum, name, score, ping, time, eliminated) {
		self.blueScores.push(new ScoreModel(spectatorNum, name, score, ping, time, eliminated));
	};

	self.addSpecScore = function (spectatorNum, name, score, ping, time, eliminated) {
		self.specScores.push(new ScoreModel(spectatorNum, name, score, ping, time, eliminated));
	};
}

return ScoreboardViewModel;

};

});
/* global CustomEvent:true */

define('ui/views/settings',['require','knockout','common/cvar'],function (require) {

var ko = require('knockout');
var Cvar = require('common/cvar');

return function (UI) {

function SettingsMenuModel() {
	var self = this;

	var cvars = {
		'sensitivity': 'cl_sensitivity',
		'name':        'name',
		'autoSwitch':  'cg_autoSwitch',
		'timeNudge':   'cl_timeNudge'
	};

	var cmds = {
		'forwardKey':  '+forward',
		'leftKey':     '+left',
		'backKey':     '+back',
		'rightKey':    '+right',
		'upKey':       '+jump',
		'attackKey':   '+attack',
		'zoomKey':     '+zoom',
		'weapnextKey': 'weapnext',
		'weapprevKey': 'weapprev',
		'weapon1Key':  'weapon 1',
		'weapon2Key':  'weapon 2',
		'weapon3Key':  'weapon 3',
		'weapon4Key':  'weapon 4',
		'weapon5Key':  'weapon 5',
		'weapon6Key':  'weapon 6',
		'weapon7Key':  'weapon 7',
		'weapon8Key':  'weapon 8',
		'weapon9Key':  'weapon 9'
	};

	// Add properties for cvars / cmds.
	for (var name in cvars) {
		if (!cvars.hasOwnProperty(name)) {
			continue;
		}

		var cvarName = cvars[name];
		var cvar = Cvar.AddCvar(cvarName);
		self[name] = ko.observable(cvar.get());
	}

	for (var name in cmds) {
		if (!cmds.hasOwnProperty(name)) {
			continue;
		}

		var cmd = cmds[name];
		var keys = UI.GetKeyNamesForCmd(cmd);
		self[name] = ko.observable(keys.length ? keys[0] : '');
	}

	//
	self.updated = function (data, ev) {
		var el = ev.target;
		var settingName = ev.target.getAttribute('name');
		var settingValue = ev.target.value;

		// Update the cvar or bind.
		if (cvars[settingName]) {
			var cvarName = cvars[settingName];
			var cvar = Cvar.AddCvar(cvarName);

			cvar.set(settingValue);
		} else if (cmds[settingName]) {
			var cmdName = cmds[settingName];
			var keyName = settingValue;

			UI.ExecuteBuffer('unbindall ' + cmdName);

			if (!settingValue) {
				UI.ExecuteBuffer('unbind ' + keyName);
			} else {
				UI.ExecuteBuffer('bind ' + keyName + ' \"' + cmdName + '\"');
			}
		}
	};
}

return SettingsMenuModel;

};

});
define('ui/views/tab',['require','knockout'],function (require) {

var ko = require('knockout');

return function (UI) {

function TabModel(title, model, template) {
	var self = this;

	self.title = title;
	self.id = ko.computed(function () {
		return self.title.toLowerCase().replace(/\s+/, '-');
	});
	self.model = model;
	self.template = template;
}

function TabMenuModel() {
	var self = this;

	self.visible = ko.observable(false);

	self.title = ko.observable('unknown');
	self.tabs = ko.observableArray([]);

	self.addTab = function (title, model, template) {
		self.tabs.push(new TabModel(title, model, template));
	};

	self.bindTab = function (elements, tabModel) {
		var pane;

		for (var i = 0; i < elements.length; i++) {
			if (elements[i] instanceof HTMLElement) {
				pane = elements[i];
				break;
			}
		}

		if (!pane) {
			return;
		}

		pane.innerHTML = '<div>' + tabModel.template + '</div>';
		ko.applyBindings(tabModel.model, pane.firstChild);
	};
}

return TabMenuModel;

};

});
define('ui/components/hasfocus',['require','knockout'],function (require) {

var ko = require('knockout');

return function (UI) {

/**
 * Custom hasfocus supporting our internal focusing.
 */
ko.bindingHandlers['hasfocus'] = {
	init: function(element, valueAccessor, allBindingsAccessor) {
		var handleElementFocusChange = function () {
			var modelValue = valueAccessor();
			var isFocused = (UI.FocusElement() === element);
			ko.expressionRewriting.writeValueToProperty(modelValue, allBindingsAccessor, 'hasfocus', isFocused, true);
		};

		ko.utils.registerEventHandler(element, 'focus', handleElementFocusChange);
		ko.utils.registerEventHandler(element, 'blur',  handleElementFocusChange);
	},
	update: function(element, valueAccessor) {
		var value = !!ko.utils.unwrapObservable(valueAccessor()); // force boolean to compare with last value
		if (value) {
			element.focus();
		} else {
			element.blur();
		}
	}
};

};

});
define('ui/components/img',['require','knockout'],function (require) {

var ko = require('knockout');

return function (UI) {

/**
 * Async image component
 *
 * Load default image into elements decorated with image handle attributes,
 * followed by the real image once it's done loading.
 */
var AsyncImage = function (element, initialValue) {
	var setImageData = function (data) {
		element.style.backgroundRepeat = 'none';
		element.style.backgroundSize = 'contain';
		element.style.backgroundImage = 'url(\'' + data + '\')';
	};

	if (!isNaN(initialValue)) {
		var img = UI.FindImageByHandle(initialValue);
		setImageData(img.data);
	} else {
		var defaultImage = UI.FindImageByHandle(0);
		setImageData(defaultImage.data);

		UI.RegisterImage(initialValue, function (hImage) {
			var img = UI.FindImageByHandle(hImage);
			setImageData(img.data);
		});
	}
};

ko.bindingHandlers.img = {
	update: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
		var value = valueAccessor();
		var valueUnwrapped = ko.utils.unwrapObservable(value);

		AsyncImage(element, valueUnwrapped);
	}
};

};

});
define('ui/components/keyinput',['require','knockout'],function (require) {

var ko = require('knockout');

return function (UI) {

/**
 * Key input components
 *
 * Process key input for binds.
 */
var KeyInput = function (element, initialValue) {
	var self = this;

	this.el = element;
	this.initialClick = false;
	this.value = null;
	this.originalValue = null;

	Object.defineProperty(this.el, 'value', {
		get: function () { return self.value; },
		set: function (val) { self.value = val || ''; self.el.innerHTML = self.value || '&nbsp;'; }
	});
	this.el.value = initialValue;

	this.el.addEventListener('focus', function (ev) {
		self.onFocus(ev);
	});

	this.el.addEventListener('blur', function (ev) {
		self.onBlur(ev);
	});

	this.el.addEventListener('keypress', function (ev) {
		self.onKeyPress(ev);
	});

	this.el.addEventListener('click', function (ev) {
		self.onClick(ev);
	});
};

KeyInput.prototype.onFocus = function (ev) {
	this.initialClick = true;
	this.originalValue = this.el.value;
};

KeyInput.prototype.onBlur = function (ev) {
	if (this.el.value !== this.originalValue) {
		var ev = document.createEvent('Event');
		ev.initEvent('change', true, false);
		this.el.dispatchEvent(ev);
	}
};

KeyInput.prototype.onKeyPress = function (ev) {
	var keyName = ev.key;

	// Update the actual value.
	if (keyName === 'backspace') {
		this.el.value = null;
	} else {
		this.el.value = keyName;
	}

	// Trigger a blur to clear focus.
	this.el.blur();
};

KeyInput.prototype.onClick = function (ev) {
	// Ignore the initial click that caused the focus.
	if (this.initialClick) {
		this.initialClick = false;
		return;
	}

	var keyName = 'mouse' + ev.button;
	this.el.value = keyName;
	this.el.blur();
};

ko.bindingHandlers.keyinput = {
	init: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
		var value = valueAccessor();
		var valueUnwrapped = ko.utils.unwrapObservable(value);
		var input = new KeyInput(element, valueUnwrapped);
	}
};

};

});
define('ui/components/radioinput',['require','knockout'],function (require) {

var ko = require('knockout');

return function (UI) {

/**
 * RadioInput component
 */
var RadioInput = function (element, initialValue) {
	var self = this;

	this.el = element;
	this.value = null;

	Object.defineProperty(this.el, 'value', {
		get: function () {
			return self.value;
		},
		set: function (val) {
			self.value = !!val;
			// Set actual element attr so CSS can style it.
			self.el.setAttribute('value', self.value);
		}
	});
	this.el.value = initialValue;

	this.el.addEventListener('click', function (ev) {
		self.onClick(ev);
	});
};

RadioInput.prototype.onClick = function (ev) {
	this.toggle();
};

RadioInput.prototype.enabled = function (enabled) {
	if (arguments.length) {
		// Update the element's data attribute.
		this.el.value = enabled;

		// Trigger changed event.
		var ev = document.createEvent('Event');
		ev.initEvent('change', true, false);
		this.el.dispatchEvent(ev);
	} else {
		return this.el.value;
	}
};

RadioInput.prototype.toggle = function () {
	this.enabled(!this.enabled());
};

ko.bindingHandlers.radioinput = {
	init: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
		var value = valueAccessor();
		var valueUnwrapped = ko.utils.unwrapObservable(value);
		var input = new RadioInput(element, valueUnwrapped);
	}
};

};

});
define('ui/components/rangeinput',['require','knockout'],function (require) {

var ko = require('knockout');

return function (UI) {

/**
 * RangeInput component
 *
 * Min/max slider component.
 */
var RangeInput = function (element, initialValue) {
	var self = this;

	var track = document.createElement('div');
	track.setAttribute('class', 'range-track');

	var slider = document.createElement('div');
	slider.setAttribute('class', 'range-slider');

	element.appendChild(track);
	element.appendChild(slider);

	this.el = element;
	this.slider = slider;
	this.value = null;

	Object.defineProperty(this.el, 'value', {
		get: function () { return self.value; },
		set: function (val) { self.value = parseFloat(val); self.updateSlider(); }
	});
	this.el.value = initialValue;

	this.el.addEventListener('click', function (ev) {
		self.onClick(ev);
	});
};

RangeInput.prototype.min = function () {
	var min = parseInt(this.el.getAttribute('min'), 10);
	return !isNaN(min) ? min : 0;
};

RangeInput.prototype.max = function (newValue) {
	var max = parseInt(this.el.getAttribute('max'), 10);
	return !isNaN(max) ? max : 0;
};

RangeInput.prototype.onClick = function (ev) {
	var width = this.el.offsetWidth;

	var range = this.max() - this.min();
	var scale = ev.clientX / width;

	this.el.value = this.min() + scale * range;

	// Trigger changed event.
	var ev = document.createEvent('Event');
	ev.initEvent('change', true, false);
	this.el.dispatchEvent(ev);
};

RangeInput.prototype.updateSlider = function () {
	var width = this.el.offsetWidth;

	// AP - updateSlider is called the same frame the container is initialized,
	// in which case it will take a frame before the DOM jQuery returns us a
	// valid width
	if (!width) {
		var self = this;
		setTimeout(function () { self.updateSlider(); }, 0);
		return;
	}

	var range = this.max() - this.min();
	var scale = ((this.el.value - this.min()) / range) * 100.0;

	// Update the slider position.
	this.slider.style.left = scale + '%';
};

ko.bindingHandlers.rangeinput = {
	init: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
		var value = valueAccessor();
		var valueUnwrapped = ko.utils.unwrapObservable(value);
		var input = new RangeInput(element, valueUnwrapped);
	}
};

};

});
define('ui/components/tab',['require','knockout','ui/dom'],function (require) {

var ko = require('knockout');
var DOM = require('ui/dom');

return function (UI) {

/**
 * Tab component
 */
var Tab = function (element, selected) {
	var self = this;

	self.el = element;
	self.container = element;
	do {
		self.container = self.container.parentNode;
	} while (self.container && self.container.tagName.toLowerCase() !== 'ul');

	DOM.removeEventListener(self.el, 'click');
	DOM.addEventListener(self.el, 'click', function (ev) {
		self.show(ev);
	});

	if (selected) {
		// Wait 1 frame for the entire template to render.
		setTimeout(function () {
			self.el.click();
		}, 0);
	}
};

Tab.prototype.show = function (ev) {
	var tab = ev.target;
	var tabId = tab.getAttribute('href');
	tabId = tabId.replace('#', '');

	// Don't activate if we're already the active tab.
	if (DOM.hasClass(tab.parentNode, 'active')) {
		return;
	}

	var content = document.getElementById(tabId);
	if (!content) {
		UI.Log('Couldn\'t find content for tab id', tabId);
		return;
	}

	this.activate(tab.parentNode);
	this.activate(content);
};

Tab.prototype.activate = function (element) {
	var old = element.parentNode.getElementsByClassName('active');

	for (var i = 0; i < old.length; i++) {
		// Ignore if not our sibling.
		if (old[i].parentNode !== element.parentNode) {
			continue;
		}

		DOM.removeClass(old[i], 'active');
	}

	DOM.addClass(element, 'active');
};

ko.bindingHandlers.tab = {
	init: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
		var value = valueAccessor();
		var valueUnwrapped = ko.utils.unwrapObservable(value);
		var input = new Tab(element, valueUnwrapped);
	}
};

};

});
define('ui/components/textinput',['require','knockout'],function (require) {

var ko = require('knockout');

return function (UI) {

/**
 * TextInput component
 *
 * General text input component.
 */
var TextInput = function (element, initialValue) {
	var self = this;

	this.el = element;
	this.value = null;
	this.originalValue = null;

	Object.defineProperty(this.el, 'value', {
		get: function () { return self.value; },
		set: function (val) { self.value = val || ''; self.el.innerHTML = self.value || '&nbsp;'; }
	});
	this.el.value = initialValue;

	this.el.addEventListener('focus', function (ev) {
		self.onFocus(ev);
	});

	this.el.addEventListener('blur', function (ev) {
		self.onBlur(ev);
	});

	this.el.addEventListener('keypress', function (ev) {
		self.onKeyPress(ev);
	});
};

TextInput.prototype.onFocus = function (ev) {
	this.originalValue = this.el.value;
};

TextInput.prototype.onBlur = function (ev) {
	if (this.el.value !== this.originalValue) {
		var ev = document.createEvent('Event');
		ev.initEvent('change', true, false);
		this.el.dispatchEvent(ev);
	}
};

TextInput.prototype.onKeyPress = function (ev) {
	var keyName = ev.key;

	if (keyName === 'enter') {
		// Clear focus.
		this.el.blur();
		return;
	}

	if (keyName.length === 1) {
		this.el.value += keyName;
	} else if (keyName === 'space') {
		this.el.value += ' ';
	} else if (keyName === 'backspace') {
		this.el.value = this.el.value.slice(0, -1);
	}
};

ko.bindingHandlers.textinput = {
	init: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
		var value = valueAccessor();
		var valueUnwrapped = ko.utils.unwrapObservable(value);
		var input = new TextInput(element, valueUnwrapped);
	}
};

};

});
define('ui/ui',['require','underscore','knockout','common/qshared','common/asset-cache','common/cvar','ui/dom','text!ui/css/views.css','text!ui/templates/currentgame.tpl','text!ui/templates/default.tpl','text!ui/templates/hud.tpl','text!ui/templates/loading.tpl','text!ui/templates/message.tpl','text!ui/templates/scoreboard.tpl','text!ui/templates/settings.tpl','text!ui/templates/tab.tpl','ui/views/currentgame','ui/views/default','ui/views/hud','ui/views/loading','ui/views/message','ui/views/scoreboard','ui/views/settings','ui/views/tab','ui/components/hasfocus','ui/components/img','ui/components/keyinput','ui/components/radioinput','ui/components/rangeinput','ui/components/tab','ui/components/textinput'],function (require) {
	var _                       = require('underscore');
	var ko                      = require('knockout');
	var QS                      = require('common/qshared');
	var AssetCache              = require('common/asset-cache');
	var Cvar                    = require('common/cvar');
	var DOM                     = require('ui/dom');
	var css                     = require('text!ui/css/views.css');
	var CurrentGameMenuTemplate = require('text!ui/templates/currentgame.tpl');
	var DefaultViewTemplate     = require('text!ui/templates/default.tpl');
	var HudViewTemplate         = require('text!ui/templates/hud.tpl');
	var LoadingViewTemplate     = require('text!ui/templates/loading.tpl');
	var MessageMenuTemplate     = require('text!ui/templates/message.tpl');
	var ScoreboardViewTemplate  = require('text!ui/templates/scoreboard.tpl');
	var SettingsMenuTemplate    = require('text!ui/templates/settings.tpl');
	var TabMenuTemplate         = require('text!ui/templates/tab.tpl');

	function UserInterface(imp) {
		var CurrentGameMenuModel = require('ui/views/currentgame')(GetPrivateExports());
		var DefaultViewModel     = require('ui/views/default')(GetPrivateExports());
		var HudViewModel         = require('ui/views/hud')(GetPrivateExports());
		var LoadingViewModel     = require('ui/views/loading')(GetPrivateExports());
		var MessageMenuModel     = require('ui/views/message')(GetPrivateExports());
		var ScoreboardViewModel  = require('ui/views/scoreboard')(GetPrivateExports());
		var SettingsMenuModel    = require('ui/views/settings')(GetPrivateExports());
		var TabMenuModel         = require('ui/views/tab')(GetPrivateExports());

		var hasfocus             = require('ui/components/hasfocus')(GetPrivateExports());
		var img                  = require('ui/components/img')(GetPrivateExports());
		var keyinput             = require('ui/components/keyinput')(GetPrivateExports());
		var radioinput           = require('ui/components/radioinput')(GetPrivateExports());
		var rangeinput           = require('ui/components/rangeinput')(GetPrivateExports());
		var tab                  = require('ui/components/tab')(GetPrivateExports());
		var textinput            = require('ui/components/textinput')(GetPrivateExports());

		include('ui/ui-main');
		include('ui/ui-image');
		include('ui/ui-view');

		return GetPublicExports();
	}

	return UserInterface;
});